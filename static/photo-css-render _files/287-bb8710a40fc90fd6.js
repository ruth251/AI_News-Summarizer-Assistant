try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7ca2e3c7-65b4-4f7e-a673-30040197e244",e._sentryDebugIdIdentifier="sentry-dbid-7ca2e3c7-65b4-4f7e-a673-30040197e244")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{96484:function(e,t,n){n.d(t,{L6:function(){return l},Rc:function(){return d},fm:function(){return i}});var r=n(57437),a=n(2265);let s="editor-mode-store",i=["auto","gpt-4.1","gpt-4.1-mini","o4-mini","gemini-2.5-pro","gemini-2.5-flash","claude-3.5-sonnet","claude-3.7-sonnet","claude-4-sonnet","claude-4-opus"],o=(0,a.createContext)(null),d=e=>{let{children:t}=e,[n,i]=(0,a.useState)(()=>null);return(0,a.useEffect)(()=>{null===n?localStorage.removeItem(s):localStorage.setItem(s,JSON.stringify(n))},[n]),(0,r.jsx)(o.Provider,{value:{selectedModel:n,setSelectedModel:i},children:t})},l=()=>{let e=(0,a.useContext)(o);if(!e)throw Error("useGetSelectedChatModel must be used within a ModelSelectorProvider");return e}},82176:function(e,t,n){n.d(t,{ZR:function(){return g},dl:function(){return p},t_:function(){return y}});var r=n(57437),a=n(22048),s=n(99376),i=n(46214),o=n(23664),d=n(2265),l=n(21288),u=n(52558),c=n(25566);let f=(0,d.createContext)(void 0),m=()=>{let e=(0,d.useContext)(f);if(!e)throw Error("useFeatureFlagContext must be used within a PostHogFlagsContext in the PosthogProvider");return e},p=e=>!!m()[e],g=e=>m()[e],h="phc_xdBVCyOkYw40Pqd7xp5Er88lGq2IGFd4kZHRiKvvkjr",v=h&&!0;function y(e){let{children:t,bootstrapData:n}=e,{authUser:l}=(0,u.Eu)(),m=(0,u.eA)(),p=(0,d.useMemo)(()=>null==l?void 0:l.uid,[null==l?void 0:l.uid]),g=(0,d.useMemo)(()=>null==l?void 0:l.displayName,[null==l?void 0:l.displayName]),y=(0,d.useMemo)(()=>({featureFlags:(null==n?void 0:n.featureFlags)||{},distinctID:(null==n?void 0:n.distinctID)||""}),[n]);return(0,d.useEffect)(()=>{p&&a.av({id:p})},[p]),(0,d.useEffect)(()=>{v&&p&&(i.ZP.identify(p,{email:m,name:g}),i.ZP.capture("github_branch",{branch:c.env.BRANCH||null}))},[p,m,g]),(0,d.useEffect)(()=>{v&&i.ZP.init(h,{api_host:"https://lovable.dev/ingest",ui_host:"https://us.posthog.com",bootstrap:n,session_recording:{maskAllInputs:!1,maskInputOptions:{password:!0}},autocapture:{element_allowlist:["button"]},verbose:!1})},[n]),!function(){let e=(0,s.usePathname)();(0,d.useEffect)(()=>{i.ZP.capture("$pageview")},[e])}(),(0,r.jsx)(f.Provider,{value:y.featureFlags,children:(0,r.jsx)(o.zf,{client:i.ZP,children:t})})}h||l.logging.info("Missing NEXT_PUBLIC_POSTHOG_KEY in env; set to 'skip' to disable")},10867:function(e,t,n){n.d(t,{AR:function(){return d},Fd:function(){return u},Oh:function(){return l}});var r=n(5978),a=n(6454),s=n(21288);let i=[],o=e=>"string"==typeof e?new Date(e):e instanceof r.EK?e.toDate():new r.EK(e.seconds,e.nanoseconds).toDate(),d=(e,t)=>{var n,r,a,d,l,u,c,f,m,p,g,h,v,y,w,b,x,_,N,S,P,E,j,C,k;switch(e.tag){case"instant-mode-message":if("user"===e.role)return{createdAt:o(e.created_at),role:"user",id:e.id,content:e.content,type:"userMessage",selectedElements:null!==(n=e.selected_elements)&&void 0!==n?n:i,images:null!==(r=e.images)&&void 0!==r?r:i,containsError:null!==(a=e.contains_error)&&void 0!==a&&a,tags:null!==(d=e.tags)&&void 0!==d?d:i,userId:null!==(l=e.user_id)&&void 0!==l?l:void 0,chatOnly:null!==(u=e.chat_only)&&void 0!==u&&u,isStuck:null!==(c=e.is_stuck)&&void 0!==c&&c,isSecurityReview:null!==(f=e.is_security_review)&&void 0!==f&&f};return{createdAt:o(e.created_at),role:"ai",id:e.id,content:e.content,type:"aiMessage",editId:null!==(p=e.edit_id)&&void 0!==p?p:void 0,stopped:!!e.stopped,errors:null!==(g=null===(m=e.errors)||void 0===m?void 0:m.sort((e,t)=>t.created_at.seconds-e.created_at.seconds))&&void 0!==g?g:void 0,langsmithUrl:null!==(h=e.langsmith_url)&&void 0!==h?h:void 0,sqlRunState:null!==(v=e.sql_run_state)&&void 0!==v?v:void 0,persisted:null!==(y=null==t?void 0:t.persisted)&&void 0!==y&&y,status:null!==(w=e.status)&&void 0!==w?w:"completed",thinkingTimeMs:null!==(b=e.thinking_time_ms)&&void 0!==b?b:void 0,feedbackSentiment:null!==(x=e.feedback_sentiment)&&void 0!==x?x:void 0,feedbackContent:null!==(_=e.feedback_content)&&void 0!==_?_:void 0,feedbackCategory:null!==(N=e.feedback_category)&&void 0!==N?N:void 0,costCredits:null!==(S=e.cost_credits)&&void 0!==S?S:void 0};case"branch-switched":return{createdAt:o(e.created_at),id:e.id,type:"branchSwitched",branchName:e.branch_name};case"external-commit-pushed":return{createdAt:o(e.created_at),id:e.id,type:"userCommit",shortCommitHash:null!==(P=e.commit_hash)&&void 0!==P?P:void 0,commitMessage:e.commit_message};case"revert-success":return{createdAt:o(e.created_at),id:e.id,type:"revertSuccess",shortCommitHash:null!==(E=e.commit_hash)&&void 0!==E?E:void 0,editId:null!==(j=e.edit_id)&&void 0!==j?j:""};case"manual-edit":return{createdAt:o(e.created_at),id:e.id,type:"manualEdit",content:e.content,editId:e.edit_id,errors:null!==(k=null===(C=e.errors)||void 0===C?void 0:C.sort((e,t)=>t.created_at.seconds-e.created_at.seconds))&&void 0!==k?k:void 0};case"revert":if("user"===e.role)return{createdAt:o(e.created_at),id:e.id,type:"userMessage",content:e.content,containsError:!1,tags:[],images:[],selectedElements:[],userId:e.user_id,role:"user"};return{createdAt:o(e.created_at),id:e.id,type:"aiMessage",content:e.content,role:"ai",persisted:!0,status:"completed",sqlRunState:void 0,stopped:!1};default:return s.logging.error("Unknown message tag",{message:e}),null}},l=(e,t)=>{let n={};return e.forEach(e=>{let r=e.data(),a=d(r,t);a&&(n[r.id]=a)}),n},u=()=>(0,a.Xm)("umsg").toString()},90045:function(e,t,n){n.d(t,{VK:function(){return m},cb:function(){return f},es:function(){return s},hT:function(){return p},jE:function(){return i}});var r,a,s,i,o=n(57437),d=n(2265),l=n(59625);(r=s||(s={})).RAW="RAW",r.DIFF="DIFF",(a=i||(i={})).DEFAULT="default",a.CHAT_ONLY="chat-only",a.AGENT="agent";let u=()=>(0,l.Ue)(()=>({chatMode:"default",codeViewType:"RAW"})),c=(0,d.createContext)(null),f=e=>{let{children:t}=e,n=(0,d.useRef)(u()),r={store:n.current,setChatMode:e=>{let t=n.current;"function"==typeof e?t.setState(t=>({chatMode:e(t.chatMode)})):t.setState({chatMode:e})},setCodeViewType:e=>{n.current.setState({codeViewType:e})}};return(0,o.jsx)(c.Provider,{value:r,children:t})};function m(){let e=(0,d.useContext)(c);if(!e)throw Error("useEditorModeContext must be used within an EditorModeProvider");return e}function p(e){let{store:t}=m();return t(e)}},55157:function(e,t,n){n.d(t,{r:function(){return s}});var r=n(99376),a=n(2265);let s=()=>{let e=(0,r.useRouter)(),t=(0,r.usePathname)(),n=(0,r.useSearchParams)();return{activeTab:n.get("settings"),openSettings:(0,a.useCallback)(function(r){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=new URLSearchParams(n);r?s.set("settings",r):s.set("settings","");let i="".concat(t,"?").concat(s.toString());a?e.replace(i):e.push(i)},[t,e,n]),closeSettings:(0,a.useCallback)(()=>{let r=new URLSearchParams(n);r.delete("settings"),e.push("".concat(t,"?").concat(r.toString()))},[t,e,n])}}},19060:function(e,t,n){n.d(t,{X:function(){return d}});var r=n(57437),a=n(9270),s=n(2265),i=n(94508),o=n(57346);let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...s,children:(0,r.jsx)(a.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(o.Z,{name:"check",className:"h-4 w-4"})})})});d.displayName=a.fC.displayName},23518:function(e,t,n){n.d(t,{di:function(){return f},e8:function(){return l},fu:function(){return c},mY:function(){return o},rb:function(){return u},sZ:function(){return d}});var r=n(57437),a=n(46343);n(2265),n(26110);var s=n(94508),i=n(57346);function o(e){let{className:t,...n}=e;return(0,r.jsx)(a.mY,{"data-slot":"command",className:(0,s.cn)("flex h-full w-full flex-col overflow-hidden rounded-xl bg-popover text-popover-foreground",t),...n})}function d(e){let{className:t,...n}=e;return(0,r.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,r.jsx)(i.Z,{name:"search",className:"size-4 shrink-0 opacity-50"}),(0,r.jsx)(a.mY.Input,{"data-slot":"command-input",className:(0,s.cn)("flex h-10 w-full rounded-xl bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",t),...n})]})}function l(e){let{className:t,...n}=e;return(0,r.jsx)(a.mY.List,{"data-slot":"command-list",className:(0,s.cn)("max-h-[300px] scroll-py-1 overflow-y-auto overflow-x-hidden",t),...n})}function u(e){let{...t}=e;return(0,r.jsx)(a.mY.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function c(e){let{className:t,...n}=e;return(0,r.jsx)(a.mY.Group,{"data-slot":"command-group",className:(0,s.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...n})}function f(e){let{className:t,...n}=e;return(0,r.jsx)(a.mY.Item,{"data-slot":"command-item",className:(0,s.cn)("relative flex cursor-default select-none items-center gap-2 rounded-lg px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0",t),...n})}},57054:function(e,t,n){n.d(t,{J2:function(){return o},xo:function(){return d},xp:function(){return l},yk:function(){return u}});var r=n(57437),a=n(27312),s=n(2265),i=n(94508);let o=a.fC,d=a.xz;a.ee;let l=a.x8,u=s.forwardRef((e,t)=>{let{className:n,align:s="center",sideOffset:o=4,...d}=e;return(0,r.jsx)(a.h_,{children:(0,r.jsx)(a.VY,{ref:t,align:s,sideOffset:o,className:(0,i.cn)("z-[10000] w-72 rounded-xl border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...d})})});u.displayName=a.VY.displayName},74991:function(e,t,n){n.d(t,{E:function(){return d},m:function(){return l}});var r=n(57437),a=n(20653),s=n(42325),i=n(2265),o=n(94508);let d=i.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.fC,{className:(0,o.cn)("grid gap-2",n),...a,ref:t})});d.displayName=s.fC.displayName;let l=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)(s.ck,{ref:t,className:(0,o.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...i,children:(0,r.jsx)(s.z$,{className:"flex items-center justify-center",children:(0,r.jsx)(a.jXb,{className:"h-3.5 w-3.5 fill-primary"})})})});l.displayName=s.ck.displayName},53647:function(e,t,n){n.d(t,{Bw:function(){return g},DI:function(){return u},Ph:function(){return l},Ql:function(){return v},i4:function(){return f},ki:function(){return c},n5:function(){return h}});var r=n(57437),a=n(20653),s=n(56873),i=n(2265),o=n(57346),d=n(94508);let l=s.fC,u=s.ZA,c=s.B4,f=i.forwardRef((e,t)=>{let{className:n,children:a,...i}=e;return(0,r.jsxs)(s.xz,{ref:t,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...i,children:[a,(0,r.jsx)(s.JO,{asChild:!0,children:(0,r.jsx)(o.Z,{name:"keyboard_arrow_down",size:"small",className:"opacity-50"})})]})});f.displayName=s.xz.displayName;let m=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)(s.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",n),...i,children:(0,r.jsx)(a.g8U,{className:"h-4 w-4"})})});m.displayName=s.u_.displayName;let p=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)(s.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",n),...i,children:(0,r.jsx)(a.v4q,{className:"h-4 w-4"})})});p.displayName=s.$G.displayName;let g=i.forwardRef((e,t)=>{let{className:n,children:a,position:i="popper",...o}=e;return(0,r.jsx)(s.h_,{children:(0,r.jsxs)(s.VY,{ref:t,className:(0,d.cn)("relative z-[10000] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-card text-card-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:i,...o,children:[(0,r.jsx)(m,{}),(0,r.jsx)(s.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(p,{})]})})});g.displayName=s.VY.displayName;let h=i.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-medium",n),...a})});h.displayName=s.__.displayName;let v=i.forwardRef((e,t)=>{let{className:n,children:i,...o}=e;return(0,r.jsxs)(s.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n),...o,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.wU,{children:(0,r.jsx)(a.nQG,{className:"h-4 w-4"})})}),(0,r.jsx)(s.eT,{children:i})]})});v.displayName=s.ck.displayName,i.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",n),...a})}).displayName=s.Z0.displayName},94949:function(e,t,n){n.d(t,{F:function(){return s}});var r=n(2265),a=n(26034);let s=()=>({upload:(0,r.useCallback)(async e=>{let{fileName:t,file:n,options:r,continueOnError:s=!0}=e;return(0,a.cT)(t,n,r,s)},[]),download:(0,r.useCallback)(async e=>(0,a.Sv)(e),[])})},67817:function(e,t,n){n.d(t,{v:function(){return a}});var r=n(60256);let a=()=>{let{userData:e}=(0,r.SE)();return null==e?void 0:e.is_admin}},72253:function(e,t,n){n.d(t,{I:function(){return f},S:function(){return u}});var r=n(92850),a=n(29827),s=n(2265),i=n(14438),o=n(91115),d=n(49131),l=n(97318);let u=e=>{let{workspaceId:t}=e,{data:n,isLoading:a}=(0,r.a)({queryKey:l.E.supabaseOrganizations(t),queryFn:async()=>{let e=(0,d.SJ)();return await e.get("/workspaces/".concat(t,"/supabase-organizations"))},enabled:!!t}),s=!n||0===n.length;return{supabaseOrganizations:n,isLoading:a,noOrganizations:s}},c=o.z.object({type:o.z.literal("supabaseAuth"),success:o.z.boolean(),error:o.z.string().optional()}),f=e=>{let{workspaceId:t,onConnectSuccess:n}=e,r=(0,a.NL)();(0,s.useEffect)(()=>{let e=async e=>{if(e.origin!==window.location.origin)return;let a=c.safeParse(e.data);a.success&&(a.data.success?(i.Am.success("Connection Successful",{description:"Your Supabase organization has been linked to your workspace. Select a project to finish the setup."}),await r.invalidateQueries({queryKey:l.E.supabaseOrganizations(t)}),null==n||n()):i.Am.error("Connection Failed",{description:a.data.error||"Failed to connect to Supabase. Please try again."}))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[r,t,n])}},10531:function(e,t,n){var r,a;n.d(t,{P:function(){return r}}),(a=r||(r={})).LaunchpadExamplePrompts="launchpad-example-prompts",a.AgentDefault="agent-default",a.AgentModeToggle="agent-mode-toggle",a.BetaTesters="beta_testers",a.CodeEditorWrite="code_editor_write",a.CustomDomainsBuy="custom_domains_buy",a.FeedbackFormFirstPrompt="feedback_form_first_prompt",a.GetStartedForFree="get-started-for-free",a.GithubContribution="github-contribution",a.InAppTeaching="in-app-teaching",a.Internal="internal",a.MemoryIntegration="memory-integration",a.ModelSelector="model-selector",a.NavBarUpdate="nav-bar-update",a.ProjectAnalytics="project-analytics",a.Referrals="referrals",a.ReferralCopyConfetti="referral-copy-confetti",a.SecurityReview="security-review",a.ShowTranslation="show-translation",a.SsoInvites="sso-invites",a.Templates="templates",a.VisualEditsRedesign="visual-edits-redesign",a.VoiceMode="voice-mode",a.SupabaseOnCreation="supabase-on-creation",a.PersonalProjects="draft-projects",a.VisualEditsV2="visual-edits-v2",a.PromptEnhancer="prompt-enhancer",a.CCPA="ccpa",a.GrowthKtlo="growth-ktlo",a.SupabaseExperimental="supabase-experimental",a.PageSpeed="page-speed",a.SendMessageOnCreation="send-message-on-creation"},26034:function(e,t,n){n.d(t,{Sv:function(){return i},_c:function(){return o},cT:function(){return s}});var r=n(49131),a=n(21288);let s=async function(e,t,s){var i,o;let d=!(arguments.length>3)||void 0===arguments[3]||arguments[3],l=null!==(i=null==s?void 0:s.maxFileSize)&&void 0!==i?i:3145728,u=null!==(o=null==s?void 0:s.maxDimension)&&void 0!==o?o:2e3,c=t;if(t.type.startsWith("image/")){let e=new Image;if(e.src=URL.createObjectURL(t),await new Promise(t=>e.onload=t),t.size>l||Math.max(e.width,e.height)>u)try{let{default:e}=await n.e(4937).then(n.bind(n,24937));c=await e(t,{maxSizeMB:l/1024/1024,maxWidthOrHeight:Math.min(u,1920),useWebWorker:!0})}catch(e){if(a.logging.error("Error compressing image:",{error:e}),!d)throw e}}let f={file_name:e,content_type:c.type,status:"uploading"},m=await (0,r.SJ)().post("/files/generate-upload-url",f),p=await fetch(m.url,{method:"PUT",body:c,headers:{"Content-Type":c.type}});if(!p.ok){let t=Error("Upload failed with status ".concat(p.status));if(a.logging.error("File upload failed:",{fileName:e,status:p.status}),!d)throw t}},i=async e=>(0,r.SJ)().post("/files/generate-download-url",e),o=async e=>(0,r.SJ)().post("/files/generate-public-url",e)},3813:function(e,t,n){n.d(t,{Cb:function(){return l},F9:function(){return u},Hj:function(){return N},Kb:function(){return x},R5:function(){return g},SK:function(){return m},TQ:function(){return y},Zp:function(){return i},f7:function(){return b},pW:function(){return c},qT:function(){return S},qe:function(){return f},so:function(){return w},sp:function(){return p},ty:function(){return _},uF:function(){return v},uR:function(){return d},xR:function(){return h},zq:function(){return o}});var r=n(82176),a=n(67817),s=n(10531);let i=()=>(0,r.dl)(s.P.ModelSelector)||!1,o=()=>{let e=(0,a.v)();return(0,r.dl)(s.P.AgentModeToggle)||e||!1},d=()=>(0,r.dl)(s.P.InAppTeaching)||!1,l=()=>(0,r.dl)(s.P.BetaTesters)||!1,u=()=>(0,r.dl)(s.P.NavBarUpdate)||!1,c=()=>(0,r.dl)(s.P.VisualEditsRedesign)||!1,f=()=>(0,r.dl)(s.P.LaunchpadExamplePrompts)||!1,m=()=>(0,r.dl)(s.P.Referrals)||!1,p=()=>(0,r.dl)(s.P.PersonalProjects)||!1,g=()=>(0,r.dl)(s.P.Templates)||!1,h=()=>(0,r.dl)(s.P.VisualEditsV2)||!1,v=()=>(0,r.dl)(s.P.ProjectAnalytics)||!1,y=()=>(0,r.dl)(s.P.PromptEnhancer)||!1,w=()=>(0,r.dl)(s.P.SupabaseExperimental)||!1,b=()=>(0,r.dl)(s.P.GrowthKtlo)||!1,x=()=>(0,r.dl)(s.P.ShowTranslation),_=()=>(0,r.dl)(s.P.PageSpeed)||!1,N=()=>(0,r.dl)(s.P.MemoryIntegration)||!1,S=()=>{let e=(0,a.v)(),t=(0,r.dl)("download-zip");return e||t||!1}},24032:function(e,t,n){n.d(t,{qG:function(){return b},Eh:function(){return _},WR:function(){return x}});var r=n(57437),a=n(2265),s=n(59625),i=n(89651),o=n(14438),d=n(52558),l=n(94949);let u=async(e,t)=>{let n=await fetch(e),r=await n.blob();return new File([r],t,{type:r.type})},c=e=>{let{upload:t}=(0,l.F)(),{isAuthenticated:n}=(0,d.Eu)(),r=e(e=>e.setImages);return{uploadImages:(0,a.useCallback)(async e=>{if(!n)return;let a=e.filter(e=>!e.uploaded&&!e.uploading);if(0===a.length)return;r(e=>e.map(e=>a.some(t=>t.id===e.id)?{...e,uploading:!0}:e));let s=a.map(async e=>{let n=await u(e.url,e.name);return await t({fileName:e.id,file:n,continueOnError:!0}),e.id}),i=new Set((await Promise.allSettled(s)).filter(e=>"fulfilled"===e.status).map(e=>e.value)),d=new Set(a.filter(e=>!i.has(e.id)).map(e=>e.id));d.size>0&&o.Am.error("Image upload failed",{description:"Failed to upload ".concat(d.size," file").concat(d.size>1?"s":"",". Removing failed uploads.")}),r(e=>e.filter(e=>!d.has(e.id)).map(e=>a.some(t=>t.id===e.id)?{...e,uploading:!1,uploaded:i.has(e.id)}:e))},[t,r,n])}},f={message:"",images:[],imagesAddedViaDropdown:!1,suggestionLabel:void 0,wasCleared:!1},m=e=>({id:e.id,url:e.url,name:e.name,uploaded:e.uploaded}),p=e=>({id:e.id,url:e.url,name:e.name,uploading:!1,uploaded:e.uploaded}),g=async e=>{try{return(await fetch(e)).ok}catch(e){return!1}},h=(e,t)=>{let n=e(e=>e.setMessage),r=e(e=>e.setSuggestionLabel),s=e(e=>e.setImages),o=e(e=>e.setImagesAddedViaDropdown),{uploadImages:d}=c(e),l=(0,a.useRef)(!1),[u,h]=(0,i.Z)("editor-store-".concat(t),{defaultValue:f,storageSync:!1});(0,a.useEffect)(()=>{h(e=>{if(!e.wasCleared){let{message:t,images:a,imagesAddedViaDropdown:i,suggestionLabel:d}=e;Promise.all(a.map(async e=>e.url.startsWith("blob:")?await g(e.url)?e:null:e)).then(e=>{let a=e.filter(e=>null!==e).map(p);n(t),r(d),s(a),o(i)})}return e})},[t,s,o,n,r,h]);let v=(0,a.useCallback)(e=>{h(t=>{if(l.current)return l.current=!1,t;let n={message:e.message,images:e.images.map(m),imagesAddedViaDropdown:e.imagesAddedViaDropdown,suggestionLabel:e.suggestionLabel,wasCleared:!1};return d(e.images),n})},[h,d]);return(0,a.useEffect)(()=>e.subscribe(v),[e,v]),{clearEditorState:(0,a.useCallback)(()=>{l.current=!0,h(e=>({...e,wasCleared:!0})),e.getState().clearEditorState()},[h,e]),restoreEditorState:(0,a.useCallback)(()=>{h(e=>{if(e.wasCleared){let{message:t,images:a,imagesAddedViaDropdown:i,suggestionLabel:d}=e,l=a.map(p);return n(t),r(d),s(l),o(i),{...e,wasCleared:!1}}return e})},[h,n,r,s,o])}},v={message:"",images:[],imagesAddedViaDropdown:!1,suggestionLabel:void 0},y=()=>(0,s.Ue)(e=>({...v,setMessage:t=>{e({message:t,suggestionLabel:void 0})},setSuggestionLabel:t=>{e({suggestionLabel:t})},setImages:t=>{Array.isArray(t)?0===t.length?e({images:t,imagesAddedViaDropdown:!1}):e({images:t}):e(e=>{let n=t(e.images);return 0===n.length?{images:n,imagesAddedViaDropdown:!1}:{images:n}})},setImagesAddedViaDropdown:t=>{e({imagesAddedViaDropdown:t})},clearEditorState:()=>{e(v)}})),w=(0,a.createContext)(null),b=e=>{let{children:t,localStorageKey:n}=e,s=(0,a.useRef)(y()),{clearEditorState:i,restoreEditorState:o}=h(s.current,n),d=(0,a.useMemo)(()=>({store:s.current,clearEditorState:i,restoreEditorState:o}),[i,o]);return(0,r.jsx)(w.Provider,{value:d,children:t})};function x(){let e=(0,a.useContext)(w);if(!e)throw Error("useEditorStore must be used within an EditorStoreProvider");return e}function _(e){let{store:t}=x();return t(e)}}}]);