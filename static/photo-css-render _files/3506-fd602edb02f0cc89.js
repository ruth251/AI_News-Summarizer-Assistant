try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a9d9d3a6-4544-4ad1-9082-7dc482367642",e._sentryDebugIdIdentifier="sentry-dbid-a9d9d3a6-4544-4ad1-9082-7dc482367642")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3506],{62380:function(e,t,a){"use strict";var s,r,n,l,i=a(94746);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:109,height:113,fill:"none"},e),s||(s=i.createElement("path",{fill:"url(#supabase_logo_svg__a)",d:"M63.708 110.284c-2.86 3.601-8.658 1.628-8.727-2.97l-1.007-67.251h45.22c8.19 0 12.758 9.46 7.665 15.874z"})),r||(r=i.createElement("path",{fill:"url(#supabase_logo_svg__b)",fillOpacity:.2,d:"M63.708 110.284c-2.86 3.601-8.658 1.628-8.727-2.97l-1.007-67.251h45.22c8.19 0 12.758 9.46 7.665 15.874z"})),n||(n=i.createElement("path",{fill:"#3ECF8E",d:"M45.317 2.071c2.86-3.601 8.657-1.628 8.726 2.97l.442 67.251H9.83c-8.19 0-12.759-9.46-7.665-15.875z"})),l||(l=i.createElement("defs",null,i.createElement("linearGradient",{id:"supabase_logo_svg__a",x1:53.974,x2:94.163,y1:54.974,y2:71.829,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#249361"}),i.createElement("stop",{offset:1,stopColor:"#3ECF8E"})),i.createElement("linearGradient",{id:"supabase_logo_svg__b",x1:36.156,x2:54.484,y1:30.578,y2:65.081,gradientUnits:"userSpaceOnUse"},i.createElement("stop",null),i.createElement("stop",{offset:1,stopOpacity:0})))))}},12752:function(e,t,a){"use strict";a.d(t,{Y9:function(){return x},fi:function(){return f}});var s=a(57437),r=a(78298),n=a(2265),l=a(59512),i=a(94508),o=a(1691),d=a.n(o);let c=e=>{let{children:t,className:a,isShimmering:r=!1,...n}=e;return(0,s.jsx)("span",{className:(0,i.cn)(a,r&&d().shimmerText),...n,children:t})};var u=a(57346),m=a(62380),p=a(63858);let h=(e,t,a,s)=>{var r;if(null==t?void 0:null===(r=t.file_path)||void 0===r?void 0:r.startsWith("lovable-memories/")){if("lov-view"===e)return a?"Recalled memory":"Recalling memory";if(["lov-write","lov-search-replace","lov-line-replace"].includes(e))return a?"Updated memory":"Updating memory"}switch(e){case"read_file":case"lov-think":return a?s?"Thought for ".concat(s," second").concat(s>1?"s":""):"Finished thinking":"Thinking";case"lov-view":return a?"Read":"Reading";case"lov-rename":return a?"Renamed":"Renaming";case"lov-delete":return a?"Deleted":"Deleting";case"lov-write":case"lov-search-replace":case"lov-line-replace":return a?"Edited":"Editing";case"lov-add-dependency":return a?"Installed":"Installing";case"lov-remove-dependency":return a?"Uninstalled":"Uninstalling";case"lov-supabase-migration":return a?"Wrote Supabase migration":"Writing Supabase migration";case"lov-search-files":return a?"Searched for":"Searching for";case"lov-list-dir":return a?"Listed":"Listing";case"lov-read-console-logs":case"lov-read-network-requests":return a?"Checked":"Checking";case"scrape_website":case"lov-fetch-website":return a?"Fetched":"Fetching";case"url_screenshot":case"lov-url-screenshot":return a?"Took screenshot of":"Taking screenshot of";case"lov-download-to-repo":return a?"Downloaded file":"Downloading";case"generate_image":return a?"Generated image":"Generating image";case"edit_image":return a?"Edited image":"Editing image";case"web_search":return a?"Searched":"Searching";case"supabase_read_query":case"supabase_analytics_query":case"lov-supabase-read-query":case"lov-supabase-analytics-query":return"Supabase";default:return e}},f=(e,t,a)=>{try{var s;let r=null==t?void 0:null===(s=t.file_path)||void 0===s?void 0:s.startsWith("lovable-memories/");if((["lov-write","lov-search-replace","lov-line-replace"].includes(e)||"lov-view"===e)&&r)return"";switch(e){case"read_file":case"scrape_website":case"url_screenshot":return(null==t?void 0:t.arg0)||"";case"lov-view":case"lov-delete":case"lov-write":case"lov-search-replace":case"lov-line-replace":return(null==t?void 0:t.file_path)||"";case"lov-rename":return(null==t?void 0:t.original_file_path)&&(null==t?void 0:t.new_file_path)?"".concat(t.original_file_path," to ").concat(t.new_file_path):"";case"lov-download-to-repo":return(null==t?void 0:t.target_path)||"";case"generate_image":case"edit_image":return(null==t?void 0:t.prompt)||"";case"web_search":case"lov-search-files":return(null==t?void 0:t.query)||"";case"lov-add-dependency":case"lov-remove-dependency":return(null==t?void 0:t.package)||"";case"lov-list-dir":return(null==t?void 0:t.dir_path)||"";case"lov-read-console-logs":return"console logs";case"lov-read-network-requests":return"network logs";case"lov-fetch-website":case"lov-url-screenshot":return(null==t?void 0:t.url)||"";case"supabase_read_query":case"lov-supabase-read-query":return a?"read from database":"reading from database";case"supabase_analytics_query":case"lov-supabase-analytics-query":return a?"retrieved logs":"retrieving logs";default:return""}}catch(e){return""}},g=(e,t)=>{var a;if("lov-view"===e&&(null==t?void 0:null===(a=t.file_path)||void 0===a?void 0:a.startsWith("lovable-memories/")))return"lightbulb_2";switch(e){case"lov-download-to-repo":return"download";case"web_search":return"search";case"generate_image":case"edit_image":return"draw";case"lov-view":return"scan";case"lov-search-replace":case"lov-line-replace":case"lov-write":return"edit_document";case"lov-rename":return"draft";case"lov-delete":return"scan_delete";case"lov-add-dependency":return"extension";case"lov-remove-dependency":return"extension_off";case"lov-think":case"read_file":return"lightbulb_2";case"lov-search-files":case"lov-list-dir":return"document_search";case"lov-read-console-logs":case"lov-read-network-requests":return"monitor_heart";case"scrape_website":case"lov-fetch-website":return"tv";case"url_screenshot":case"lov-url-screenshot":return"screenshot_monitor";case"supabase_read_query":return"table";case"supabase_analytics_query":return"history";default:return"code"}},v=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",r="dark"===a?p.A:p.g;switch(e){case"lov-experimental-supabase-read-query":case"lov-experimental-supabase-insert":case"lov-experimental-supabase-migration":case"lov-experimental-supabase-analytics-query":if(!t.query)return null;return(0,s.jsx)(l.Z,{language:"sql",customStyle:{fontSize:"12px"},style:r,children:t.query});default:return null}},x=n.memo(e=>{let{name:t,parsedData:a,done:l=!0,isShimmering:o=!1,duration:d,collapsed:p=!0,onHeightChange:x}=e,b=h(t,a,l,d),y=f(t,a,l),j=g(t,a),{resolvedTheme:E}=(0,r.F)(),w=v(t,a,E),[N,_]=(0,n.useState)(!0),C=(0,n.useRef)(null),k=(0,n.useRef)(null),[S,T]=(0,n.useState)(0);(0,n.useEffect)(()=>{p&&_(!0)},[p]);let A=!p&&!!w;return(0,n.useEffect)(()=>{if(k.current){let e=new ResizeObserver(()=>{k.current&&(T(k.current.scrollHeight),null==x||x())});return e.observe(k.current),T(k.current.scrollHeight),()=>e.disconnect()}},[x]),(0,s.jsxs)("div",{ref:C,className:"flex flex-col text-muted-foreground",children:[(0,s.jsxs)("div",{className:(0,i.cn)("flex h-6 items-center gap-1.5 whitespace-nowrap text-base font-medium md:text-sm",A&&"cursor-pointer"),onClick:()=>A&&_(!N),children:[A&&(0,s.jsx)(u.Z,{name:"chevron_right",size:"small",className:(0,i.cn)("rotate-90 transition-transform duration-200",N&&"rotate-0")}),(0,s.jsx)("div",{className:"mb-px mr-1 flex shrink-0 items-center",children:t.includes("supabase")?(0,s.jsx)(m.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"}):(0,s.jsx)(u.Z,{name:j,size:"small",className:"text-muted-foreground"})}),(0,s.jsx)(c,{className:"flex-shrink-0 font-normal",isShimmering:o,children:b}),y&&(0,s.jsx)("span",{className:"relative w-fit max-w-xs truncate rounded-md bg-secondary px-2 py-0 text-start text-xs font-normal text-muted-foreground","aria-label":y,title:y,children:(0,s.jsx)(c,{isShimmering:o,style:{animationDelay:"1.95s",animationTimingFunction:"ease-out"},className:"truncate",children:y})})]}),(0,s.jsx)("div",{ref:k,className:"overflow-hidden",style:{height:N?0:S,opacity:N?0:1},children:w})]})});x.displayName="ToolUseCard"},50618:function(e,t,a){"use strict";var s=a(57437),r=a(62869),n=a(57346),l=a(81103),i=a(94508);t.Z=e=>{let{onClick:t,isBookmarked:a,className:o}=e;return(0,s.jsxs)(l.u,{children:[(0,s.jsx)(l.aJ,{asChild:!0,children:(0,s.jsx)(r.z,{variant:"ghost",size:"icon",className:(0,i.cn)("group/bookmark h-auto w-auto shrink-0 hover:bg-transparent",o),onClick:t,children:(0,s.jsx)(n.Z,{name:a?"bookmark_fill":"bookmark",size:"small",className:(0,i.cn)("text-muted-foreground transition-colors duration-150 ease-in-out group-hover/bookmark:opacity-75",a?"text-affirmative-primary":"")})})}),(0,s.jsx)(l._v,{children:a?"Remove bookmark from history":"Bookmark in history"})]})}},43681:function(e,t,a){"use strict";a.d(t,{z5:function(){return as},YZ:function(){return ar},mu:function(){return an}});var s=a(57437),r=a(2265),n=a(21288),l=a(94508),i=a(74746),o=a(82176),d=a(10531),c=a(72116),u=a(1188),m=a(62869),p=a(57346),h=a(27132),f=a(52089),g=a(65666),v=a(61062),x=a(50126),b=a(90045),y=a(37675),j=a(40878),E=a(91576);let w=e=>{let{actionProps:t}=e,{setActiveMessageId:a,setActiveEditId:n,setConsoleCodeContent:o,setConsoleErrorContent:d,setShowConsole:c,exitConsole:u}=(0,x.pE)(),f=(0,i.aK)(e=>t.messageId?e.messages[t.messageId]:null),g=(0,i.tV)(t.editId),v=(0,x.Sl)(e=>e.consoleContentType),y=(0,x.Sl)(e=>e.activeMessageId),{setCodeViewType:E}=(0,b.VK)(),w=y===t.messageId&&"code"===v,N=(0,r.useMemo)(()=>{var e;return(null==f?void 0:f.type)==="aiMessage"&&(null===(e=f.errors)||void 0===e?void 0:e.filter(e=>!e.dont_show))||[]},[f]),_=(0,h.Z)("md"),{setView:C}=(0,j.zp)(),k=(0,r.useCallback)(()=>{var e;let s=!!(null==g?void 0:null===(e=g.diff)||void 0===e?void 0:e.length);w?u():(_&&C(j.$.PREVIEW),o(t.code),c("code"),d(N),a(t.messageId),n(null==g?void 0:g.id),E(s?b.es.DIFF:b.es.RAW))},[w,u,a,o,d,c,E,n,g,t.messageId,t.code,f]);return(0,s.jsxs)(m.z,{size:"sm",className:(0,l.cn)("h-6 gap-1 px-1.5 py-0.5 text-sm font-normal transition-all duration-150 ease-in-out hover:bg-muted-hover md:h-5 md:text-xs",w&&"bg-affirmative ring-1 ring-affirmative-primary hover:bg-accent/80"),variant:"ghost",onClick:k,children:[(0,s.jsx)(p.Z,{name:"code",size:"small"}),(0,s.jsx)("span",{children:"Code"})]})};var N=a(81103),_=a(49284),C=a(99376),k=a(46214),S=a(26237),T=a(2925),A=a(79396),I=a(68640),L=a(77113);let R=e=>{let{editId:t,commitSha:a}=e,n=(0,A.I)(),l=(0,L.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.latest_commit_sha}),o=(0,T.u)(e=>e.setCurrentPage),d=(0,T.u)(e=>e.currentPage),{project_id:c}=(0,C.useParams)(),u=(0,i.tV)(t),m=(0,S.C)(),p=(0,I.Y)({editId:null==u?void 0:u.id,commitSha:null==u?void 0:u.commit_sha}),{isDisabled:h,disabledReason:f}=(0,r.useMemo)(()=>p?{isDisabled:!0,disabledReason:"Cannot restore to an active edit"}:a?n.isPending?{isDisabled:!0,disabledReason:"Restore is in progress"}:m?{isDisabled:!0,disabledReason:(0,s.jsx)("p",{className:"max-w-sm",children:"Cannot revert while there is an active operation in progress (e.g. chat or revert). Please wait for the operation to complete."})}:{isDisabled:m||n.isPending||!a||p,disabledReason:"Disabled"}:{isDisabled:!0,disabledReason:"Not a valid restore target"},[m,n.isPending,a,p]),g=a===l,v=(0,r.useCallback)(e=>{let{eventName:s}=e;t&&(u&&u.pages&&u.pages.length>0&&!u.pages.find(e=>e.name===d)&&o("index"),k.ZP.capture(s,{edit_id:t,commit_sha:a,disabled:h,disabled_reason:f,is_latest_commit:g,is_active_edit:p,project_id:c}),n.mutateAsync({edit:{id:t}}))},[a,d,f,u,t,h,p,c,n,o]);return{onRevert:t?v:void 0,isLatestCommit:g,isDisabled:h,isPending:n.isPending,disabledReason:f}},D=e=>{let{actionProps:t}=e,{onRevert:a,isDisabled:r,isPending:n,disabledReason:i}=R({editId:t.editId,commitSha:t.commitSha}),o=(0,s.jsxs)(m.z,{size:"sm",className:(0,l.cn)("h-6 gap-1 px-1.5 py-0.5 text-sm font-normal transition-colors duration-150 ease-in-out hover:bg-muted-hover md:h-5 md:text-xs"),variant:"ghost",onClick:()=>{a&&a({eventName:_.SL.CODE_CARD.RESTORE_CLICKED})},disabled:r||n,children:[(0,s.jsx)(p.Z,{name:"restart_alt",size:"small",className:n?"animate-spin-reverse":""}),(0,s.jsx)("span",{children:"Restore"})]});return r&&i?(0,s.jsxs)(N.u,{children:[(0,s.jsx)(N.aJ,{asChild:!0,children:(0,s.jsx)("span",{className:"flex items-center rounded",tabIndex:0,children:o})}),(0,s.jsx)(N._v,{children:(0,s.jsx)("p",{children:i})})]}):o},P=(0,r.memo)(e=>{let{children:t,...a}=e;return(0,s.jsx)(m.z,{size:"sm",variant:"ghost",className:"h-5 gap-1 px-1.5 py-0.5 text-xs font-normal transition-colors duration-150 ease-in-out hover:bg-muted-hover",...a,children:t})});P.displayName="CodeCardActionButton";let M=(0,r.memo)(e=>{let{children:t,className:a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("absolute -right-2 bottom-0",a),children:(0,s.jsx)("div",{className:"flex translate-y-1/2 items-center gap-1 rounded-lg border border-muted-border bg-muted p-0.5",children:t})})});M.displayName="BaseCodeCardActions";let O=(0,r.memo)(e=>(0,s.jsxs)(M,{children:[(0,s.jsx)(D,{actionProps:e}),(0,s.jsx)(w,{actionProps:e})]}));O.displayName="CodeCardActions";let z=e=>"parts"in e&&"done"in e,U={[v.N.CODE_DIFF]:"I couldn't apply your changes because the edit strategy I chose failed.",[v.N.FILE_EDITED_WITHOUT_PERMISSION]:"I couldn't apply your changes because I tried to edit a file that I don't have permission to edit.",[v.N.EXCLUDED_FILE_EDITED]:"I couldn't apply your changes because it resulted in unwanted changes",[v.N.NO_CODE_CHANGE]:"I couldn't apply your changes because the code changes I suggested were the same as the previous code."},F=e=>{var t,a;let{errors:n,messageParts:i,edit:o,projectId:d}=e,{setActiveMessageId:c,setActiveEditId:g,exitConsole:v,setShowConsole:w,setConsoleErrorContent:N,setConsoleCodeContent:_}=(0,x.pE)(),{setCodeViewType:C}=(0,b.VK)(),k=(0,x.Sl)(e=>e.activeMessageId),S=(0,x.Sl)(e=>e.consoleContentType),T=(0,h.Z)("md"),{setView:A}=(0,j.zp)(),I=(0,f.qV)({projectId:d,errorIds:(null==n?void 0:n.map(e=>e.id))||[],setErrors:e=>{}}),L=null==n?void 0:null===(t=n[0])||void 0===t?void 0:t.type,R=(0,r.useMemo)(()=>{let e=U[L];return e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:e}),(0,s.jsx)("p",{children:"Please rephrase your request or provide more details."})]}):null},[L]),{onClick:D,isPending:O}=(0,E.hw)({projectId:d,errors:n}),F=n[0].message_id||void 0,K="error"===S&&F===k,Z=(0,r.useCallback)(()=>{if(K)v();else{var e;let t=null==i?void 0:i.parts.find(z),a=!!(null==o?void 0:null===(e=o.diff)||void 0===e?void 0:e.length);c(F),g(null==o?void 0:o.id),N(n),w("error"),_(t),C(a?b.es.DIFF:b.es.RAW),T&&A(j.$.PREVIEW)}},[K,null==o?void 0:null===(a=o.diff)||void 0===a?void 0:a.length,null==o?void 0:o.id,n,v,T,F,null==i?void 0:i.parts,g,c,C,_,N,w,A]),W=(0,y.bk)(e=>e.isSendChatMessageMutationPending),H=O||W||0===n.length;return n&&I?(0,s.jsxs)("div",{className:"mt-4 flex flex-col gap-4 pb-4",children:[(0,s.jsxs)(u.E.div,{className:"relative flex w-5/6 max-w-xs pr-9",initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeOut",duration:.5},children:[(0,s.jsx)(M,{className:"pr-9",children:(0,s.jsxs)(P,{onClick:D,loading:O,disabled:H,children:[!O&&(0,s.jsx)(p.Z,{name:"bolt",size:"small"}),(0,s.jsx)("span",{children:"Try to fix"})]})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)(m.z,{onClick:Z,variant:"outline",className:(0,l.cn)("flex h-auto w-full items-start gap-2 rounded-xl p-3 text-base font-medium shadow-none md:text-sm","border border-warning-primary bg-warning text-warning-foreground","transition-colors duration-150 ease-in-out","hover:border-warning-primary/80 hover:bg-warning/80",{"border-affirmative-primary/50 bg-affirmative text-affirmative-foreground hover:border-affirmative-primary/40 hover:bg-accent/90":K}),children:[(0,s.jsx)("div",{className:"flex h-5 items-center",children:(0,s.jsx)(p.Z,{name:"warning",size:"small"})}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-0 overflow-hidden text-left",children:[(0,s.jsx)("span",{className:"truncate font-medium",children:"Error"}),(0,s.jsx)("span",{className:(0,l.cn)("truncate text-base font-normal md:text-sm"),children:E.v7[n[0].type]})]}),(0,s.jsx)(p.Z,{name:"chevron_right"})]})})]}),R]}):null},K=e=>{let{errors:t,messageParts:a,edit:r}=e,n=(0,g.D)(),l=null==t?void 0:t.filter(e=>!e.dont_show);return l&&0!==l.length?(0,s.jsx)(F,{edit:r,errors:l,messageParts:a,projectId:n}):null};var Z=a(78298),W=a(40236),H=a(59512),V=a(62809),G=a(63858),X=a(55214),B=a.n(X);let q=(0,r.memo)(e=>{let{children:t,className:a,components:r}=e;return(0,s.jsx)("div",{className:a,children:(0,s.jsx)(W.UG,{components:r,children:t})})});q.displayName="MemoizedReactMarkdown";let Y=e=>{let{match:t,codeContent:a,prismTheme:n}=e,[l,i]=(0,r.useState)(!1),o=async()=>{await navigator.clipboard.writeText(String(a)),i(!0),setTimeout(()=>i(!1),2e3)};return(0,s.jsxs)("div",{className:"relative my-2 rounded-md bg-muted",children:[(0,s.jsx)("button",{className:"absolute right-2 top-2 rounded-md bg-secondary p-1 transition-colors hover:bg-muted-hover",onClick:o,children:(0,s.jsx)(p.Z,{name:l?"check":"content_copy",className:"h-4 w-4 text-primary transition-all duration-300"})}),(0,s.jsx)("div",{className:"max-w-full overflow-x-auto font-mono",children:(0,s.jsx)(H.Z,{children:String(a).replace(/\n$/,""),style:n,language:t[1],wrapLongLines:!0,PreTag:"div",customStyle:{padding:"1em",margin:0}})})]})},J=(0,r.memo)(e=>{let{children:t,displayCursor:a,persisted:n}=e,i=!(0,r.useRef)(n).current,o=(0,V.C)(t),{resolvedTheme:d}=(0,Z.F)(),c=(0,r.useMemo)(()=>"dark"===d?G.A:G.g,[d]),m=(0,r.useMemo)(()=>({code(e){let{node:t,className:a,children:r}=e,n=/language-(\w+)/.exec(a||"");return n?(0,s.jsx)(Y,{match:n,codeContent:r,prismTheme:c}):(0,s.jsx)("span",{className:"rounded px-1.5 py-0.5 font-mono text-sm",children:r})}}),[c]);return(0,s.jsxs)(u.E.div,{initial:{opacity:i?0:1},animate:{opacity:1},transition:{duration:1,ease:"easeOut"},className:"relative max-w-full",children:[i?(0,s.jsx)(q,{className:(0,l.cn)("prose prose-zinc prose-markdown-mobile absolute inset-x-0 top-0 max-w-full dark:prose-invert md:prose-markdown prose-h1:mb-2 prose-h1:text-xl prose-h1:font-medium prose-h2:text-lg prose-h2:font-medium prose-h3:text-base prose-h3:font-medium prose-pre:my-2 prose-pre:whitespace-pre-wrap prose-pre:break-words prose-pre:bg-background prose-ol:my-2 prose-ul:my-2 prose-li:my-0",B().customProse,a&&B().cursor),components:m,children:o}):null,(0,s.jsx)(q,{className:(0,l.cn)("prose prose-zinc prose-markdown-mobile max-w-full dark:prose-invert md:prose-markdown prose-h1:mb-2 prose-h1:text-xl prose-h1:font-medium prose-h2:text-lg prose-h2:font-medium prose-h3:text-base prose-h3:font-medium prose-pre:my-2 prose-pre:whitespace-pre-wrap prose-pre:break-words prose-pre:bg-background prose-ol:my-2 prose-ul:my-2 prose-li:my-0",B().customProse,a&&B().cursor,i&&"pointer-events-none opacity-0"),components:m,children:t})]})});J.displayName="PromptBox";var Q=a(33145),$=a(27648),ee=a(49360),et=a(26438),ea=a(91846),es=a.n(ea),er=a(60256),en=a(72380);let el=e=>!e||!e.visual_edits_dismissed_at&&!e.visual_edits_temporarily_closed,ei=e=>{let{url:t}=e,[a,n]=(0,r.useState)(!0),l=(0,o.dl)(d.P.BetaTesters),{snapshot:{getUserMessageCount:c}}=(0,i.mx)(),{userData:u}=(0,er.SE)(),m=(0,en.v)(),h=1>=c(),f=(0,r.useMemo)(()=>el(null==u?void 0:u.tips),[null==u?void 0:u.tips]);return h&&a&&l&&f?(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between pb-4",children:[(0,s.jsxs)("span",{className:"flex items-center gap-2 text-base font-medium text-popover-foreground",children:[(0,s.jsx)(p.Z,{name:"my_location"}),(0,s.jsx)("h1",{className:"text-base font-medium",children:"Visual Edits"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{className:"text-base text-muted-foreground hover:underline",onClick:()=>{k.ZP.capture(_.SL.VIDEO_PLAYER.DONT_SHOW_AGAIN_CLICKED),m.mutate({visual_edits_dismissed_at:new Date().toISOString()}),n(!1)},children:"Don't show again"}),(0,s.jsx)("button",{className:"text-muted-foreground",onClick:()=>{k.ZP.capture(_.SL.VIDEO_PLAYER.CLOSE_CLICKED),m.mutate({visual_edits_temporarily_closed:new Date().toISOString()}),n(!1)},children:(0,s.jsx)(p.Z,{name:"close"})})]})]}),(0,s.jsx)("div",{className:"overflow-hidden rounded-lg",children:(0,s.jsx)(es(),{url:t,controls:!0,width:"100%",height:"100%",playbackRate:2.5,onPlay:()=>{k.ZP.capture(_.SL.VIDEO_PLAYER.PLAY_STARTED)}})})]})}):null};var eo=a(14438),ed=a(26110),ec=a(76818),eu=()=>{let[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(""),l=(0,L.iZ)(e=>e.project),{updateProject:i}=(0,L.d2)();(0,r.useEffect)(()=>{(null==l?void 0:l.custom_instructions)&&n(l.custom_instructions)},[l]);let o=async()=>{try{i({custom_instructions:a},{onSuccess:()=>{k.ZP.capture(_.SL.KNOWLEDGE.SAVED),eo.Am.success("Custom instructions updated",{description:"Your custom instructions have been saved successfully."})}}),t(!1)}catch(e){eo.Am.error("Error",{description:"Failed to update custom instructions. Please try again."})}};return(0,s.jsxs)(ed.Vq,{open:e,onOpenChange:t,children:[(0,s.jsx)(ed.hg,{asChild:!0,children:(0,s.jsxs)(m.z,{className:"gap-2 whitespace-nowrap",variant:"outline",size:"sm",onClick:()=>t(!0),children:[(0,s.jsx)(p.Z,{name:"school",className:"text-muted-foreground"}),"Manage knowledge"]})}),(0,s.jsxs)(ed.cZ,{size:"lg",children:[(0,s.jsx)(ed.fK,{children:(0,s.jsx)(ed.$N,{children:"Manage Knowledge"})}),(0,s.jsxs)(ed.Be,{children:["Add custom context and instructions for your project. Lovable will use it in every edit. Use it to:",(0,s.jsxs)("ul",{className:"mt-2 list-disc pl-5",children:[(0,s.jsx)("li",{children:"Define project-specific rules or guidelines"}),(0,s.jsx)("li",{children:"Set coding style preferences (e.g., indentation, naming conventions)"}),(0,s.jsx)("li",{children:"Include external documentation or style guides"})]})]}),(0,s.jsx)(ec.g,{value:a,onChange:e=>n(e.target.value),placeholder:"Enter your custom instructions and context here...",className:"resize-none",rows:16}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(m.z,{onClick:o,children:"Save"})})]})]})},em=a(78079),ep=a(13590),eh=a(49027),ef=a(21770),eg=a(29501),ev=a(91115),ex=a(15681),eb=a(95186),ey=a(64040),ej=a(49131),eE=a(10867);let ew=e=>{let t=e.reduce((e,t)=>(e[t.key]=ev.Z_().min(1,{message:"".concat(t.name," is required")}),e),{});return ev.Ry(t)},eN=e=>e.toLowerCase().split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ").replace(/api/i,"API"),e_=(0,r.memo)(e=>{let{secretFormActions:t,isMostRecentMessage:a}=e,[n,l]=(0,r.useState)(!1),i=(0,g.D)(),{mutate:o}=(0,em.m)({projectId:i}),d=(0,r.useMemo)(()=>t.map(e=>({key:e.name,name:eN(e.name)})),[t]),c=(0,r.useMemo)(()=>ew(d),[d]),u=(0,eg.cI)({resolver:(0,ep.F)(c),defaultValues:t.reduce((e,t)=>(e[t.name]="",e),{})});(0,r.useEffect)(()=>{n&&u.reset()},[n,u]);let h=(0,ef.D)({mutationFn:async e=>{let t={secrets:Object.entries(e).map(e=>{let[t,a]=e;return{name:t,value:a}})},a=(0,ej.SJ)();await a.post("/projects/".concat(i,"/supabase/secrets"),t)},onSuccess:()=>{eo.Am.success("API Keys added successfully"),l(!1),o({body:{id:(0,eE.Fd)(),message:"I have now added the API keys you asked for."}})},onError:e=>{(0,ey.Eo)(e)}}),f=(0,r.useCallback)(async e=>{await h.mutateAsync(e)},[h]);return(0,s.jsxs)(ed.Vq,{open:n,onOpenChange:l,children:[(0,s.jsx)(ed.hg,{children:(0,s.jsxs)(m.z,{disabled:!a,variant:"outline",size:"sm",className:"flex items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",children:[(0,s.jsx)(p.Z,{name:"key",size:"small"}),"Add API Key",1===t.length?"":"s"]})}),(0,s.jsxs)(ed.cZ,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(ed.fK,{children:[(0,s.jsx)(ed.$N,{asChild:!0,children:(0,s.jsxs)("h1",{className:"text-2xl font-medium",children:["Add API Key",1===t.length?"":"s"]})}),(0,s.jsxs)(eh.Be,{className:"text-muted-foreground",children:["Enter your API Key",1===t.length?"":"s"," to continue. Manage this later from the Supabase menu."," ",(0,s.jsx)($.default,{href:"https://docs.lovable.dev/integrations/supabase#storing-secrets-with-supabase",className:"text-primary underline hover:no-underline",target:"_blank",children:"Learn more"})]})]}),(0,s.jsx)(ex.l0,{...u,children:(0,s.jsxs)("form",{onSubmit:u.handleSubmit(f),className:"space-y-4",children:[d.map(e=>(0,s.jsx)(ex.Wi,{control:u.control,name:e.key,render:t=>{let{field:a}=t;return(0,s.jsxs)(ex.xJ,{children:[(0,s.jsx)(ex.lX,{children:e.name}),(0,s.jsx)(ex.NI,{children:(0,s.jsx)(eb.I,{placeholder:"Enter API Key",type:"password",autoComplete:"off",autoSave:"off",...a})}),(0,s.jsx)(ex.zG,{})]})}},e.key)),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(eh.GG,{asChild:!0,children:(0,s.jsx)(m.z,{type:"button",disabled:h.isPending,variant:"outline",children:"Cancel"})}),(0,s.jsx)(m.z,{loading:h.isPending,type:"submit",children:"Submit"})]})]})})]})]})});e_.displayName="AddApiKeysButton";let eC=(0,r.memo)(e=>{let{isMostRecentMessage:t,messageId:a}=e,r=(0,g.D)();return(0,s.jsxs)(N.u,{children:[(0,s.jsx)(N.aJ,{asChild:!0,children:(0,s.jsxs)(m.z,{disabled:!t,variant:"outline",size:"sm",className:"flex items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",title:"Get help",onClick:e=>{window.open("https://lovablework.com/","_blank"),k.ZP.capture("contractor_help:button_clicked",{projectId:r,messageId:a})},children:[(0,s.jsx)(p.Z,{name:"support_agent",size:"small"}),"Hire expert"]})}),(0,s.jsx)(N._v,{className:"hidden md:flex",children:(0,s.jsx)("p",{children:"Get help from a human on our contracting platform"})})]})});eC.displayName="FileUserFeedbackButton";let ek=e=>{let t=document.createElement("div");return t.innerHTML=e,(t.textContent||t.innerText||"").replace(/\n\s*\n/g,"\n\n").trim()};function eS(e){let{open:t,onOpenChange:a,onFeedbackSubmit:n,messageId:l,projectId:i,onCancel:o,initialContent:d}=e,[c,u]=(0,r.useState)(""),[p,h]=(0,r.useState)([]);(0,r.useEffect)(()=>{t&&u(d||"")},[t,d]);let f=e=>{h(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,s.jsx)(ed.Vq,{open:t,onOpenChange:e=>{!e&&(c.length>0||p.length>0)&&k.ZP.capture("message_feedback:dialog_cancelled",{messageId:l,projectId:i,action:"close",hadContent:c.length>0,hadCategories:p.length>0}),e||(u(""),h([]),null==o||o()),a(e)},children:(0,s.jsx)(ed.cZ,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-foreground",children:"Help us improve"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please tell us why this response wasn't helpful to you."}),(0,s.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-2",children:["Design is off","Unrelated changes made","Functionality is broken","Other"].map(e=>(0,s.jsx)(m.z,{variant:p.includes(e)?"default":"outline",className:"w-full justify-start pl-4 ".concat(p.includes(e)?"border border-primary":""),size:"lg",onClick:()=>f(e),children:e},e))})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm text-muted-foreground",children:"Additional Feedback"}),(0,s.jsx)(ec.g,{placeholder:"This was not helpful because ...",value:c,className:"min-h-24 resize-none",onChange:e=>u(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(m.z,{onClick:()=>{k.ZP.capture("message_feedback:dialog_cancelled",{messageId:l,projectId:i,action:"cancel",hadContent:c.length>0,hadCategories:p.length>0}),u(""),h([]),a(!1),null==o||o()},size:"sm",variant:"secondary",children:"Cancel"}),(0,s.jsx)(m.z,{onClick:()=>{n({content:c,categories:p}),u(""),h([]),a(!1)},size:"sm",variant:"default",children:"Submit"})]})]})})})}let eT=(0,r.memo)(e=>{let{message:t}=e,a=(0,L.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.id}),n=(0,ej.SJ)(),[l,i]=(0,r.useState)(t.feedbackSentiment||null),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{i(t.feedbackSentiment||null)},[t.feedbackSentiment]);let m=(0,ef.D)({mutationFn:async e=>{let{sentiment:s,content:r,categories:l}=e;if(!a)throw Error("Project ID is required");let i={sentiment:s};r&&(i.content=r),l&&l.length>0&&(i.category=l.join(", ")),await n.post("/projects/".concat(a,"/messages/").concat(t.id,"/feedback"),i)},onSuccess:()=>{eo.Am.success("Thanks for your feedback!")},onError:e=>{eo.Am.error("Failed to save feedback",{description:(null==e?void 0:e.message)||"Please try again"})}}),f=async()=>{try{let e=ek(t.content);await navigator.clipboard.writeText(e),u(!0),setTimeout(()=>u(!1),2e3),k.ZP.capture("message_copy",{messageId:t.id,projectId:a})}catch(e){(0,ey.Eo)(e)}},g=(0,h.Z)("md");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-1.5 flex flex-shrink-0 items-center gap-3 pr-1",children:[(0,s.jsx)("button",{onClick:()=>{let e="positive"===l?null:"positive";i(e),e&&m.mutate({sentiment:e})},className:"flex items-center gap-1 transition-colors focus:outline-none ".concat("positive"===l?"text-white-600 hover:text-white-700":"text-muted-foreground hover:text-foreground"),title:"Helpful",children:(0,s.jsx)(p.Z,{size:g?"default":"small",name:"positive"===l?"thumb_up-fill":"thumb_up"})}),(0,s.jsx)("button",{onClick:()=>{"negative"===l?k.ZP.capture("message_feedback:dialog_opened_for_edit",{messageId:t.id,projectId:a,hadPreviousContent:!!t.feedbackContent}):i("negative"),d(!0)},className:"flex items-center gap-1 transition-colors focus:outline-none ".concat("negative"===l?"text-white-600 hover:text-white-700":"text-muted-foreground hover:text-foreground"),title:"Not helpful",children:(0,s.jsx)(p.Z,{size:g?"default":"small",name:"negative"===l?"thumb_down-fill":"thumb_down"})}),(0,s.jsx)("button",{onClick:f,className:"flex items-center gap-1 text-muted-foreground transition-colors hover:text-foreground focus:outline-none",title:c?"Copied!":"Copy message",children:(0,s.jsx)(p.Z,{size:g?"default":"small",name:c?"check":"content_copy"})})]}),(0,s.jsx)(eS,{open:o,onOpenChange:d,onFeedbackSubmit:e=>{m.mutate({sentiment:"negative",content:e.content,categories:e.categories})},messageId:t.id,projectId:a,onCancel:()=>{t.feedbackContent||i(null)},initialContent:t.feedbackContent})]})});eT.displayName="MessageFeedbackButtons";var eA=a(72384);let eI=e=>{let{messageId:t,runState:a,toolUseId:r}=e,n=(0,g.D)(),{mutateAsync:l,isPending:i}=(0,em.m)({projectId:n}),o=async()=>{await l({body:{message:"I have reviewed the SQL and it looks good. Please run it.",id:(0,eE.Fd)(),mode:eA.S.INSTANT,run_sql_in_message_with_id:t,prev_session_id:r?t:void 0},projectId:n})};return(0,s.jsx)("div",{children:(0,s.jsx)(m.z,{variant:"default",size:"sm",className:"gap-2 py-2",onClick:o,disabled:void 0!==a&&"not_started"!==a||i,children:"not_started"===a||void 0===a?"Apply changes":"running"===a?"Applying changes...":"failed"===a?"Failed to apply changes":"SQL already executed"})})},eL=e=>e.startsWith("https://supabase.com/dashboard/project/")||e.includes("?settings=supabase")?(0,s.jsx)(Q.default,{width:16,height:16,src:"/icons/supabase_logo.svg",alt:"Supabase"}):(0,s.jsx)(p.Z,{name:"arrow_outward"});function eR(e){let{linkActions:t}=e;return t&&0!==t.length?(0,s.jsx)(s.Fragment,{children:null==t?void 0:t.map(e=>{let t=e.url.startsWith("/projects/");return(0,s.jsx)(m.z,{asChild:!0,variant:"outline",size:"sm",className:"flex items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,s.jsxs)($.default,{href:e.url,target:t?void 0:"_blank",rel:"noopener noreferrer",children:[eL(e.url),(0,s.jsx)("span",{className:"truncate",children:e.text})]})},e.url)})}):null}function eD(e){let{messagePromptActions:t}=e,a=(0,L.iZ)(e=>e.projectId),r=(0,b.hT)(e=>e.chatMode),{setChatMode:n}=(0,b.VK)(),{isAgentModeDefault:l}=(0,et.v)(),{mutate:i,isPending:o}=(0,em.O)({projectId:a});return t&&0!==t.length?(0,s.jsx)(s.Fragment,{children:null==t?void 0:t.map(e=>(0,s.jsx)(m.z,{asChild:!0,variant:"outline",size:"sm",disabled:o,onClick:()=>{r===b.jE.CHAT_ONLY&&n(l?b.jE.AGENT:b.jE.DEFAULT),i({body:{id:(0,ee.Z)(),message:e.message}})},className:"flex cursor-pointer items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(p.Z,{name:"chat_bubble",size:"small"}),(0,s.jsx)("span",{className:"truncate",children:e.text})]})},e.message))}):null}let eP=e=>{var t,a;let{message:n,messageId:l,lovActions:o,sqlRunState:d,persisted:c}=e,{isMostRecentMessage:m}=(0,i.mx)(),{migrateActions:p,linkActions:h,knowledgeAction:f,messagePromptActions:g,secretFormActions:v,user_feedbackFormActions:x}=(0,r.useMemo)(()=>{let e=null==o?void 0:o.filter(e=>"lov_action__migrate"===e.type&&e.done),t=null==o?void 0:o.filter(e=>"lov_action__link"===e.type),a=null==o?void 0:o.filter(e=>"lov_action__message_prompt"===e.type),s=null==o?void 0:o.filter(e=>"lov_action__secret_form"===e.type);return{migrateActions:e,linkActions:t,knowledgeAction:null==o?void 0:o.find(e=>"lov_action__knowledge"===e.type),messagePromptActions:a,secretFormActions:s,user_feedbackFormActions:null==o?void 0:o.filter(e=>"lov_action__user_feedback_form"===e.type)}},[o]);return(0,s.jsxs)(u.E.div,{className:"flex max-w-full flex-1 flex-col gap-4 overflow-hidden",initial:{opacity:c?1:0},animate:{opacity:1},transition:{ease:"easeOut",duration:1},children:[c&&(0,s.jsx)(ei,{url:"https://customer-8etxbtq55jiz5gtf.cloudflarestream.com/0989fc00edc27647d46bd169d87b7200/manifest/video.m3u8"}),(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex min-w-0 flex-1 flex-wrap items-center gap-2",children:[(null!==(a=null==p?void 0:p.length)&&void 0!==a?a:0)>0&&(0,s.jsx)(eI,{messageId:l,runState:d,toolUseId:null==p?void 0:null===(t=p[0])||void 0===t?void 0:t.toolUseId},"migrate"),(0,s.jsx)(eR,{linkActions:h}),(0,s.jsx)(eD,{messagePromptActions:g}),v&&v.length>0&&(0,s.jsx)(e_,{secretFormActions:v,isMostRecentMessage:m(l)}),x&&x.length>0&&(0,s.jsx)(eC,{isMostRecentMessage:m(l),messageId:l}),f&&(0,s.jsx)(eu,{})]}),c&&(0,s.jsx)(eT,{message:n})]})]})};var eM=a(48614),eO=a(39484);let ez=e=>{let t=(0,x.Sl)(e=>e.consoleContentType),a=(0,x.Sl)(e=>e.activeView),s=(0,x.Sl)(e=>e.activeEditId),r=(0,i.aK)(e=>e.edits),n=s?r[s]:null,l=(0,I.Y)({editId:null==e?void 0:e.id,commitSha:null==e?void 0:e.commit_sha}),o=null==n?void 0:n.revert_target_edit_id,d=(null==n?void 0:n.id)===(null==e?void 0:e.id)||!!o&&o===(null==e?void 0:e.id);return{isActive:d&&"snapshot-preview"===t,isActiveCode:d&&"code"===t,shouldShowCurrentEditHighlight:l&&"error"!==t&&"snapshot-preview"!==t&&"code"!==t&&!!e&&"dev-mode"!==a}};var eU=a(76906);let eF=e=>{var t;let{edit:a,messageId:s,code:n}=e,l=(0,L.iZ)(e=>e.project),{setActiveMessageId:i,setActiveEditId:o,setShowConsole:d,exitConsole:c,setConsolePreviewContent:u,setConsoleCodeContent:m,setConsoleErrorContent:p}=(0,x.pE)(),{setCodeViewType:h}=(0,b.VK)(),f=(0,I.Y)({editId:null==a?void 0:a.id,commitSha:null==a?void 0:a.commit_sha}),{isActive:g,isActiveCode:v}=ez(a),y=(0,r.useMemo)(()=>{if((null==a?void 0:a.commit_sha)&&l)return(0,eU.t)({projectId:null==l?void 0:l.id,sha:null==a?void 0:a.commit_sha})},[null==a?void 0:a.commit_sha,l]);return{handleOpenPreview:(0,r.useCallback)(e=>{var t;if(e.altKey){window.open(y,"_blank");return}if(g||f){c();return}d("snapshot-preview"),i(s),u(y),o(null!==(t=null==a?void 0:a.id)&&void 0!==t?t:void 0)},[g,f,c,i,d,o,a,s,y,u]),handleOpenCode:(0,r.useCallback)(()=>{var e;let t=!!(null==a?void 0:null===(e=a.diff)||void 0===e?void 0:e.length);v?c():(m(n),d("code"),p(void 0),i(s),o(null==a?void 0:a.id),h(t?b.es.DIFF:b.es.RAW))},[null==a?void 0:null===(t=a.diff)||void 0===t?void 0:t.length,null==a?void 0:a.id,v,m,n,d,p,i,s,o,h,c])}};var eK=a(36461),eZ=a(50618);let eW=e=>{var t,a;let{onClick:n,children:i,edit:o,message:d,code:c,isLoading:u}=e,p=(0,L.iZ)(e=>e.project),{toggleBookmark:h}=(0,eK.g)((null==p?void 0:p.id)||""),{isActive:f,shouldShowCurrentEditHighlight:g}=ez(o),v=(0,r.useCallback)(e=>{e.stopPropagation(),(null==o?void 0:o.id)&&h(o.id,!!o.bookmarked)},[o,h]);return(0,s.jsxs)("div",{className:"flex w-full items-start gap-1",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[!!o&&(0,s.jsx)(O,{editId:null!==(t=null==o?void 0:o.id)&&void 0!==t?t:void 0,commitSha:null!==(a=null==o?void 0:o.commit_sha)&&void 0!==a?a:void 0,messageId:d.id,code:c}),(0,s.jsx)(m.z,{onClick:n,variant:"outline",className:(0,l.cn)("flex h-auto w-full max-w-56 cursor-pointer gap-2 rounded-xl p-3 text-base font-medium shadow-none sm:max-w-xs md:text-sm",u?"items-center":"items-start","border border-muted-border bg-muted text-foreground","transition-all duration-150 ease-in-out","hover:border-border hover:bg-muted-hover",{"border-affirmative-primary bg-affirmative hover:border-affirmative-primary/80 hover:bg-affirmative/80":g||f,"hover:cursor-auto hover:border-affirmative-primary hover:bg-affirmative":g}),children:i})]}),(null==o?void 0:o.id)&&(0,s.jsx)("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center",children:(0,s.jsx)(eZ.Z,{onClick:v,isBookmarked:!!o&&!!o.bookmarked&&(null==o?void 0:o.bookmarked),className:"mt-3"})})]})};var eH=a(12752);let eV=e=>"edit"===e.variant?(0,s.jsx)(eG,{...e}):(0,s.jsx)(eX,{...e}),eG=e=>{let{message:t,edit:a,onClick:r,isActive:n,code:l}=e,i=!0;"aiMessage"===t.type&&(i=l.done||"running"!==t.status);let o=(0,c.zL)(l),d=(0,I.Y)({editId:null==a?void 0:a.id,commitSha:null==a?void 0:a.commit_sha}),u="aiMessage"===t.type&&!t.stopped&&!i;return(0,s.jsxs)(eW,{edit:a,message:t,code:l,onClick:r,isLoading:u,children:[o>0&&(0,s.jsx)("div",{className:"flex h-5 items-center",children:(0,s.jsx)(p.Z,{name:"language",size:"small"})}),i?(0,s.jsx)(eY,{message:t,isCurrentEdit:d,edit:a,isActive:n,code:l}):l&&(0,s.jsx)(eq,{isActive:n,code:l,messageStopped:"aiMessage"===t.type&&t.stopped}),(0,s.jsx)(p.Z,{name:"chevron_right"})]})},eX=e=>{let{message:t,edit:a,onClick:r,isActive:n}=e,l=(0,I.Y)({editId:null==a?void 0:a.id,commitSha:null==a?void 0:a.commit_sha});return(0,s.jsxs)(eW,{edit:a,message:t,code:void 0,onClick:r,isLoading:!1,children:[(0,s.jsx)(eY,{message:t,isCurrentEdit:l,edit:a,isActive:n}),(0,s.jsx)(p.Z,{name:"chevron_right"})]})},eB=(0,r.memo)(e=>{let{message:t,edit:a,code:r}=e,{isActive:n}=ez(a),{handleOpenCode:l,handleOpenPreview:i}=eF({edit:a,messageId:t.id,code:r}),o=(0,h.Z)("md"),{setView:d}=(0,j.zp)(),c="aiMessage"===t.type&&t.persisted;return(0,s.jsx)(u.E.div,{className:"relative flex w-5/6 max-w-xs pb-4",initial:{opacity:c?1:0},animate:{opacity:1},transition:{ease:"easeOut",duration:1},children:(0,s.jsx)(eV,{variant:"edit",code:r,message:t,edit:null!=a?a:null,onClick:e=>{o&&d(j.$.PREVIEW),a?i(e):l()},isActive:n})})});eB.displayName="CodeCard";let eq=(0,r.memo)(e=>{let{isActive:t,code:a,messageStopped:n}=e,[i,o]=(0,r.useState)(""),d=!n;(0,r.useEffect)(()=>{a.parts.length>0&&o(e=>eQ(a)||e)},[a]);let c=d?i||"...":i;return(0,s.jsx)("div",{className:"min-h-[1.375rem] min-w-0 flex-1",children:(0,s.jsx)(eM.M,{mode:"popLayout",children:(0,s.jsx)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:(0,l.cn)("truncate text-muted-foreground",{"text-foreground":t}),children:c}),d&&(0,s.jsx)(eO.T,{text:"",className:"mt-0"})]})},c)})})});eq.displayName="EditingTitle";let eY=(0,r.memo)(e=>{let{message:t,edit:a,code:n,isActive:i,isCurrentEdit:o}=e,{title:d,body:u}=(0,r.useMemo)(()=>{let e=void 0!==n?(0,c.zL)(n):0;if(a){var s;return{title:"".concat(null!==(s=a.commit_message)&&void 0!==s?s:"no commit message"),body:o?"Preview Latest":"Preview"}}if(0===e&&"aiMessage"===t.type&&void 0!==t.thinkingTimeMs)return{title:"Saving changes...",body:"View more"};let r="aiMessage"===t.type?t.status:"completed",l="Saving changes...";return"stopped"===r&&(l="Generation stopped"),"completed"!==r||t.editId||(l="Failed to save changes"),{title:"Edited ".concat(e," file").concat(1===e?"":"s"),body:l}},[t,o,a,n]);return(0,s.jsxs)("div",{className:"flex w-full flex-col gap-1 overflow-hidden text-left",children:[(0,s.jsx)("span",{className:(0,l.cn)("truncate",{"text-foreground":i}),children:d}),(0,s.jsx)("span",{className:"truncate font-normal",children:u})]})});eY.displayName="FinishedEditingTitle";let eJ=e=>{if(!e)return"";let t=e.split(/[\/\\]/);return t[t.length-1]},eQ=e=>{for(let t=e.parts.length-1;t>=0;t--){let a=e.parts[t];if("writing_file"===a.type||"edit"===a.type)return"Writing ".concat(eJ(a.file_path));if("delete"===a.type)return"Deleting ".concat(eJ(a.file_path));if("rename"===a.type)return"Renaming ".concat(eJ(a.original_file_path));else if("add_dependency"===a.type)return"Installing ".concat(a.dependency);else if("remove_dependency"===a.type)return"Uninstalling ".concat(a.removed_dependency);else if("tool_use"===a.type){let e=(0,eH.fi)(a.name||"",a.parsedData,!1);if(e)return e;{let e=a.name||"";return e.split("-").pop()||e}}}return"Thinking..."},e$=e=>{let{name:t,parsedData:a}=e;switch(t){case"lov-view":case"lov-write":case"lov-search-replace":case"lov-line-replace":return(null==a?void 0:a.file_path)||"";default:return""}},e0=e=>["lov-view","lov-write","lov-search-replace","lov-line-replace"].includes(e),e1=e=>{if(0===e.length)return[];let t=[],a=[],s="";for(let r of e){let e=e0(r.name),n=e?e$(r):"";if(e&&n&&n===s&&a.length>0)a.push(r);else{if(a.length>0){let e=a[a.length-1],s=a.every(e=>e.done);t.push({...e,done:s})}e&&n?(a=[r],s=n):e||(a=[],s="",t.push(r))}}if(a.length>0){let e=a[a.length-1],s=a.every(e=>e.done);t.push({...e,done:s})}return t},e2=e=>{let{toolUses:t,isStreaming:a=!1,isLastElement:n=!1,messageCompleted:i=!1}=e,[o,d]=(0,r.useState)(!1),c=(0,r.useMemo)(()=>e1(t),[t]),u=(0,r.useMemo)(()=>0===c.length?"":"".concat(c[0].name,"-").concat(Object.keys(c[0].parsedData).join("-")),[c.length>0?c[0].name:"",c.length>0?Object.keys(c[0].parsedData).join("-"):""]),p=n&&!i,h=c.length>1,f=(0,r.useRef)(null),[g,v]=(0,r.useState)(0),x=(0,r.useRef)(null),b=(0,r.useCallback)(()=>{x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{f.current&&v(f.current.scrollHeight)},50)},[]);return((0,r.useEffect)(()=>()=>{x.current&&clearTimeout(x.current)},[]),(0,r.useEffect)(()=>{f.current&&v(f.current.scrollHeight)},[f,o,c]),0===c.length)?null:h?(0,s.jsxs)("div",{className:"relative flex w-full flex-col",children:[(0,s.jsx)(m.z,{onClick:()=>d(!o),variant:"default",className:(0,l.cn)("absolute right-0 top-2 z-10 flex h-6 items-center justify-center px-1.5 py-1 text-base font-normal transition-all duration-300 ease-out md:text-sm",!o&&"border border-border bg-background text-muted-foreground hover:bg-muted"),"aria-label":o?"Collapse tool uses":"Expand tool uses",children:o?"Hide":"Show all (".concat(c.length,")")}),(0,s.jsx)("div",{className:"relative overflow-hidden transition-all duration-300 ease-in-out",style:{height:o?"".concat(g,"px"):"36px"},children:(0,s.jsx)("div",{ref:f,className:(0,l.cn)("absolute flex w-full flex-col gap-2",o?"top-0 pt-2":"bottom-0 pb-1"),children:c.map((e,t)=>(0,s.jsx)("div",{className:"transition-all duration-300 ease-out",children:(0,s.jsx)(eH.Y9,{collapsed:!o,onHeightChange:b,name:e.name,parsedData:e.parsedData,done:e.done,isShimmering:p&&t===c.length-1,duration:e.duration})},"".concat(u,"-").concat(t)))})})]}):(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(eH.Y9,{name:c[0].name,parsedData:c[0].parsedData,done:c[0].done,isShimmering:p,duration:c[0].duration,collapsed:!1})})},e5=(0,r.memo)(e=>{let{mermaid:t,className:a}=e,{setActiveMermaidContent:r,setShowConsole:n}=(0,x.pE)(),i=e=>{if(!e)return"Diagram";let t=e.trim().toLowerCase();return t.startsWith("graph")?"Flowchart":t.startsWith("sequencediagram")?"Sequence":t.startsWith("classdiagram")?"Class":t.startsWith("erdiagram")?"Entity Relationship":t.startsWith("journey")?"User Journey":t.startsWith("gitgraph")?"Git Graph":t.startsWith("pie")?"Pie Chart":t.startsWith("gantt")?"Gantt Chart":t.startsWith("statediagram")?"State":t.startsWith("mindmap")?"Mind Map":"Diagram"},o=i(t.mermaidCode),d=!t.done;return(0,s.jsx)(u.E.div,{className:"relative flex w-5/6 max-w-xs pb-4",initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeOut",duration:1},children:(0,s.jsx)(m.z,{onClick:e=>{var a;e.stopPropagation(),t.done&&(r(t),n("mermaid"),k.ZP.capture(_.SL.MERMAID.DIAGRAM_OPENED,{diagram_type:i(t.mermaidCode),code_length:(null===(a=t.mermaidCode)||void 0===a?void 0:a.length)||0}))},variant:"outline",className:(0,l.cn)("flex h-auto w-full cursor-pointer gap-2 rounded-xl p-3 text-sm font-medium shadow-none",d?"items-center":"items-start","border border-muted-border bg-muted text-foreground","transition-all duration-150 ease-in-out",d?"opacity-60 hover:border-muted-border hover:bg-muted":"hover:border-border hover:bg-muted-hover",a),disabled:d,children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex h-5 items-center",children:(0,s.jsx)(p.Z,{name:"progress_activity",size:"small",className:"animate-spin"})}),(0,s.jsx)("span",{className:"flex-1 text-left",children:"Generating diagram..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex h-5 items-center",children:(0,s.jsx)(p.Z,{name:"auto_stories",size:"small"})}),(0,s.jsx)("span",{className:"flex-1 text-left",children:o}),(0,s.jsx)(p.Z,{name:"chevron_right"})]})})})}),e4=e=>{let{codeContent:t}=e,[a,n]=(0,r.useState)(!1),l=async()=>{await navigator.clipboard.writeText(String(t)),n(!0),setTimeout(()=>n(!1),2e3)},{resolvedTheme:i}=(0,Z.F)(),o="dark"===i?G.A:G.g;return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{className:"hover:bg-card-hover absolute right-2 top-2 rounded-md bg-secondary p-1 transition-colors",onClick:l,children:(0,s.jsx)(p.Z,{name:a?"check":"content_copy",className:"h-4 w-4 text-foreground transition-all duration-300"})}),(0,s.jsx)("div",{className:"max-w-full overflow-x-auto",children:(0,s.jsx)(H.Z,{children:String(t).replace(/\n$/,""),style:o,language:"sql",wrapLongLines:!0,PreTag:"div"})})]})},e6=e=>"parts"in e&&"done"in e,e3=e=>"lovSql"in e&&"done"in e,e7=e=>(0,c.Cg)(e)&&"lov-supabase-migration"===e.name,e8=e=>"mermaidCode"in e&&"done"in e,e9=e=>{let{message:t,edit:a,messageParts:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(te,{message:t,messageParts:r,edit:a}),t.stopped&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("span",{className:"inline-flex items-center text-muted-foreground",children:"This message was cancelled."})}),(0,s.jsx)(eP,{message:t,messageId:t.id,lovActions:null==r?void 0:r.lovActions,sqlRunState:t.sqlRunState,persisted:t.persisted})]})},te=e=>{let{message:t,messageParts:a,edit:r}=e;if(!a)return t.content.length>0?(0,s.jsx)(J,{displayCursor:!1,persisted:t.persisted,children:t.content||""}):null;let n=[],l=[],i=a.parts.some(e=>(0,c.Cg)(e)&&!e.done),o=e=>{l.length>0&&(n.push((0,s.jsx)(e2,{toolUses:l,isStreaming:i,isLastElement:e,messageCompleted:t.persisted},"tool-group-".concat(n.length))),l=[])},d=e=>"content"in e&&""===e.content.trim();for(let e=0;e<a.parts.length;e++){let i=a.parts[e];if((0,c.Cg)(i)){if(i.failed)continue;if(l.length,l.push({name:i.name,parsedData:i.parsedData,done:i.done,duration:i.duration}),e7(i)&&i.parsedData&&i.parsedData.query){let t=i.parsedData.query.replace(/\\n/g,"\n").replace(/\\t/g,"	").replace(/\\r/g,"\r");n.push((0,s.jsx)(e4,{codeContent:t},e))}}else if(!d(i)){if(o(!1),e6(i))n.push((0,s.jsx)(eB,{message:t,edit:r,code:i},e));else if(e3(i))n.push((0,s.jsx)(e4,{codeContent:i.lovSql},e));else if(e8(i))n.push((0,s.jsx)(e5,{mermaid:i},e));else if("content"in i)n.push((0,s.jsx)(J,{displayCursor:!1,persisted:t.persisted,children:i.content},e));else throw Error("Unknown part type")}}return o(!0),(0,s.jsx)(s.Fragment,{children:n})};var tt=a(92850),ta=a(33187),ts=a(19060),tr=a(26815);function tn(e){let{open:t,onOpenChange:a,onFeedbackSubmit:n,onSkip:l}=e,[i,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(""),u=e=>{o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,s.jsx)(ed.Vq,{open:t,onOpenChange:e=>{e||n({selectedOptions:[],comment:"",action:"close"}),a(e),o([]),c("")},children:(0,s.jsxs)(ed.cZ,{className:"bg-background",size:"md",children:[(0,s.jsx)(ed.fK,{children:(0,s.jsx)(ed.$N,{className:"text-3xl font-medium",children:"Give feedback"})}),(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["We're sorry it didn't meet your expectations. ",(0,s.jsx)("br",{}),"Your feedback helps us improve Lovable and your experience. Please tell us what went wrong."]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"What happened?"}),(0,s.jsx)("div",{className:"space-y-2.5",children:[{id:"incorrect-solution",label:"Missunderstood the task"},{id:"missing-functionality",label:"Some functionalities were missing"},{id:"design-not-as-expected",label:"Design wasn't as expected"},{id:"other",label:"Other"}].map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ts.X,{id:e.id,checked:i.includes(e.id),onCheckedChange:()=>u(e.id)}),(0,s.jsx)(tr.Label,{htmlFor:e.id,className:"cursor-pointer",children:e.label})]},e.id))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"feedback text-sm font-medium",children:"What can we improve?"}),(0,s.jsx)(ec.g,{id:"feedback",placeholder:"Your feedback...",className:"min-h-[100px]",value:d,onChange:e=>c(e.target.value)})]})]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(m.z,{variant:"outline",onClick:()=>{l(),n({selectedOptions:[],comment:"",action:"skip"}),o([]),c("")},children:"Skip"}),(0,s.jsx)(m.z,{onClick:()=>{n({selectedOptions:i,comment:d,action:"submit"}),o([]),c("")},children:"Submit"})]})]})})}var tl=e=>{let{messageId:t}=e,[a,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),u=(0,i.aK)(e=>e.sortedMessageIds),h=(0,g.D)(),f=u.length,{data:v,isLoading:x}=(0,tt.a)(ta.W.feedbackStatus({projectId:h})),b=(0,ef.D)({mutationFn:async()=>{let e=(0,ej.SJ)();return(await e.post("/user/feedback-status",{has_submitted_feedback:!0})).data},onError:e=>{(0,ey.Eo)(e)}}),y=(0,r.useCallback)(async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"thumbs_up";if(!l){try{await b.mutateAsync(),j({isPositive:e,selectedOptions:null==t?void 0:t.selectedOptions,comment:null==t?void 0:t.comment,action:a})}catch(e){}o(!0),n(!1)}},[l,b,o,n]);(0,r.useEffect)(()=>{!l&&(null==v?void 0:v.is_free_user)&&u.length>=3&&(y(!0,void 0,"continued_chat"),c(!0))},[u.length,l,null==v?void 0:v.is_free_user,y]);let j=e=>{k.ZP.capture("first_prompt_result_feedback",{messageId:t,...e})},E=async()=>{try{await b.mutateAsync(),j({isPositive:!1,action:"skip"})}catch(e){}o(!0),n(!1)};return x||!(null==v?void 0:v.is_free_user)||(null==v?void 0:v.has_submitted_feedback)||d||f>2?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"relative flex max-w-full flex-row items-center justify-between gap-2 rounded-lg border border-muted-border p-3",children:l?(0,s.jsx)("p",{className:"text-sm",children:"Thank you for your feedback! It helps make Lovable better."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-sm",children:"Did Lovable build what you wanted?"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m.z,{variant:"outline",size:"sm",className:"h-7 w-7 flex-1 cursor-pointer border-neutral-700 bg-gray-900 py-1 text-xs hover:border-gray-300 hover:bg-gray-600",onClick:()=>y(!0),children:(0,s.jsx)(p.Z,{name:"thumb_up-fill",className:"h-3.5 w-3.5",fill:"white"})}),(0,s.jsx)(m.z,{variant:"outline",size:"sm",className:"h-7 w-7 flex-1 cursor-pointer border-neutral-700 bg-gray-900 py-1 text-xs hover:border-gray-300 hover:bg-gray-600",onClick:()=>n(!0),children:(0,s.jsx)(p.Z,{name:"thumb_down-fill",className:"h-3.5 w-3.5",fill:"white"})})]})]})}),(0,s.jsx)(tn,{open:a,onOpenChange:e=>{n(e),e||o(!0)},onFeedbackSubmit:e=>y(!1,e,e.action),onSkip:E})]})};let ti=e=>{var t;let{message:a,isFirstAIMessage:n}=e,u=(0,i.tV)(a.editId),m=(0,r.useMemo)(()=>a.content?(0,c.hP)(a.content):null,[a.id,a.content]),p=(0,o.dl)(d.P.FeedbackFormFirstPrompt);return(0,s.jsxs)("div",{className:(0,l.cn)("flex flex-col space-y-4 overflow-auto pl-8 text-left text-base leading-[22px]"),style:{overflowWrap:"anywhere"},children:[(0,s.jsx)(e9,{message:a,edit:u,messageParts:m}),a.errors&&(0,s.jsx)(K,{edit:u,messageParts:m,errors:null!==(t=a.errors)&&void 0!==t?t:null}),p&&n&&"completed"==a.status&&(0,s.jsx)(tl,{messageId:a.id})]})},to=e=>{let{branchName:t}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{children:"Switched branch to"}),(0,s.jsx)("div",{className:"flex items-center gap-2 rounded-full border border-muted-border bg-muted px-2 py-0.5",children:(0,s.jsx)("p",{children:t})})]})};var td=a(25658),tc=a(41135),tu=a(3813),tm=a(47902),tp=a(55721),th=a(79358);let tf=e=>{let{remixedProjectId:t,isLoading:a=!1}=e;return(0,s.jsxs)(ed.cZ,{children:[(0,s.jsxs)(ed.fK,{children:[(0,s.jsx)(ed.$N,{children:a?"Remixing Project Snapshot...":"Project Snapshot Remixed Successfully"}),(0,s.jsx)(ed.Be,{children:a?"Please wait while we remix your project snapshot. This may take a moment.":"Your project snapshot has been remixed to your local development environment."})]}),(0,s.jsx)(ed.cN,{children:a?(0,s.jsxs)(m.z,{disabled:!0,children:[(0,s.jsx)(p.Z,{name:"progress_activity",size:"small",className:"animate-spin"}),"Remixing..."]}):(0,s.jsx)(m.z,{asChild:!0,children:(0,s.jsx)("a",{href:"http://localhost:3000/projects/".concat(t),target:"_blank",rel:"noreferrer",children:"Open Remixed Project"})})})]})};var tg=a(49968),tv=a(88391),tx=a(35974),tb=a(67817);let ty=e=>"https://us.posthog.com/project/47074/llm-observability/traces/".concat(e),tj=e=>{let{className:t}=e;return(0,s.jsx)(tx.C,{variant:"outline",className:t,children:"ADMIN"})},tE=e=>{let{messageId:t,langsmithUrl:a,editId:n}=e,l=(0,g.D)(),i=(0,tb.v)(),{setActiveMessageId:o,setShowConsole:d}=(0,x.pE)(),c=(0,tv.z)(tf),[u,m]=(0,r.useState)(!1),h=async()=>{c({childProps:{isLoading:!0}}),m(!0);try{let e=(0,ej.SJ)(),a=await e.post("/projects/".concat(l,"/remix/snapshot"),{message_id:t,keep_supabase_connection:!0});c({childProps:{remixedProjectId:a.project_id,isLoading:!1}})}catch(e){eo.Am.error("Failed to remix project snapshot",{description:"An error occurred while remixing the project snapshot to local development."}),c(!1)}finally{m(!1)}};return i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tp.VD,{}),(0,s.jsxs)(tp.Xi,{className:"w-full gap-2",onClick:()=>{o(t),d("debug")},children:[(0,s.jsx)(p.Z,{name:"bug_report",size:"small"}),(0,s.jsx)("span",{children:"Debug"}),(0,s.jsx)(tj,{className:"ml-auto"})]}),(0,s.jsxs)(tp.Xi,{className:"w-full gap-2",onClick:()=>{o(t),d("annotation")},children:[(0,s.jsx)(p.Z,{name:"edit",size:"small"}),(0,s.jsx)("span",{children:"Annotate"}),(0,s.jsx)(tj,{className:"ml-auto"})]}),(0,s.jsxs)(tp.Xi,{className:"w-full gap-2",onClick:h,disabled:u,children:[(0,s.jsx)(p.Z,{name:"refresh",size:"small",className:u?"animate-spin":""}),(0,s.jsx)("span",{children:u?"Remixing...":"Remix Snapshot to Local"}),(0,s.jsx)(tj,{className:"ml-auto"})]}),a&&(0,s.jsx)(tp.Xi,{className:"w-full gap-2",asChild:!0,children:(0,s.jsxs)("a",{href:a,target:"_blank",rel:"noreferrer",children:[(0,s.jsx)(p.Z,{name:"arrow_outward",size:"small"}),(0,s.jsx)("span",{children:"See in Langsmith"}),(0,s.jsx)(tj,{className:"ml-auto"})]})}),i&&(0,s.jsx)(tp.Xi,{className:"w-full gap-2",asChild:!0,children:(0,s.jsxs)("a",{href:ty(t),target:"_blank",rel:"noreferrer",children:[(0,s.jsx)(p.Z,{name:"arrow_outward",size:"small"}),(0,s.jsx)("span",{children:"See in Posthog"}),(0,s.jsx)(tj,{className:"ml-auto"})]})}),(0,s.jsx)(tp.Xi,{className:"w-full gap-2",asChild:!0,children:(0,s.jsxs)("a",{href:(0,tg.pr)(l,t),target:"_blank",rel:"noreferrer",children:[(0,s.jsx)(p.Z,{name:"arrow_outward",size:"small"}),(0,s.jsx)("span",{children:"Firestore: Message"}),(0,s.jsx)(tj,{className:"ml-auto"})]})}),n&&(0,s.jsx)(tp.Xi,{className:"w-full gap-2",asChild:!0,children:(0,s.jsxs)("a",{href:(0,tg.oo)(l,n),target:"_blank",rel:"noreferrer",children:[(0,s.jsx)(p.Z,{name:"arrow_outward",size:"small"}),(0,s.jsx)("span",{children:"Firestore: Edit"}),(0,s.jsx)(tj,{className:"ml-auto"})]})})]}):null};var tw=a(6478);let tN=e=>{let{messageId:t}=e,a=(0,g.D)(),n=(0,tw.F)(),l=(0,r.forwardRef)((e,t)=>(0,s.jsx)(tp.Xi,{ref:t,...e,children:(0,s.jsxs)("div",{className:"flex w-full justify-between gap-4",onClick:()=>{k.ZP.capture(_.SL.ELLIPSIS.COPY_LINK_CLICKED)},children:[(0,s.jsx)("span",{children:"Copy message link"}),(0,s.jsx)(p.Z,{name:"link",size:"small",className:"ml-auto"})]})}));l.displayName="TriggerComponent";let i=n({TriggerComponent:l,textToCopy:"".concat(window.location.origin,"/projects/").concat(a,"?messageId=").concat(t)});return(0,s.jsxs)(N.u,{children:[(0,s.jsx)(N.aJ,{asChild:!0,children:i}),(0,s.jsx)(N._v,{children:"Copy link to clipboard"})]})},t_=e=>{let{commitSha:t,previewBuildStatus:a}=e,s=(0,L.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.latest_commit_sha}),{project_id:n}=(0,C.useParams)(),l=(0,L.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.name}),i=t===s,o=(0,r.useMemo)(()=>{if(t&&l)return(0,eU.t)({projectName:l,sha:t})},[t,l]),{isDisabled:d,disabledReason:c}=(0,r.useMemo)(()=>"pending"===a?{isDisabled:!0,disabledReason:"Preview is being built..."}:"failed"===a?{isDisabled:!0,disabledReason:"Failed to build preview"}:o?{isDisabled:!1,disabledReason:void 0}:{isDisabled:!0,disabledReason:"There is no preview available for this version"},[o,a]),u=(0,r.useCallback)(e=>{let{eventName:a}=e;k.ZP.capture(a,{commit_sha:t,disabled:d,disabled_reason:c,is_latest_commit:i,preview_url:o,project_id:n})},[t,c,d,i,o,n]);return{previewUrl:o,isLatestCommit:i,isDisabled:d,disabledReason:c,onPreview:u}},tC=e=>{let{commitSha:t,previewBuildStatus:a}=e,{previewUrl:r,isDisabled:n,onPreview:l}=t_({commitSha:t,previewBuildStatus:a});return(0,s.jsx)(tp.Xi,{asChild:!0,disabled:n,children:(0,s.jsxs)("a",{className:"w-full",href:r,target:"_blank",rel:"noreferrer",onClick:()=>l({eventName:_.SL.ELLIPSIS.PREVIEW_CLICKED}),children:["Preview",(0,s.jsx)(p.Z,{name:"arrow_outward",className:"ml-auto",size:"small"})]})})},tk=e=>{let{editId:t,commitSha:a}=e,{onRevert:r,isDisabled:n}=R({editId:t,commitSha:a});return(0,s.jsxs)(tp.Xi,{className:"w-full",onClick:()=>r&&r({eventName:_.SL.ELLIPSIS.RESTORE_CLICKED}),disabled:n,children:["Restore",(0,s.jsx)(p.Z,{name:"restart_alt",className:"ml-auto",size:"small"})]})},tS=e=>{let{messageId:t,editId:a,langsmithUrl:r,costCredits:n,className:l,createdAt:o,senderName:d="Lovable"}=e,c=(0,i.tV)(a);return(0,s.jsxs)(tp.h_,{children:[(0,s.jsx)(tp.$F,{asChild:!0,className:l,children:(0,s.jsx)(m.z,{variant:"ghost",size:"icon-sm",children:(0,s.jsx)(p.Z,{name:"more_horiz",size:"small"})})}),(0,s.jsxs)(tp.AW,{align:"end",children:[(0,s.jsx)(tN,{messageId:t}),(0,s.jsx)(tC,{commitSha:null==c?void 0:c.commit_sha}),(0,s.jsx)(tk,{editId:a,commitSha:null==c?void 0:c.commit_sha}),void 0!==n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tp.VD,{}),(0,s.jsxs)(tp.Xi,{className:"cursor-default justify-between focus:bg-transparent focus:text-muted-foreground",onSelect:e=>e.preventDefault(),children:[(0,s.jsx)("span",{children:"Credits used"}),(0,th.H)(n)]})]}),(0,s.jsx)(tE,{messageId:t,langsmithUrl:r,editId:a})]})]})},tT=e=>e<1e3?"1s":e<6e4?"".concat((e/1e3).toFixed(0),"s"):"".concat(Math.floor(e/6e4),"m ").concat(Math.floor(e%6e4/1e3),"s"),tA=e=>"userCommit"!==e.type&&"userMessage"!==e.type,tI=e=>{let{previousMessageId:t}=e,a=(0,i.aK)(e=>t?e.messages[t]:void 0);return a&&"revertSuccess"!==a.type&&!tA(a)?(0,s.jsx)(tR,{className:"mb-2"}):null},tL=e=>{let{message:t}=e,a=(0,td.z)(e=>e.showHistory),r=(0,tu.zq)();return a?null:(0,s.jsxs)("div",{className:"mb-2 flex shrink-0 items-center gap-1 text-ellipsis text-nowrap text-muted-foreground md:text-sm",children:[(0,s.jsxs)("div",{className:"flex w-full items-center leading-none",children:[(0,s.jsx)(tR,{className:"shrink-0 leading-none"}),r&&void 0!==t.thinkingTimeMs&&t.thinkingTimeMs>0&&("completed"===t.status||"stopped"===t.status)&&(0,s.jsxs)("span",{className:"ml-2 mt-px whitespace-nowrap opacity-100 transition-opacity duration-150 ease-out group-hover:opacity-100 md:opacity-0",children:["Worked for ",tT(t.thinkingTimeMs)]}),(0,s.jsx)("span",{className:(0,l.cn)("ml-auto mt-px flex-shrink overflow-hidden opacity-100 transition-opacity duration-150 ease-out group-hover:opacity-100 md:opacity-0"),children:(0,tm._g)(t.createdAt)})]}),(0,s.jsx)(tS,{className:"ml-auto",messageId:t.id,editId:t.editId,langsmithUrl:t.langsmithUrl,costCredits:t.costCredits,createdAt:t.createdAt})]})},tR=e=>{let{className:t}=e;return(0,s.jsxs)("div",{className:(0,l.cn)("flex items-center gap-2 pl-2",t),children:[(0,s.jsx)(tc.xx,{className:(0,l.cn)("mr-1.5 h-3.5 md:mr-1")}),(0,s.jsx)("span",{className:(0,l.cn)("whitespace-nowrap text-lg font-medium md:text-base"),children:"Lovable"})]})};var tD=a(52558),tP=a(7455),tM=a(71759),tO=a(70335);let tz=e=>{let{message:t}=e,{authUser:a}=(0,tD.Eu)(),r=(0,tP.c)(e=>e.collaborators).find(e=>e.id===t.userId),n=(0,tM.hO)(e=>e.memberships).find(e=>e.user_id===t.userId),l=r||n;if((null==r?void 0:r.id)===(null==a?void 0:a.uid)||(null==n?void 0:n.user_id)===(null==a?void 0:a.uid)||!l)return null;let i=l.display_name===t.userId?l.email:l.display_name;return(0,s.jsxs)("div",{className:"mt-4 flex max-w-full items-center gap-1.5 self-start truncate pl-2 text-sm font-medium",children:[(0,s.jsx)(tO.Y,{user:{id:t.userId||"",username:i||""},className:"h-5 w-5 text-xs"}),(0,s.jsx)($.default,{className:"min-w-0 truncate hover:underline",href:"/@".concat(l.username),children:i})]})},tU=e=>{let{message:t,previousMessageId:a}=e;switch(t.type){case"userCommit":return null;case"userMessage":return(0,s.jsx)(tz,{message:t});case"branchSwitched":case"revertSuccess":return(0,s.jsx)(tI,{message:t,previousMessageId:a});case"aiMessage":return(0,s.jsx)(tL,{message:t})}};var tF=a(22048),tK=a(96771);let tZ=e=>{let{shortCommitHash:t,scrollToEdit:a,newUI:l=!1}=e,{loadMessagesFromId:o}=(0,i.mx)(),{setCodeViewType:d}=(0,b.VK)(),{setActiveMessageId:c,setActiveEditId:m,setShowConsole:h,exitConsole:f}=(0,x.pE)(),g=(0,i.uO)(t),v=(0,x.Sl)(e=>e.consoleContentType),y=(0,x.Sl)(e=>e.activeMessageId),j=(0,i.Fm)(null==g?void 0:g.id),E=y===(null==g?void 0:g.id)&&"code"===v,[w,N]=(0,r.useState)("idle");(0,r.useEffect)(()=>{E&&m(null==g?void 0:g.id)},[E,g,m]);let C=(0,r.useCallback)(()=>{g&&(E?(k.ZP.capture(_.SL.CONSOLE.EXITED_VIA_CARD),f()):(k.ZP.capture(_.SL.CODE_CARD.VIEW_CODE_CLICKED),c(g.id),d(b.es.DIFF),m(g.id),h("code")))},[g,E,f,c,d,m,h]);if(!g)return null;let S=async()=>{N("loading");try{g.type===tK.I.type.DEVELOPER_UPDATE?(await o({messageId:g.id,id_type:"edit_id"}),a({type:"shortCommitHash",value:t})):(await o({messageId:g.id,id_type:"edit_id"}),a({type:"editId",value:g.id})),N("success")}catch(e){eo.Am.error("Could not scroll to edit. Try refreshing the page."),N("error"),n.logging.warn("Firestore error - RevertChipV2 - scroll to edit",{error:e,editId:null==g?void 0:g.id,shortCommitHash:t})}},T="loading"===w;return l?j?"aiMessage"!==j.type?(tF.Tb(Error("RevertChip: message is not an AI message"),{level:"error"}),null):(0,s.jsx)("div",{className:"flex flex-col gap-2 leading-[22px]",style:{overflowWrap:"anywhere"},children:(0,s.jsxs)(u.E.div,{className:"relative mb-6 mt-3 flex w-5/6 max-w-sm",initial:{opacity:1},animate:{opacity:1},transition:{ease:"easeOut",duration:1},children:[T&&(0,s.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-md bg-background/80",children:(0,s.jsx)(p.Z,{className:"animate-spin",name:"progress_activity",size:"small"})}),(0,s.jsx)(eV,{variant:"revert",message:j,edit:g,onClick:C,isActive:E})]})}):null:(0,s.jsxs)("button",{className:"flex items-center disabled:opacity-50",onClick:S,disabled:T,children:[(0,s.jsx)("span",{className:"mr-2 text-sm text-muted-foreground",children:"Restored"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-full border border-muted-border bg-muted px-3 py-1.5 transition-colors hover:bg-muted-hover",children:[(0,s.jsx)("span",{className:"max-w-xs truncate text-sm",title:g.commit_message,"aria-label":g.commit_message,children:g.commit_message}),T&&(0,s.jsx)(p.Z,{className:"ml-1 animate-spin",name:"progress_activity",size:"small"})]})]})},tW=e=>{var t,a,r;let{message:n}=e,o=(0,i.uO)(n.shortCommitHash),d={done:!0,parts:null!==(a=null==o?void 0:null===(t=o.diff)||void 0===t?void 0:t.map(e=>({type:"writing_file",file_path:e.file_path,done:!0,content:e.new_content})))&&void 0!==a?a:[]},c=(0,I.Y)({editId:null==o?void 0:o.id,commitSha:null==o?void 0:o.commit_sha}),{isActive:m}=ez(o),h=eF({edit:o,messageId:n.id,code:d});return o?(0,s.jsx)(u.E.div,{className:"relative ml-6 flex w-5/6 max-w-xs pb-4",initial:{opacity:1},animate:{opacity:1},transition:{ease:"easeOut",duration:1},children:(0,s.jsxs)(eW,{edit:o,message:n,code:d,onClick:h.handleOpenPreview,children:[(0,s.jsx)("div",{className:"flex h-5 items-center",children:(0,s.jsx)(tc.xR.GitHub,{className:"mt-px h-4 w-4 text-foreground"})}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-1 overflow-hidden text-left",children:[(0,s.jsx)("span",{className:(0,l.cn)("truncate",{"text-foreground":m}),children:null!==(r=o.commit_message)&&void 0!==r?r:"No commit message"}),(0,s.jsx)("span",{className:"truncate font-normal",children:c?"Active Edit":"See Preview"})]}),(0,s.jsx)(p.Z,{name:"chevron_right"})]})}):null};var tH=a(42503),tV=a(66491);let tG=(0,r.memo)(e=>{var t;let{messageId:a,edit:n,simplified:o=!1}=e,{commit_sha:d}=null!=n?n:{},{setActiveEditId:c}=(0,x.pE)(),u=(0,x.Sl)(e=>e.activeEditId),p=(0,i.aK)(e=>e.edits),h=u?p[u]:null,f=(0,L.iZ)(e=>e.project),{setActiveMessageId:g,setShowConsole:v,setConsolePreviewContent:b,exitConsole:y}=(0,x.pE)(),j=(0,x.Sl)(e=>e.consoleContentType),{toggleBookmark:E}=(0,eK.g)((null==f?void 0:f.id)||""),w=(0,r.useMemo)(()=>{if(d&&f)return(0,eU.t)({projectId:null==f?void 0:f.id,sha:d})},[d,f]),N=(0,I.Y)({editId:null==n?void 0:n.id,commitSha:null!==(t=null==n?void 0:n.commit_sha)&&void 0!==t?t:void 0}),_=n&&(null==h?void 0:h.id)===(null==n?void 0:n.id)&&"snapshot-preview"===j||N&&!h&&!j,C=(0,r.useMemo)(()=>{if(!(null==n?void 0:n.created_at))return null;let e=new Date(1e3*n.created_at.seconds);return{relative:(0,tH.l)(e,new Date),absolute:(0,tV.WU)(e,"MMM d, yyyy, h:mm a")}},[n]),k=(0,r.useCallback)(e=>{var t;if(e.altKey){window.open(w,"_blank");return}if(_||N){y();return}v("snapshot-preview"),g(a),b(w),c(null!==(t=null==n?void 0:n.id)&&void 0!==t?t:void 0)},[n,y,_,N,a,w,c,g,b,v]),S=(0,r.useCallback)(e=>{e.stopPropagation(),(null==n?void 0:n.id)&&E(n.id,!!n.bookmarked)},[n,E]),T=(0,r.useMemo)(()=>{if(n){let{commit_message:e,reverted:t}=null!=n?n:{};return(0,s.jsxs)("div",{className:"flex w-full flex-col gap-1 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1",children:[(0,s.jsx)("span",{className:"flex items-center gap-1 truncate",children:e}),(N||t)&&!o&&(0,s.jsx)(tx.C,{className:"border-0 py-0",variant:N?"default":"destructive",children:N?"Current":"Reverted"})]}),(0,s.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:C?(0,s.jsx)(s.Fragment,{children:C.absolute}):_?"Click to Exit Preview":"Click to Preview"})]})}return(0,s.jsxs)("div",{className:"flex w-full flex-col overflow-hidden",children:[(0,s.jsx)("span",{children:"No preview available"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"\xa0"})]})},[n,_,N,C,o]);return(0,s.jsxs)(m.z,{onClick:k,disabled:!n,className:(0,l.cn)("mb-2 flex h-auto w-full cursor-pointer items-start gap-2 rounded-lg p-3 text-left text-sm font-medium transition-colors duration-150 ease-in-out","border border-muted-border bg-muted text-foreground","hover:border-border hover:bg-muted-hover",{"border-affirmative-primary bg-affirmative hover:border-affirmative-primary hover:bg-affirmative/80":_},{"hover:cursor-auto hover:bg-affirmative":_&&N}),children:[(0,s.jsx)(eZ.Z,{onClick:S,isBookmarked:!!n&&!!n.bookmarked&&(null==n?void 0:n.bookmarked),className:"mt-[3px]"}),T]})});tG.displayName="LegacyPreviewCard";let tX=e=>{var t;let{message:a}=e,r=(0,i.tV)(a.editId);return(null==r?void 0:null===(t=r.diff)||void 0===t?void 0:t.length)?(0,s.jsx)(eB,{code:{done:!0,parts:r.diff.map(e=>({type:"writing_file",file_path:e.file_path,done:!0,content:e.new_content}))},message:a,edit:r}):(0,s.jsx)("div",{className:"relative w-5/6 max-w-xs",children:(0,s.jsx)(tG,{edit:r,messageId:a.id})})};var tB=a(94949),tq=a(24032);let tY=e=>{let{download:t}=(0,tB.F)(),[a,s]=(0,r.useState)(void 0),{store:n,cacheImageUrl:l}=(0,i.mx)(),o=n.getState().imageUrlCache,d="".concat(e.dir_name,"/").concat(e.file_name),c=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{c.current||(c.current=!0,(async()=>{if(o[d]){s(o[d]);return}let{url:a}=await t({dir_name:e.dir_name,file_name:e.file_name});s(a),l(d,a)})())},[t,e,d,o,l]),a},tJ=e=>{var t;let{images:a,optimistImageUrls:r}=e,n=a.length+(null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0)===1;return(0,s.jsxs)("div",{className:(0,l.cn)("mb-2 ml-auto flex max-w-[240px] flex-wrap justify-end gap-2 md:max-w-[240px]"),children:[null==r?void 0:r.map((e,t)=>(0,s.jsx)(t$,{imageUrl:e,singleImage:n},t)),a.map((e,t)=>(0,s.jsx)(tQ,{image:e,singleImage:n},t))]})},tQ=e=>{let{image:t,singleImage:a}=e,r=tY(t);return(0,s.jsx)(t$,{imageUrl:r,singleImage:a})},t$=e=>{let{imageUrl:t,singleImage:a}=e,{setSelectedImageUrl:n}=(0,i.mx)(),o=(0,tq.Eh)(e=>e.setImages),d=(0,tq.Eh)(e=>e.images),[c,u]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[v,x]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),j=(0,h.Z)("md"),E=(0,r.useCallback)(()=>{t&&n(t)},[t,n]),w=(0,r.useCallback)(async e=>{if(e.stopPropagation(),t&&!c){y(!0),setTimeout(()=>y(!1),500);try{let e=await fetch(t),a=await e.blob();await navigator.clipboard.write([new ClipboardItem({[a.type]:a})]),u(!0),k.ZP.capture(_.SL.CHAT.IMAGE_COPIED,{image_type:a.type,image_size:a.size}),setTimeout(()=>{u(!1)},2e3)}catch(e){(0,ey.Eo)("Failed to copy image")}}},[t,c]),N=(0,r.useCallback)(async e=>{if(e.stopPropagation(),t&&!f){if(d.length>=10){eo.Am.error("Image limit reached",{description:"Please limit your message to ".concat(10," images.")});return}y(!0),setTimeout(()=>y(!1),500),g(!0);try{let e=await fetch(t),a=await e.blob(),s="image-".concat(Date.now(),".").concat(a.type.split("/")[1]||"png"),r=new File([a],s,{type:a.type}),n={url:URL.createObjectURL(r),name:s,uploading:!1,uploaded:!1,id:(0,ee.Z)()};o(e=>[...e,n]),x(!0),k.ZP.capture(_.SL.CHAT.IMAGE_ADDED_TO_INPUT,{image_type:a.type,image_size:a.size,current_image_count:d.length+1}),setTimeout(()=>{x(!1)},2e3)}catch(e){(0,ey.Eo)("Failed to add image to chat")}finally{g(!1)}}},[t,f,d.length,o]);return(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(m.z,{variant:"ghost",className:(0,l.cn)("relative inline-block p-0 hover:bg-transparent",{"h-[120px] w-[200px] md:h-[90px] md:w-[160px]":a,"h-24 w-24 md:h-16 md:w-16":!a}),type:"button",disabled:!t,onClick:E,children:t?(0,s.jsxs)("div",{className:"group/image-hover relative h-full w-full",children:[(0,s.jsx)("img",{loading:"lazy",src:t,alt:"chat image",className:"h-full w-full rounded-lg border object-cover"}),!j&&(0,s.jsxs)("div",{className:(0,l.cn)("pointer-events-none absolute inset-0 flex items-center justify-center gap-1 rounded-lg bg-black/50 opacity-0 transition-opacity duration-200",{"group-hover/image-hover:opacity-100":!b,"opacity-100":b}),children:[(0,s.jsx)(m.z,{variant:"secondary",size:"icon-sm",onClick:w,disabled:c,className:"pointer-events-auto h-6 w-6 bg-white/90 text-black hover:bg-white disabled:bg-white/90 disabled:text-black disabled:opacity-100",children:(0,s.jsx)(p.Z,{name:c?"check":"content_copy",className:"h-3 w-3"})}),(0,s.jsx)(m.z,{variant:"secondary",size:"icon-sm",onClick:N,disabled:f||v,className:"pointer-events-auto h-6 w-6 bg-white/90 text-black hover:bg-white disabled:bg-white/90 disabled:text-black disabled:opacity-100",children:(0,s.jsx)(p.Z,{name:v?"check":"add_photo_alternate",className:"h-3 w-3"})})]})]}):(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg border bg-background/80",children:(0,s.jsx)(p.Z,{name:"progress_activity",size:"small",className:"animate-spin"})})})})};var t0=a(5635),t1=a(74928);let t2=e=>{let{content:t,open:a,onOpenChange:r,openText:n,closedText:i}=e;return(0,s.jsxs)(t1.zF,{open:a,onOpenChange:r,className:"mt-4 max-w-[300px] overflow-hidden rounded-lg border border-muted-border",children:[(0,s.jsx)(t1.wy,{asChild:!0,children:(0,s.jsxs)(m.z,{variant:"secondary",className:(0,l.cn)("h-10 w-full justify-between pr-2 text-sm font-medium transition-all duration-200 ease-out",a&&"rounded-b-none"),children:[a?n:i,(0,s.jsx)(p.Z,{name:a?"unfold_less":"unfold_more",size:"small",className:"transition-transform duration-200 ease-out"})]})}),(0,s.jsx)(u.E.div,{initial:{height:0},animate:{height:a?"auto":0},exit:{height:0},transition:{type:"spring",bounce:0,duration:.4},style:{overflow:"hidden"},children:(0,s.jsx)("pre",{className:"rounded-b-md border-t border-muted-border bg-secondary p-4 py-2 text-sm",children:(0,s.jsx)("code",{className:"block max-h-[300px] overflow-x-auto overflow-y-auto whitespace-pre-wrap break-words",children:t})})})]})},t5=e=>{let{messageContent:t}=e,{error:a}=t4(t),[n,l]=(0,r.useState)(!1);return(0,s.jsx)(t2,{content:a,open:n,onOpenChange:l,openText:"Error",closedText:"Error"})};function t4(e){let t=e.match(/([\s\S]+)```([\s\S]+)```\n+$/);return t?{error:t[2].trim(),text:t[1].trim()}:(n.logging.error("no_error_message_found_in_input",{input:e}),{error:"",text:e})}let t6=()=>(0,s.jsxs)("div",{className:"w-full rounded-lg border border-muted-border",children:[(0,s.jsxs)("div",{className:"flex h-10 w-full items-center justify-between rounded-b-none px-4 pr-2 text-sm font-medium",children:["Security Review",(0,s.jsx)(p.Z,{name:"security",size:"small"})]}),(0,s.jsx)("div",{className:"rounded-b-md border-t border-muted-border p-4 py-2 text-sm",children:(0,s.jsx)("span",{className:"text-muted-foreground",children:"Analyzing codebase for security vulnerabilities"})})]}),t3=e=>{let{content:t}=e,[a,n]=(0,r.useState)(!1);return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Write the code to create a new integration or update the existing integration with Supabase."}),(0,s.jsx)(t2,{content:t,open:a,onOpenChange:n,openText:"Hide detailed instructions",closedText:"Show detailed instructions"})]})},t7=e=>{let{content:t,selectedElements:a,containsError:r,tags:n,isSecurityReview:l}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)(ae,{selectedElements:a}),l?(0,s.jsx)(t6,{}):(0,s.jsx)(at,{content:t,containsError:r}),(0,s.jsx)(t8,{content:t,tags:n})]})},t8=e=>{let{content:t,tags:a}=e;return a.includes("supabase-integration-update")?(0,s.jsx)(t3,{content:t}):null},t9=e=>{let{elementType:t}=e,a=(0,t0.a)(t);return a?(0,s.jsx)(p.Z,{name:a,className:"size-4 text-black dark:text-white"}):null},ae=e=>{let{selectedElements:t}=e;return 0===t.length?null:(0,s.jsx)("div",{className:"mb-2 flex flex-wrap gap-2",children:t.map((e,t)=>{var a,r;return(0,s.jsxs)(N.u,{children:[(0,s.jsx)(N.aJ,{asChild:!0,children:(0,s.jsxs)("div",{className:(0,l.cn)((0,m.d)({variant:"outline",size:"sm"}),"flex items-center gap-2 text-xs"),children:[(0,s.jsx)(t9,{elementType:e.elementType}),(0,s.jsx)("span",{children:e.elementType})]})}),(0,s.jsxs)(N._v,{side:"top",children:["Line ",e.lineNumber," in ",null===(r=e.filePath)||void 0===r?void 0:null===(a=r.split)||void 0===a?void 0:a.call(r,"/").pop()]})]},t)})})},at=e=>{let{content:t,containsError:a}=e,{text:n,error:l}=(0,r.useMemo)(()=>a?t4(t):{text:t,error:null},[t,a]);return(0,s.jsxs)(s.Fragment,{children:[n,l&&(0,s.jsx)(t5,{messageContent:t})]})},aa=e=>{let{message:t}=e,{authUser:a}=(0,tD.Eu)(),r=(0,tP.c)(e=>e.collaborators).find(e=>e.id===t.userId),n=(0,tM.hO)(e=>e.memberships).find(e=>e.user_id===t.userId),i=(null==r?void 0:r.id)===(null==a?void 0:a.uid)||(null==n?void 0:n.user_id)===(null==a?void 0:a.uid);return(0,s.jsxs)("div",{className:(0,l.cn)("flex flex-col",i?"items-end":"items-start pl-8"),children:[(0,s.jsx)(tJ,{images:t.images,optimistImageUrls:t.optimistImageUrls}),(0,s.jsx)("div",{className:(0,l.cn)("overflow-wrap-anywhere overflow-auto whitespace-pre-wrap rounded-xl bg-transparent px-0 py-1.5 text-lg leading-[22px] md:text-base",{"max-w-[80%] bg-secondary px-3 py-3":i}),children:(0,s.jsx)(t7,{content:t.content,selectedElements:t.selectedElements,containsError:t.containsError,tags:t.tags,isSecurityReview:t.isSecurityReview})})]})},as=(0,r.memo)(e=>{let{messageId:t,previousMessageId:a,isLastMessage:o=!1,newMessageMinHeight:d,scrollToEdit:c}=e,u=(0,i.aK)(e=>e.messages[t]),m=(0,i.aK)(e=>e.sortedMessageIds).indexOf(t),p=(0,r.useMemo)(()=>(null==u?void 0:u.type)==="aiMessage"&&(1===m||m<2),[u,m]),h=(0,r.useMemo)(()=>{if(!u)return null;switch(u.type){case"userMessage":return(0,s.jsx)(aa,{message:u});case"userCommit":return(0,s.jsx)(tW,{message:u});case"aiMessage":return(0,s.jsx)(ti,{message:u,isFirstAIMessage:p});case"branchSwitched":return(0,s.jsx)(to,{branchName:u.branchName});case"revertSuccess":return(0,s.jsx)(tZ,{shortCommitHash:u.shortCommitHash,scrollToEdit:c});case"manualEdit":var e;return(0,s.jsxs)("div",{className:"ml-6",children:[(0,s.jsx)(tX,{message:u}),u.errors&&(0,s.jsx)(K,{errors:null!==(e=u.errors)&&void 0!==e?e:null})]});default:return n.logging.error("Unknown message role",{message:u}),null}},[u,p,c]);return u?(0,s.jsxs)("div",{className:(0,l.cn)("group flex flex-col pb-4 pr-2",{"pb-20":o&&"aiMessage"===u.type}),"data-message-id":u.id,"data-message-edit-id":ar(u),"data-langsmith-url":an(u),style:{minHeight:o&&d?d+"px":"auto"},children:[(0,s.jsx)(tU,{message:u,previousMessageId:a}),(0,s.jsx)("div",{className:(0,l.cn)({"pl-2":"userMessage"!==u.type,"pl-1 md:pl-0":"aiMessage"===u.type}),children:h})]}):null});as.displayName="ChatItem";let ar=e=>{if("aiMessage"===e.type)return e.editId},an=e=>{if("aiMessage"===e.type)return e.langsmithUrl}},2784:function(e,t,a){"use strict";a.d(t,{t:function(){return tt}});var s=a(57437),r=a(46214),n=a(2265),l=a(26438),i=a(62869),o=a(57346);let d="agent-mode-info-dismissed",c=()=>{try{let e=localStorage.getItem(d);if(!e)return!0;let t=parseInt(e,10);return Date.now()-t>=2592e5}catch(e){return!0}},u=()=>{try{localStorage.setItem(d,Date.now().toString())}catch(e){}},m=()=>{let{agentModeEnabled:e}=(0,l.v)(),[t,a]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{a(e&&c())},[e]),t)?(0,s.jsx)("div",{className:"relative flex w-full flex-col rounded-t-3xl border border-b-0 border-muted-border bg-background",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-6 pl-4 pr-2 pt-2",children:[(0,s.jsx)("span",{className:"text-sm font-normal text-foreground",children:"Agent (Beta) costs adapt to task complexity"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(i.z,{onClick:()=>{window.open("https://lovable.dev/blog/agent-mode-beta","_blank","noopener,noreferrer")},size:"sm",variant:"affirmative",children:"Read more"}),(0,s.jsx)("button",{type:"button",className:"group flex h-7 w-7 items-center justify-center hover:bg-transparent",onClick:()=>{a(!1),u()},children:(0,s.jsx)(o.Z,{name:"close",size:"small",className:"text-muted-foreground"})})]})]})}):null};var p=a(74026),h=a(20653),f=a(25658),g=a(55157),v=a(23590),x=a(55721),b=a(35354),y=a(2043),j=a(49284),E=a(94508),w=a(62380);let N=e=>{let{onFileUpload:t}=e,[a,l]=(0,n.useState)(!1),{isMac:i}=(0,b.Z)(),{openSettings:d}=(0,g.r)(),{canEdit:c}=(0,y.t)(),u=(0,v.G)(),m=(0,f.z)(e=>e.showHistory),{setShowHistory:p}=(0,f.VF)();return(0,s.jsxs)(x.h_,{open:a,onOpenChange:l,children:[(0,s.jsx)(x.$F,{asChild:!0,children:(0,s.jsx)("button",{className:(0,E.cn)("flex size-6 items-center justify-center rounded-full border border-muted-border text-muted-foreground outline-none duration-150 ease-out","shrink-0 transition-colors hover:bg-muted-hover",a&&"bg-muted-active"),children:(0,s.jsx)(o.Z,{name:"add",size:"small",className:(0,E.cn)("transition-transform",a&&"rotate-[135deg]")})})}),(0,s.jsxs)(x.AW,{align:"start",className:"min-w-[240px]",children:[u&&(0,s.jsxs)(x.Xi,{onClick:()=>d("github"),children:[(0,s.jsx)(h.wGg,{}),(0,s.jsx)("p",{children:"GitHub"})]}),(0,s.jsxs)(x.Xi,{onClick:()=>{m||r.ZP.capture(j.SL.TABS.HISTORY_OPENED),p(e=>!e)},children:[(0,s.jsx)(o.Z,{name:"history_2"}),(0,s.jsx)("p",{children:"History"})]}),c&&(0,s.jsxs)(x.Xi,{onClick:()=>d("knowledge"),children:[(0,s.jsx)(o.Z,{name:"school"}),(0,s.jsx)("p",{children:"Knowledge"})]}),c&&(0,s.jsxs)(x.Xi,{onClick:()=>d("project"),children:[(0,s.jsx)(o.Z,{name:"settings"}),(0,s.jsx)("p",{children:"Project Settings"}),i?(0,s.jsx)(x.KM,{className:"hidden sm:flex",children:"⌘."}):(0,s.jsx)(x.KM,{className:"hidden sm:flex",children:"Ctrl."})]}),u&&(0,s.jsxs)(x.Xi,{onClick:()=>d("supabase"),children:[(0,s.jsx)(w.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"}),(0,s.jsx)("p",{children:"Supabase"})]}),(0,s.jsx)(x.VD,{}),(0,s.jsxs)(x.Xi,{onClick:t,children:[(0,s.jsx)(o.Z,{name:"add_photo_alternate"}),(0,s.jsx)("p",{children:"Attach"})]})]})]})};var _=a(93681),C=a(97752),k=a(48614),S=a(1188),T=a(50273),A=a(27410),I=a(5635);let L=e=>{let{elementType:t}=e,a=(0,I.a)(t);return a?(0,s.jsx)(o.Z,{name:a,fill:"white",className:"size-4"}):null},R=(0,n.memo)(()=>{let e=(0,T.UC)(e=>e.selectedElements),{removeSelectedElement:t}=(0,T.S9)(),a=e=>{var t,a;return"Line ".concat(e.lineNumber," in ").concat(null===(a=e.filePath)||void 0===a?void 0:null===(t=a.split)||void 0===t?void 0:t.call(a,"/").pop())},[r,l]=(0,n.useState)(null),i=(0,n.useCallback)(()=>{r&&t(r)},[r,t]);return(null==e?void 0:e.length)?(0,s.jsx)("div",{className:"bg-transparent",children:(0,s.jsx)("ul",{className:"flex flex-wrap gap-2",children:(0,s.jsx)(k.M,{mode:"popLayout",children:e.map(e=>(0,s.jsx)(S.E.li,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6,transition:{duration:.15}},transition:{duration:.1,ease:[.5,1,.89,1],opacity:{duration:.1}},layoutId:"".concat(e.filePath,"-").concat(e.lineNumber),children:(0,s.jsx)(A.Z,{label:a(e),side:"top",children:(0,s.jsxs)("button",{className:"flex h-full w-full cursor-pointer items-center gap-0.5 rounded-md p-1 pr-2 hover:bg-background",onMouseEnter:()=>l(e),onMouseLeave:()=>l(null),onClick:i,children:[(0,s.jsx)(k.M,{mode:"wait",children:(0,s.jsx)(S.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-shrink-0",children:r!==e?(0,s.jsx)(L,{elementType:e.elementType}):(0,s.jsx)(o.Z,{name:"close",size:"small"})},r===e?"close":"element")}),(0,s.jsx)("span",{className:"flex-grow select-none truncate text-left text-xs",children:"".concat(e.elementType)})]})})},"".concat(e.filePath,"-").concat(e.lineNumber)))})})}):null});R.displayName="ChatInputSelectElementsRow",(0,n.memo)(e=>{var t,a;let{element:r,onRemoveElement:l}=e,[i,d]=(0,n.useState)(!1);return(0,s.jsx)(A.Z,{label:"Line ".concat(r.lineNumber," in ").concat(null===(a=r.filePath)||void 0===a?void 0:null===(t=a.split)||void 0===t?void 0:t.call(a,"/").pop()),side:"top",children:(0,s.jsxs)("button",{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),className:"group/select-element flex h-full w-full cursor-pointer items-center gap-0.5 rounded-md p-1 pr-2 hover:bg-background",onClick:()=>l(r),children:[(0,s.jsx)(k.M,{mode:"wait",children:(0,s.jsx)(S.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-shrink-0",children:i?(0,s.jsx)(o.Z,{name:"close",size:"small"}):(0,s.jsx)(L,{elementType:r.elementType})},i?"close":"element")}),(0,s.jsx)("span",{className:"flex-grow select-none truncate text-left text-xs",children:"".concat(r.elementType)})]})})}).displayName="ChatInputSelectElement";var D=a(71830),P=a(61160),M=a(74746),O=a(90045),z=a(57054),U=a(81103);let F="chat-mode-nudge-last-shown",K=()=>{try{let e=localStorage.getItem(F);if(!e)return!0;let t=parseInt(e,10);return Date.now()-t>=12096e5}catch(e){return!0}},Z=()=>{try{localStorage.setItem(F,Date.now().toString())}catch(e){}},W=e=>{let{projectId:t}=e,{isAgentModeDefault:a}=(0,l.v)(),d=(0,O.hT)(e=>e.chatMode===O.jE.CHAT_ONLY),{setChatMode:c}=(0,O.VK)(),u=(0,M.iY)(),[m,p]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{p(!!(null==u?void 0:u.isStuck)&&!d&&!(null==u?void 0:u.chatOnly)&&K())},[u,d]),(0,s.jsxs)(z.J2,{open:m,children:[(0,s.jsx)(z.xo,{asChild:!0,children:(0,s.jsx)("div",{children:(0,s.jsxs)(U.u,{children:[(0,s.jsx)(U.aJ,{asChild:!0,children:(0,s.jsxs)(i.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{r.ZP.capture("chat_mode_toggled",{state:d,project_id:t,stuck_popover_shown:m}),p(!1),m&&Z(),d&&Z(),c(d?a?O.jE.AGENT:O.jE.DEFAULT:O.jE.CHAT_ONLY)},className:(0,E.cn)("flex h-6 gap-1 rounded-full border py-0 pl-1.5 pr-2.5 font-normal text-muted-foreground hover:border-border hover:bg-transparent md:hover:bg-accent md:hover:text-muted-foreground",{"border-affirmative-primary bg-affirmative-primary text-affirmative-primary-foreground hover:border-affirmative-primary hover:bg-affirmative-primary hover:text-affirmative-primary-foreground md:hover:bg-affirmative-primary/90 md:hover:text-affirmative-primary-foreground":d}),children:[(0,s.jsx)(o.Z,{name:"emoji_objects",size:"small"}),"Chat"]})}),(0,s.jsx)(U._v,{className:"hidden max-w-[35ch] md:flex",children:(0,s.jsx)("p",{children:"Chat without making edits to your project."})})]})})}),(0,s.jsxs)(z.yk,{children:[(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("p",{className:"font-medium text-popover-foreground",children:"Feeling stuck?"}),(0,s.jsx)(o.Z,{name:"close",className:"cursor-pointer text-muted-foreground",onClick:()=>{p(!1),c(O.jE.DEFAULT),Z(),r.ZP.capture("stuck_popover_dismissed",{project_id:t,message_id:null==u?void 0:u.id})}})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Use chat mode to create a plan."})]})]})};var H=a(29991),V=a(27466),G=a(96279),X=a(65666);let B=e=>{let{className:t,iconSize:a="default",disabled:r=!1,isSendingDisabled:l=!1}=e,i=(0,X.v)(),{showStopAction:d,mutation:c}=(0,G.q)({projectId:null!=i?i:void 0}),u=(0,n.useCallback)(async()=>{await c.mutateAsync()},[c]);return i&&(d||c.isPending)?(0,s.jsx)("button",{type:"button",className:(0,E.cn)("flex size-6 items-center justify-center rounded-full bg-foreground text-background transition-opacity duration-150 ease-out disabled:cursor-not-allowed disabled:opacity-50",t),disabled:c.isPending,onClick:u,children:(0,s.jsx)(o.Z,{name:"stop",size:a})}):(0,s.jsx)("button",{id:"chatinput-send-message-button",type:"submit",className:(0,E.cn)("flex size-6 items-center justify-center rounded-full bg-foreground text-background transition-opacity duration-150 ease-out disabled:cursor-not-allowed disabled:opacity-50",t),disabled:l||r,children:(0,s.jsx)(o.Z,{name:"arrow_upward_alt_600",size:a})})};var q=a(27132),Y=a(44481);let J=e=>{let t=(0,n.useMemo)(()=>{var e,t;return(null===(t=navigator)||void 0===t?void 0:null===(e=t.userAgentData)||void 0===e?void 0:e.platform)==="macOS"||navigator.platform.toLowerCase().includes("mac")},[]),a=e=>{let a={mod:t?"⌥":"Alt",cmd:t?"⌘":"Ctrl",meta:t?"⌘":"Ctrl",shift:t?"⇧":"Shift",alt:t?"⌥":"Alt",ctrl:t?"⌃":"Ctrl",return:t?"↵":"Enter",left:"←",right:"→",up:"↑",down:"↓"},s=e.toLowerCase();return s in a?a[s]:e.toUpperCase()},s=e=>e.split("+").map(e=>e.trim()).map(a).join("");return"string"==typeof e?s(e):e.map(e=>s(e)).join("+")},Q=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let s=J(t[0]);return(0,Y.y1)(...t),s};var $=a(16054),ee=function(){let e=navigator.userAgent.toLowerCase();return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e)},et=a(3813),ea=a(29328),es=a(63420),er=a(41135),en=a(6809),el=a(57492),ei=a(24032);let eo=e=>{let{projectId:t}=e,{store:a}=(0,ei.WR)(),r=a(e=>e.message),[l,d]=(0,n.useState)([]),[c,u]=(0,n.useState)(!1),{openSettings:m}=(0,g.r)(),p=(0,en.N)(),h=!!p;return((0,n.useEffect)(()=>{if(r){let e=(0,el.su)(r);d(e),e.length>0&&u(!1)}else d([])},[r]),0===l.length||c)?null:(0,s.jsx)("div",{className:"relative flex w-full flex-col rounded-t-lg border border-b-0 border-orange-500/50 bg-orange-500/10",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2 py-2 pb-4 pl-3 pr-2",children:[(0,s.jsxs)("div",{className:"flex flex-1 items-start gap-2",children:[(0,s.jsx)(o.Z,{name:"info",className:"mt-0.5 text-base text-orange-500","aria-label":"Warning"}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Sensitive API key detected"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[h?"API keys detected. Ask Lovable to store these as secrets instead of pasting them in messages.":"API keys detected in your message. Connect Supabase first, then ask Lovable to store them securely instead.",(0,s.jsxs)("div",{className:"my-2",children:[!h&&(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{m("supabase")},children:[(0,s.jsx)(er.xR.Supabase,{className:"h-4 w-4"}),"Connect Supabase"]}),p&&(0,s.jsx)(i.z,{variant:"outline",size:"sm",asChild:!0,children:(0,s.jsxs)("a",{href:"https://supabase.com/dashboard/project/".concat(p.id,"/settings/functions"),target:"_blank",rel:"noreferrer",children:[(0,s.jsx)(o.Z,{name:"key",className:"h-4 w-4 text-xs"}),(0,s.jsx)("span",{className:"text-xs",children:"Manage Secrets"}),(0,s.jsx)(o.Z,{name:"arrow_outward",className:"h-4 w-4 text-xs text-muted-foreground"})]})}),(0,s.jsx)(i.z,{variant:"link",size:"sm",asChild:!0,children:(0,s.jsxs)("a",{href:"https://docs.lovable.dev/features/security",target:"_blank",rel:"noreferrer",children:[(0,s.jsx)(o.Z,{name:"help",className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Learn more about security"}),(0,s.jsx)(o.Z,{name:"arrow_outward",className:"h-4 w-4 text-muted-foreground"})]})})]})]})]})]}),(0,s.jsx)("button",{type:"button",className:"group flex h-7 w-7 items-center justify-center hover:bg-transparent",onClick:()=>{u(!0)},children:(0,s.jsx)(o.Z,{name:"close",className:"h-3 w-3 text-muted-foreground group-hover:opacity-50"})})]})})};var ed=a(24853),ec=a(26178),eu=a(49027),em=a(26110),ep=a(60254),eh=a(61312),ef=a(35974),eg=a(76818),ev=a(32582),ex=a(92259),eb=a(82959),ey=a(18081),ej=a(93673),eE=a(40756),ew=a(27339),eN=a(64266),e_=a(36254),eC=a(89651),ek=a(52558),eS=a(884),eT=a(48541),eA=a(26815),eI=a(9259),eL=a(74991),eR=a(53647),eD=a(19485),eP=a(74950),eM=a(7342);let eO=e=>{let{title:t,children:a,disabled:r}=e;return(0,s.jsxs)("div",{className:(0,E.cn)("grid grid-cols-[100px_1fr]",{hidden:r}),children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"py-2 text-sm font-medium text-muted-foreground",children:t})}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:a})]})},ez=e=>{let{children:t,disabled:a}=e;return(0,s.jsx)("div",{className:(0,E.cn)("border-px flex flex-col gap-2",{hidden:a}),children:t})};var eU=a(23518);let eF=e=>{var t;let{inputValue:a,cursorPosition:s}=e;if(!a.trim()||null===s)return null;let r=a.substring(0,s),n=a.substring(s),l=r.split(/\s+/),i=(l[l.length-1]||"")+((null===(t=n.match(/^[^\s]*/))||void 0===t?void 0:t[0])||"");if(0===i.length)return null;let o=i.lastIndexOf(":");if(-1!==o){let e=i.substring(0,o+1),t=i.substring(o+1),a=t.length>0;return{completeWord:i,hasModifier:!0,modifier:e,classAfterColon:t,hasClassAfterColon:a}}return{completeWord:i,hasModifier:!1,modifier:"",classAfterColon:"",hasClassAfterColon:!1}},eK=e=>{let{wordInfo:t,getAutocomplete:a,limit:s}=e;if(!t)return{suggestions:[],shouldShow:!1};let{hasModifier:r,modifier:n,classAfterColon:l,hasClassAfterColon:i,completeWord:o}=t;if(r){if(i){let e=a(l,s).map(e=>n+e);return{suggestions:e,shouldShow:e.length>0}}return{suggestions:[],shouldShow:!1}}{let e=a(o,s);return{suggestions:e,shouldShow:e.length>0}}},eZ=e=>{var t;let{element:a,currentClassName:r,disabled:l,isOpen:i,onUpdateClassName:o}=e,{getAutocomplete:d}=(0,eD.C)(),[c,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)(""),[h,f]=(0,n.useState)(null),[g,v]=(0,n.useState)(""),x=(0,n.useRef)(null),b=(0,n.useRef)(null),y=(0,n.useRef)([]),j=(0,n.useCallback)(e=>{v(e)},[]),w=(0,n.useCallback)(()=>{let e=x.current;e&&f(e.selectionStart||0)},[]);(0,n.useEffect)(()=>{let e=e=>{let t=e.target,a=b.current;!a||a.contains(t)||t instanceof Element&&(t.closest('[role="dialog"]')||t.closest("[cmdk-root]")||t.closest("[data-radix-popper-content-wrapper]"))||u(!1)};if(c)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[c]);let N=(0,n.useMemo)(()=>eK({wordInfo:eF({inputValue:m,cursorPosition:h}),getAutocomplete:d,limit:10}).suggestions,[m,h,d]),_=(0,n.useCallback)(e=>{let t=x.current;if(!t||null===h)return;let s=m.substring(0,h),r=m.substring(h),n=s.split(/\s+/),l=n[n.length-1]||"",i=r.match(/^[^\s]*/),d=(null==i?void 0:i[0])||"",c=r.substring(d.length),g=s.substring(0,s.length-l.length),v=(g+e+" "+c).replace(/\s+/g," ");p(v),o({element:a,className:v}),u(!1),setTimeout(()=>{t.focus();let a=g.length+e.length+1;t.setSelectionRange(a,a),f(a)},0)},[m,h,a,o]),C=(0,n.useCallback)(()=>{u(eK({wordInfo:eF({inputValue:m,cursorPosition:h}),getAutocomplete:d,limit:10}).shouldShow)},[m,h,d]);(0,n.useEffect)(()=>{p(r||"")},[r]),(0,n.useEffect)(()=>{C()},[C]),(0,n.useEffect)(()=>{c&&N.length>0?v(N[0]):v("")},[c,N]);let k=(0,n.useMemo)(()=>N.indexOf(g),[N,g]);return(0,n.useEffect)(()=>{if(k>=0&&y.current[k]){var e;null===(e=y.current[k])||void 0===e||e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[k]),(0,s.jsx)(S.E.div,{initial:{opacity:0,height:0},animate:{opacity:i?1:0,height:i?"auto":0},transition:{duration:.15,bounce:0},className:"flex flex-row gap-2",children:(0,s.jsx)("div",{ref:b,className:"relative w-full pb-12 pt-2",children:(0,s.jsxs)(z.J2,{open:!0,children:[(0,s.jsx)(z.xo,{asChild:!0,children:(0,s.jsx)(eg.g,{ref:x,disabled:l,value:m,className:"w-full bg-input outline-none ring-offset-background placeholder:text-muted-foreground focus-visible:ring-1 focus-visible:ring-offset-0",placeholder:"Enter Tailwind classes...",onChange:e=>{let t=e.target.value;p(t),o({element:a,className:t}),f(e.target.selectionStart||0)},onKeyUp:w,onClick:w,onSelect:w,onKeyDown:e=>{if("Escape"===e.key)u(!1);else if("Enter"===e.key)g&&N.includes(g)&&(e.preventDefault(),_(g));else if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();let t=(N.indexOf(g)+("ArrowDown"===e.key?1:-1)+N.length)%N.length;j(N[t]||"")}setTimeout(w,0)},onFocus:e=>{f(e.currentTarget.selectionStart||0)}})}),(0,s.jsx)(z.yk,{className:(0,E.cn)("max-h-40 w-full overflow-y-auto p-0",{hidden:!c}),side:"bottom",align:"start",style:{width:null===(t=x.current)||void 0===t?void 0:t.offsetWidth},children:(0,s.jsx)(eU.mY,{autoFocus:!1,value:g,onValueChange:j,children:(0,s.jsx)(eU.e8,{children:(0,s.jsx)(eU.fu,{children:N.map((e,t)=>(0,s.jsx)("div",{ref:e=>{y.current[t]=e},children:(0,s.jsx)(eU.di,{value:e,onSelect:()=>_(e),children:(0,s.jsx)("span",{className:"text-xs",children:e})})},e))})})})})]})})})};var eW=a(85474);let eH=e=>{let t,a;if(!e)return;let s=1;if(e.modifier){var r,n;s=(null===(r=e.modifier)||void 0===r?void 0:r.startsWith("["))&&(null===(n=e.modifier)||void 0===n?void 0:n.endsWith("]"))?parseFloat(e.modifier.replace(/[\[\]]/g,"")):parseInt(e.modifier)/100}if("inherit"===e.valueDef.raw)return;"transparent"===e.valueDef.raw&&(s=0),e.valueDef.raw.startsWith("#")?a=e.valueDef.raw:(t=e.valueDef.raw,a=e.value);let l=(0,eT.oo)(a);if(!l)return{name:t,hex:void 0};let i=(0,eT.vq)(l.r,l.g,l.b,s);return{name:t||i,hex:i,hexWithoutAlpha:(0,eT.vq)(l.r,l.g,l.b,1)}},eV={fontSize:{xs:"XS",base:"Body",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL","4xl":"4XL","5xl":"5XL","6xl":"6XL","7xl":"7XL","8xl":"8XL","9xl":"9XL"},borderRadius:{none:"None",DEFAULT:"Default",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL",full:"Full"}},eG=e=>{var t,a,l,d,c,u,m,p,h;let{element:f,disabled:g}=e,{authUser:v}=(0,ek.Eu)(),{currentClassName:x,ast:b}=(0,es.v)(),y=(0,I.B)(f),{handleImageChange:j,initializeClassName:w,handleUpdateClassName:N,handleUpdateClassNameAdvanced:_}=(0,eW.U)();(0,n.useEffect)(()=>{w(f,b)},[f,b,w]);let C=(0,ep.A7)(e=>e.addUpload),{theme:k,getRelevantTwClass:S,parse:T,classname:A}=(0,eD.O)(),L=(0,n.useMemo)(()=>{var e,t,a,s,r,n,l,i,o,d,c,u;if(!x)return;let m=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},p=S(x,"padding"),h=S(x,"paddingY"),f=S(x,"paddingX");return{paddingTop:null!==(n=null!==(r=m(null===(e=S(x,"paddingTop"))||void 0===e?void 0:e.value))&&void 0!==r?r:m(null==h?void 0:h.value))&&void 0!==n?n:m(null==p?void 0:p.value),paddingBottom:null!==(i=null!==(l=m(null===(t=S(x,"paddingBottom"))||void 0===t?void 0:t.value))&&void 0!==l?l:m(null==h?void 0:h.value))&&void 0!==i?i:m(null==p?void 0:p.value),paddingLeft:null!==(d=null!==(o=m(null===(a=S(x,"paddingLeft"))||void 0===a?void 0:a.value))&&void 0!==o?o:m(null==f?void 0:f.value))&&void 0!==d?d:m(null==p?void 0:p.value),paddingRight:null!==(u=null!==(c=m(null===(s=S(x,"paddingRight"))||void 0===s?void 0:s.value))&&void 0!==c?c:m(null==f?void 0:f.value))&&void 0!==u?u:m(null==p?void 0:p.value)}},[S,x]),R=(0,n.useMemo)(()=>{var e,t,a,s,r,n,l,i,o,d,c,u;if(!x)return;let m=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},p=S(x,"margin"),h=S(x,"marginY"),f=S(x,"marginX");return{marginTop:null!==(n=null!==(r=m(null===(e=S(x,"marginTop"))||void 0===e?void 0:e.value))&&void 0!==r?r:m(null==h?void 0:h.value))&&void 0!==n?n:m(null==p?void 0:p.value),marginBottom:null!==(i=null!==(l=m(null===(t=S(x,"marginBottom"))||void 0===t?void 0:t.value))&&void 0!==l?l:m(null==h?void 0:h.value))&&void 0!==i?i:m(null==p?void 0:p.value),marginLeft:null!==(d=null!==(o=m(null===(a=S(x,"marginLeft"))||void 0===a?void 0:a.value))&&void 0!==o?o:m(null==f?void 0:f.value))&&void 0!==d?d:m(null==p?void 0:p.value),marginRight:null!==(u=null!==(c=m(null===(s=S(x,"marginRight"))||void 0===s?void 0:s.value))&&void 0!==c?c:m(null==f?void 0:f.value))&&void 0!==u?u:m(null==p?void 0:p.value)}},[S,x]),D=eH(S(x,"textColor")),P=eH(S(x,"backgroundColor")),[M,O]=(0,eC.Z)("lov_vis_advancedOpen",{defaultValue:!1}),z=(0,n.useRef)({}),[F,K]=(0,n.useState)({}),Z=(0,n.useCallback)(e=>{var t;let a=e.property,s=Date.now();K(t=>({...t,[a]:e.value})),z.current[a]&&cancelAnimationFrame(z.current[a].rafId);let r=()=>{let e=z.current[a];if(e){let t=T(A(e.immediateValue));if("error"===t.kind)return;let r=t.valueDef.raw,n=[e.immediateValue];if("backgroundColor"===e.immediateValue.property&&"button"===y&&r.split("-").length>1){let[e,t]=r.split("-"),a=parseInt(t)-100;if((a=100*Math.floor(a/100))>0){let t="".concat(e,"-").concat(a);n.push({property:"backgroundColor",value:t,variants:[{kind:"named",type:"interaction",value:"hover"}]})}}N({element:f,classObj:n}),z.current[a].lastUpdateTime=s,delete z.current[a]}};z.current[a]={rafId:0,lastValue:e,immediateValue:e,lastUpdateTime:(null===(t=z.current[a])||void 0===t?void 0:t.lastUpdateTime)||0},z.current[a].rafId=requestAnimationFrame(()=>{r()})},[A,f,y,N,T]),W=(0,n.useCallback)((e,t)=>{var a;return null!==(a=F[e])&&void 0!==a?a:t},[F]),H=null===(t=S(x,"textAlign"))||void 0===t?void 0:t.value;return(0,s.jsxs)("div",{className:(0,E.cn)("visual-edits-editor",{"visual-edits-editor-enabled":!g}),children:[null===x?(0,s.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,s.jsx)("p",{className:"text-sm",children:"This element can't be styled. You can edit it by resetting the styling or chatting."}),(0,s.jsx)(i.z,{onClick:()=>_({element:f,className:"",reset:!0}),variant:"secondary",children:"Reset styling"})]}):(0,s.jsxs)("div",{className:"flex flex-grow flex-col gap-4",children:[(0,s.jsxs)(ez,{disabled:"img"===y,children:[(0,s.jsx)(eO,{title:"Margin",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(eI.R,{max:240,className:"flex-grow rounded-md bg-input",value:null!==(u=null==R?void 0:R.marginLeft)&&void 0!==u?u:0,placeholder:"X margin",name:"marginX",disabled:g,onChange:e=>(null==R?void 0:R.marginLeft)!==e&&Z({property:"marginX",value:"".concat(e,"px")}),leftIcon:(0,s.jsx)(eb.Z,{className:"size-4 fill-muted-foreground"})}),(0,s.jsx)(eI.R,{max:240,value:null!==(m=null==R?void 0:R.marginTop)&&void 0!==m?m:0,className:"flex-grow rounded-md bg-input",placeholder:"Y margin",name:"marginY",disabled:g,onChange:e=>(null==R?void 0:R.marginTop)!==e&&Z({property:"marginY",value:"".concat(e,"px")}),leftIcon:(0,s.jsx)(ex.Z,{className:"size-4 fill-muted-foreground"})})]})}),(0,s.jsx)(eO,{title:"Padding",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(eI.R,{max:240,className:"flex-grow rounded-md bg-input",value:null!==(p=null==L?void 0:L.paddingLeft)&&void 0!==p?p:0,placeholder:"X padding",name:"paddingX",disabled:g,onChange:e=>(null==L?void 0:L.paddingLeft)!==e&&Z({property:"paddingX",value:"".concat(e,"px")}),leftIcon:(0,s.jsx)(ey.Z,{className:"size-4 fill-muted-foreground"})}),(0,s.jsx)(eI.R,{max:240,value:null!==(h=null==L?void 0:L.paddingTop)&&void 0!==h?h:0,className:"flex-grow rounded-md bg-input",placeholder:"Y padding",name:"paddingY",disabled:g,onChange:e=>(null==L?void 0:L.paddingTop)!==e&&Z({property:"paddingY",value:"".concat(e,"px")}),leftIcon:(0,s.jsx)(ej.Z,{className:"size-4 fill-muted-foreground"})})]})})]}),(0,s.jsxs)(ez,{disabled:"text"!==y&&"button"!==y,children:[(0,s.jsx)(eO,{title:"Font size",children:(0,s.jsxs)(eR.Ph,{name:"fontSize",disabled:g,onValueChange:e=>{e&&(r.ZP.capture("visual_edits:font_size_changed"),Z({property:"fontSize",value:e}))},onOpenChange:e=>{if(!e){var t;N({element:f,classObj:[{property:"fontSize",value:(null===(t=S(x,"fontSize"))||void 0===t?void 0:t.valueDef.raw)||"base"}]})}},value:(null===(a=S(x,"fontSize"))||void 0===a?void 0:a.valueDef.raw)||"base",children:[(0,s.jsx)(eR.i4,{className:"bg-input",children:(0,s.jsx)(eR.ki,{placeholder:"Select font size"})}),(0,s.jsx)(eR.Bw,{children:Object.entries((null==k?void 0:k.fontSize)||{}).map(e=>{var t;let[a,r]=e;return(0,s.jsx)(eR.Ql,{onFocus:e=>{let t=e.target.getAttribute("data-value");t&&requestAnimationFrame(()=>{N({element:f,classObj:[{property:"fontSize",value:t}],preview:!0})})},value:a,"data-value":a,children:null!==(t=eV.fontSize[a])&&void 0!==t?t:a},a)})})]})}),(0,s.jsx)(eO,{title:"Font weight",children:(0,s.jsxs)(eR.Ph,{name:"fontWeight",disabled:g,onValueChange:e=>{e&&(r.ZP.capture("visual_edits:font_weight_changed"),Z({property:"fontWeight",value:e}))},onOpenChange:e=>{if(!e){var t;N({element:f,classObj:[{property:"fontWeight",value:(null===(t=S(x,"fontWeight"))||void 0===t?void 0:t.valueDef.raw)||"normal"}]})}},value:null===(l=S(x,"fontWeight"))||void 0===l?void 0:l.valueDef.raw,children:[(0,s.jsx)(eR.i4,{className:"bg-input",name:"fontWeight",children:(0,s.jsx)(eR.ki,{placeholder:"Select weight"})}),(0,s.jsx)(eR.Bw,{className:"visual-edits_font-weight-selector",children:Object.entries((null==k?void 0:k.fontWeight)||{}).filter(e=>"black"!==e[0]).map(e=>{let[t,a]=e;return(0,s.jsx)(eR.Ql,{"data-value":t,value:t,onFocus:e=>{let t=e.target.getAttribute("data-value");t&&requestAnimationFrame(()=>{N({element:f,classObj:[{property:"fontWeight",value:t}],preview:!0})})},children:(0,s.jsx)("span",{className:"capitalize",children:t})},t)})})]})}),(0,s.jsx)(eO,{title:"Color",children:(0,s.jsx)(eS.z,{disabled:g,presetColors:null==k?void 0:k.colors,color:W("textColor",null==D?void 0:D.hex)||"transparent",onChange:e=>{e&&(r.ZP.capture("visual_edits:text_color_changed"),Z({property:"textColor",value:e||"inherit"}))},children:(0,s.jsxs)(i.z,{variant:"outline",disabled:g,className:"flex h-9 w-full justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,s.jsxs)("div",{className:"relative mr-2 h-4 w-4 overflow-hidden rounded-full",children:[(0,s.jsx)("div",{className:"absolute inset-0",children:(0,s.jsx)(eM.V,{})}),(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==D?void 0:D.hexWithoutAlpha}}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==D?void 0:D.hex}})]}),(0,s.jsx)("span",{className:"truncate",children:(null==D?void 0:D.name)||"Inherit"})]})},"".concat(f.filePath,":").concat(f.lineNumber))}),(0,s.jsx)(eO,{title:"Alignment",children:(0,s.jsxs)(eL.E,{className:"flex flex-row justify-end gap-2",value:H,onValueChange:e=>Z({property:"textAlign",value:e}),children:[(0,s.jsxs)(eA.Label,{title:"Left",children:[(0,s.jsx)(eL.m,{value:"left",className:"peer rounded-full p-2",hidden:!0}),(0,s.jsx)(i.z,{variant:"outline",className:(0,E.cn)("bg-input p-2",{"bg-accent":"left"===H}),onClick:()=>Z({property:"textAlign",value:"left"}),children:(0,s.jsx)(eN.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,s.jsxs)(eA.Label,{title:"Center",children:[(0,s.jsx)(eL.m,{value:"center",className:"peer rounded-full p-2",hidden:!0}),(0,s.jsx)(i.z,{variant:"outline",className:(0,E.cn)("bg-input p-2",{"bg-accent":"center"===H}),onClick:()=>Z({property:"textAlign",value:"center"}),children:(0,s.jsx)(eE.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,s.jsxs)(eA.Label,{title:"Right",children:[(0,s.jsx)(eL.m,{value:"right",className:"peer rounded-full p-2",hidden:!0}),(0,s.jsx)(i.z,{variant:"outline",className:(0,E.cn)("bg-input p-2",{"bg-accent":"right"===H}),onClick:()=>Z({property:"textAlign",value:"right"}),children:(0,s.jsx)(e_.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,s.jsxs)(eA.Label,{title:"Justify",children:[(0,s.jsx)(eL.m,{value:"justify",className:"peer rounded-full p-2",hidden:!0}),(0,s.jsx)(i.z,{variant:"outline",className:(0,E.cn)("bg-input p-2",{"bg-accent":"justify"===H}),onClick:()=>Z({property:"textAlign",value:"justify"}),children:(0,s.jsx)(ew.Z,{className:"size-4 fill-muted-foreground"})})]})]})})]}),(0,s.jsxs)(ez,{disabled:"div"!==y&&"button"!==y,children:[(0,s.jsx)(eO,{title:"Background",children:(0,s.jsx)(eS.z,{disabled:g,color:W("backgroundColor",null==P?void 0:P.hex)||"transparent",onChange:e=>{e&&(r.ZP.capture("visual_edits:background_color_changed"),Z({property:"backgroundColor",value:e||"inherit"}))},presetColors:null==k?void 0:k.colors,children:(0,s.jsxs)(i.z,{variant:"outline",disabled:g,className:"flex h-9 w-full items-center justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,s.jsxs)("div",{className:"relative mr-2 h-4 w-4 overflow-hidden rounded-full",children:[(0,s.jsx)("div",{className:"absolute inset-0",children:(0,s.jsx)(eM.V,{})}),(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==P?void 0:P.hexWithoutAlpha}}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==P?void 0:P.hex}})]}),(0,s.jsx)("span",{className:"truncate",children:(null==P?void 0:P.name)||"Inherit"})]})},"".concat(f.filePath,":").concat(f.lineNumber))}),(0,s.jsx)(eO,{title:"Border radius",children:(0,s.jsxs)(eR.Ph,{disabled:g,onValueChange:e=>e&&Z({property:"borderRadius",value:e}),value:(null===(d=S(x,"borderRadius"))||void 0===d?void 0:d.valueDef.raw)||"none",children:[(0,s.jsx)(eR.i4,{className:"bg-input hover:bg-input",children:(0,s.jsx)(eR.ki,{placeholder:"Select border radius"})}),(0,s.jsx)(eR.Bw,{children:Object.entries((null==k?void 0:k.borderRadius)||{}).map(e=>{var t;let[a,r]=e;return(0,s.jsx)(eR.Ql,{value:a,children:null!==(t=eV.borderRadius[a])&&void 0!==t?t:"Default"},a)})})]})})]}),(0,s.jsxs)(ez,{disabled:"img"!==y,children:[(0,s.jsx)(eO,{title:"Image",children:(0,ev.cB)(f,b,"src")?(0,s.jsx)(eP.r,{disabled:g||!(0,ev.cB)(f,b,"src"),onUrlSubmitted:e=>j(f,e),onImagesUploaded:e=>{e.length>0&&(r.ZP.capture("visual_edits:image_uploaded"),C({dir_name:v.uid,file_name:e[0].name,type:e[0].type,id:e[0].id}),j(f,"/lovable-uploads/".concat(e[0].name),e[0].downloadUrl))}}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"This element contains dynamic elements and its image cannot be manually edited. Please use the chat to change the image."})}),(0,s.jsx)(eO,{title:"Resize",children:(0,s.jsxs)(eR.Ph,{disabled:g,onValueChange:e=>e&&Z({property:"objectFit",value:e}),value:((null===(c=S(x,"objectFit"))||void 0===c?void 0:c.valueDef.raw)||"object-none").replace("object-",""),children:[(0,s.jsx)(eR.i4,{className:"bg-input",children:(0,s.jsx)(eR.ki,{placeholder:"Select border radius"})}),(0,s.jsxs)(eR.Bw,{className:"bg-popover",children:[(0,s.jsx)(eR.Ql,{value:"contain",children:"Contain"}),(0,s.jsx)(eR.Ql,{value:"cover",children:"Cover"}),(0,s.jsx)(eR.Ql,{value:"fill",children:"Fill"}),(0,s.jsx)(eR.Ql,{value:"none",children:"None"}),(0,s.jsx)(eR.Ql,{value:"scale-down",children:"Scale down"})]})]})})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-row justify-between pb-2",children:[(0,s.jsxs)(i.z,{variant:"ghost",size:"sm",className:(0,E.cn)("h-6 py-0.5 pl-0.5 text-xs transition duration-300 hover:bg-secondary",{"!opacity-0":null===x}),onClick:()=>{O(!M),r.ZP.capture("visual_edits:advanced_clicked")},disabled:null===x,children:[(0,s.jsx)(o.Z,{name:"chevron_right",size:"small",className:(0,E.cn)("transition-transform duration-150 ease-in-out",{"rotate-90":M})}),"Advanced"]}),(0,s.jsx)("div",{className:(0,E.cn)("flex flex-row gap-2",{"opacity-0":!M}),children:(0,s.jsxs)(U.u,{instant:!0,children:[(0,s.jsx)(U.aJ,{children:(0,s.jsx)(o.Z,{name:"help",size:"small",className:"text-muted-foreground"})}),(0,s.jsx)(U._v,{children:(0,s.jsx)("p",{children:"Enter custom Tailwind classes"})})]})})]}),(0,s.jsx)(eZ,{element:f,currentClassName:x,disabled:g,isOpen:M,onUpdateClassName:_})]})},eX=e=>{var t;let{element:a,disabled:r=!1}=e,l=(0,I.B)(a),{handleTextChange:i,handleRemoveNode:d,handleDuplicateNode:c,undoLastOperation:u,initializeClassName:m}=(0,eW.U)(),{ast:p,currentClassName:h,hasInitialCode:f}=(0,es.v)(),g=(0,n.useMemo)(()=>(0,ev.H2)(a,p),[a,p]);(0,n.useEffect)(()=>{m(a,p)},[a,p,m]),(0,n.useEffect)(()=>{let e=e=>{if(e.data.type===ed.C.KEYBIND){let{compositeKey:t}=e.data.payload}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[a,c,d,u]);let v=(0,I.a)(l),x=(0,ea.f6)(e=>"live"!==e.visibleMode&&"live"===e.targetMode),b=(0,ed.p)(),y=(0,T.UC)(e=>e.selectedElements[0]),j=(0,s.jsxs)(U.u,{instant:!0,children:[(0,s.jsx)(eh.aJ,{className:"w-fit",children:(0,s.jsxs)(ef.C,{variant:"outline",className:"group relative flex w-fit cursor-pointer flex-row items-center gap-2 px-3 py-1 text-base font-medium",onClick:()=>{b({type:ed.C.GET_PARENT_ELEMENT,payload:{id:{filePath:y.filePath,lineNumber:y.lineNumber,col:y.col}}})},children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.Z,{name:"arrow_top_left",size:"small",className:"absolute left-0 top-0 opacity-0 transition-opacity duration-200 group-hover:opacity-100"}),(0,s.jsx)(o.Z,{name:v,className:(0,E.cn)("size-4 fill-foreground","transition-opacity duration-200 group-hover:opacity-0")})]}),(null===(t=a.attrs)||void 0===t?void 0:t["data-component-name"])||a.elementType]})}),(0,s.jsx)(U._v,{children:(0,s.jsx)("p",{children:"Select parent"})})]});return x||!f?(0,s.jsx)("div",{className:"overflow-hidden px-1",children:(0,s.jsxs)("div",{className:"flex flex-grow flex-col gap-4",children:[j,(0,s.jsx)("div",{className:"flex items-center justify-center pb-16",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Waiting for Live Preview to start..."})})]})}):(0,s.jsx)("div",{className:"overflow-hidden px-1",children:(0,s.jsxs)("div",{className:"flex flex-grow flex-col gap-4",children:[j,g?(0,s.jsxs)(eO,{title:"Content",disabled:"text"!==l&&"button"!==l,children:[(0,s.jsx)(eg.g,{value:(0,eW.D)(a.textContent||""),disabled:!g||r,className:(0,E.cn)("resize-none text-base leading-snug placeholder-shown:text-ellipsis placeholder-shown:whitespace-nowrap","focus-visible:ring-0 focus-visible:ring-offset-0","max-h-[200px] scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]","h-auto border bg-input focus:bg-input",!g&&"hidden"),placeholder:"Enter text here",onChange:e=>i(a,e.target.value)}),(0,s.jsx)("p",{className:(0,E.cn)("text-xs text-muted-foreground",{hidden:g}),children:"This element contains dynamic elements so its text cannot be manually edited. Use the chat to change the text."})]}):("text"===l||"button"===l)&&(0,s.jsx)(eO,{title:"Content",children:(0,s.jsxs)("div",{className:"my-auto flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Change the text by prompting in the chat box, only static text can be edited instantly"}),(0,s.jsxs)(U.u,{instant:!0,children:[(0,s.jsx)(eh.aJ,{children:(0,s.jsx)(o.Z,{name:"help",size:"small",className:"inline-block-translate-y-[1px] ml-auto text-muted-foreground"})}),(0,s.jsx)(U._v,{children:"Content linked to backend or code. Ask AI to edit."})]})]})}),(0,s.jsx)(eG,{element:a,disabled:r||null===h})]})})},eB=()=>{let{selectedElements:e,canEdit:t}=(0,ec.H)(),{turnOffVisualEditing:a}=(0,T.S9)(),l=e[0],{syncCode:d,generateAst:c,hasUnsavedChanges:u,refreshPreview:m}=(0,es.v)(),{undoLastOperation:p,handleRemoveNode:h}=(0,eW.U)(),f=(0,ep.A7)(e=>e.clearPendingChanges),g=(0,ep.A7)(e=>e.clearUploads),{snapshot:v}=(0,ep.ag)(),[x,b]=(0,n.useState)(!1),y=(0,n.useCallback)(async()=>(r.ZP.capture("visual_edits:save_clicked"),b(!0),d(v.getPendingChanges()).then(()=>{b(!1),a()})),[v,d,a]);(0,Y.y1)("meta+z",e=>{e.preventDefault(),t&&p()}),(0,Y.y1)("meta+enter",e=>{e.preventDefault(),t&&y().finally(()=>{a()})}),(0,Y.y1)("escape",()=>{u?y().finally(()=>{a()}):a()});let[j,w]=(0,n.useState)(!1),N=(0,n.useCallback)(()=>{r.ZP.capture("visual_edits:discard_clicked"),f(),g(),m(),c()},[f,g,c,m]);(0,n.useEffect)(()=>{let e=e=>{if(e.data.type===ed.C.KEYBIND){let{compositeKey:s}=e.data.payload;switch(s){case"Meta+z":t&&p();break;case"Meta+Enter":t&&y();break;case"Escape":u?y().finally(()=>{a()}):a()}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t,y,N,u,a,p]);let _=(0,n.useCallback)(()=>{r.ZP.capture("visual_edits:discard_clicked"),f(),g(),m(),c(),a()},[f,g,c,a,m]);return(0,s.jsx)("div",{className:"pb-2",children:(0,s.jsxs)("div",{className:"relative flex h-full w-full flex-col rounded-xl border border-muted-border bg-muted p-2",children:[(0,s.jsxs)("div",{className:"pointer-events-none absolute left-0 right-0 top-0 flex flex-row justify-end gap-1 p-2",children:[(0,s.jsxs)(em.Vq,{children:[(0,s.jsx)(em.hg,{children:(0,s.jsxs)(U.u,{children:[(0,s.jsx)(U.aJ,{asChild:!0,children:(0,s.jsx)(i.z,{variant:"ghost",disabled:!t||x,className:(0,E.cn)("pointer-events-auto inline-flex items-center gap-2 hover:bg-secondary",{hidden:!l}),children:(0,s.jsx)(o.Z,{name:"delete",size:"small"})})}),(0,s.jsx)(U._v,{children:(0,s.jsx)("p",{children:"Delete element"})})]})}),(0,s.jsx)(em.cZ,{className:"pointer-events-auto p-4",size:"sm",children:(0,s.jsxs)(em.fK,{children:[(0,s.jsx)(em.$N,{children:"Delete Element"}),(0,s.jsx)(em.Be,{children:"Are you sure you want to delete this element?"}),(0,s.jsxs)(em.cN,{className:"flex gap-2 pt-4",children:[(0,s.jsx)(eu.GG,{children:(0,s.jsx)(i.z,{variant:"outline",children:"Cancel"})}),(0,s.jsx)(eu.GG,{asChild:!0,children:(0,s.jsx)(i.z,{variant:"destructive",onClick:()=>h(l),children:"Delete"})})]})]})})]}),(0,s.jsxs)(em.Vq,{open:j,onOpenChange:w,children:[(0,s.jsx)(em.hg,{asChild:!0,children:(0,s.jsx)(i.z,{variant:"ghost",className:"pointer-events-auto transition duration-150 ease-out hover:bg-secondary",onClick:e=>{u||(e.preventDefault(),e.stopPropagation(),a())},disabled:x,children:(0,s.jsx)(o.Z,{name:"close",size:"small"})})}),(0,s.jsx)(em.cZ,{className:"pointer-events-auto p-4",size:"sm",children:(0,s.jsxs)(em.fK,{children:[(0,s.jsx)(em.$N,{children:"Discard Changes"}),(0,s.jsx)(em.Be,{children:"Are you sure you want to discard your changes?"}),(0,s.jsxs)(em.cN,{className:"flex gap-2 pt-4",children:[(0,s.jsx)(eu.GG,{children:(0,s.jsx)(i.z,{variant:"outline",children:"Cancel"})}),(0,s.jsx)(eu.GG,{asChild:!0,children:(0,s.jsx)(i.z,{variant:"destructive",onClick:_,children:"Discard"})})]})]})})]})]}),(0,s.jsx)(k.M,{children:(0,s.jsx)(S.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},exit:{opacity:0,y:20},children:!!l&&(0,s.jsx)(eX,{element:l,disabled:x||!t})})}),!l&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1",children:[(0,s.jsx)(o.Z,{name:"my_location",className:"h-4 w-4"})," Edit"]}),(0,s.jsx)("div",{className:"flex h-full flex-col items-center justify-center pb-14 text-muted-foreground opacity-80",children:(0,s.jsx)("p",{className:"pt-4 text-center text-sm",children:"Select to edit or ask Lovable to modify"})})]}),(0,s.jsx)("div",{className:"pointer-events-none absolute bottom-0 left-0 right-0 flex flex-row gap-4 p-3",children:(0,s.jsx)("div",{className:"flex w-full items-center justify-end gap-2 pt-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 transition-all duration-300",children:[(0,s.jsx)(i.z,{variant:"ghost",onClick:N,disabled:!u||x,className:"pointer-events-auto hover:bg-secondary",children:"Discard"}),(0,s.jsx)(i.z,{onClick:y,loading:x,disabled:!u,className:"visual-edits-save pointer-events-auto",variant:"affirmative",children:"Save"})]})})})]})})},eq=()=>{let{handleDeactivatePickAndEdit:e}=(0,ec.H)(),{enableServer:t}=(0,es.v)(),{setIsPickAndEditActive:a}=(0,T.S9)();return(0,n.useEffect)(()=>(t(),a(!0),()=>{e()}),[t,e,a]),null},eY=()=>{let e=(0,T.UC)(e=>e.isVisualEditingActive),{setIsVisualEditorPanelOpen:t}=(0,T.S9)();return(0,n.useEffect)(()=>{let e=e=>{if(e.data.type===ed.C.KEYBIND){let{compositeKey:a}=e.data.payload;switch(a){case"Alt+S":case"Alt+\xdf":t(e=>!e)}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t]),(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsx)(eq,{}),(0,s.jsx)(k.M,{children:e&&(0,s.jsx)(S.E.div,{initial:{height:0,opacity:0},animate:{height:e?"auto":0,opacity:e?1:0},transition:{type:"spring",duration:.5,bounce:0},exit:{height:0,opacity:0},children:(0,s.jsx)(eB,{})},"design-panel")})]})};var eJ=a(60256),eQ=a(72380),e$=a(71759),e0=a(48581),e1=a(32129),e2=a(30438),e5=a(59053),e4=a(79358),e6=a(47902);let e3=()=>{var e;let{userData:t}=(0,eJ.SE)(),{dailyCreditLimit:a,dailyCreditsUsed:l,bonusCredits:i}=(0,e5.O)(),d=(0,e$.hO)(e=>e.projectWorkspace),[c,u]=(0,n.useState)(!0),m=(0,eQ.v)(),p=(0,e2.c)(),h=null==t?void 0:null===(e=t.tips)||void 0===e?void 0:e.upgrade_dialog_dismissed_at,f=(null!=a?a:0)-(null!=l?l:0)+(null!=i?i:0);return((0,n.useEffect)(()=>{h&&!(0,e6.ZK)(h)&&u(!1)},[h]),p&&(null==d?void 0:d.plan)==="free"&&!(f>2)&&c)?(0,s.jsx)("div",{className:"relative flex w-full flex-col rounded-t-3xl border border-b-0 border-muted-border bg-background",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-6 pl-4 pr-2 pt-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsxs)("span",{className:"text-sm font-normal text-foreground",children:[(0,e4.H)(f)," free ",1===f?"credit":"credits"," ","remaining today"]})}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(e0.om,{currentPlan:{id:(null==d?void 0:d.plan)||"free",type:(null==d?void 0:d.plan_type)||"monthly"},context:"outOfCredits",children:(0,s.jsx)(e1.Z,{onClick:()=>{r.ZP.capture(j.VL.UPGRADE.BUTTON_CLICKED.CHAT,{context:j.VL.UPGRADE.CONTEXT.OUT_OF_CREDITS,remaining_credits:f})},children:"Upgrade Now"})}),(0,s.jsx)("button",{type:"button",className:"group flex h-7 w-7 items-center justify-center hover:bg-transparent",onClick:()=>{m.mutate({upgrade_dialog_dismissed_at:new Date().toISOString()}),u(!1)},children:(0,s.jsx)(o.Z,{name:"close",size:"small",className:"text-muted-foreground"})})]})]})}):null};var e7=a(87751),e8=a(21399),e9=a(50126);let te=()=>{let e=(0,X.v)(),t=(0,T.UC)(e=>e.isVisualEditingActive),{setIsVisualEditorPanelOpen:a,turnOffVisualEditing:n}=(0,T.S9)(),{startLiveMode:l}=(0,ea.My)(),{hasUnsavedChanges:d}=(0,es.v)(),c=(0,e9.Sl)(e=>e.activeView),u=Q("alt+s",()=>{m||a(e=>!e)},{enabled:!0}),m=t&&d,p="dev-mode"===c;return(0,s.jsxs)(U.u,{instant:m,children:[(0,s.jsx)(U.aJ,{className:"flex py-0",type:"button",asChild:!0,children:(0,s.jsxs)(i.z,{id:"visual-editor-toggle",type:"button",variant:"outline",size:"sm",onClick:t?()=>{n(),r.LJ.capture("visual_editor_toggled",{state:!t,project_id:e})}:()=>{a(!0),l(),r.LJ.capture("visual_editor_toggled",{state:t,project_id:e})},disabled:m||p,className:(0,E.cn)("flex h-6 gap-1 rounded-full border py-0 pl-1.5 pr-2.5 font-normal text-muted-foreground hover:border-border hover:bg-transparent md:hover:bg-accent md:hover:text-muted-foreground",{"border-affirmative-primary bg-affirmative-primary text-affirmative-primary-foreground hover:border-affirmative-primary hover:bg-affirmative-primary hover:text-affirmative-primary-foreground md:hover:bg-affirmative-primary/90 md:hover:text-affirmative-primary-foreground":t}),children:[(0,s.jsx)(o.Z,{name:"visual_edits",size:"small"}),"Edit"]})}),(0,s.jsx)(U._v,{children:(0,s.jsx)("p",{children:p?"Exit code mode to use visual editor":m?"Save or discard to exit":"Select to edit (".concat(u,")")})})]})},tt=e=>{let{chatPanelRef:t,children:a}=e,r=(0,f.z)(e=>e.showHistory);return(0,q.Z)("md")?a:r?null:(0,s.jsx)(ts,{chatPanelRef:t})},ta=e=>e.charAt(0).toUpperCase()+e.slice(1),ts=(0,n.memo)(e=>{let{chatPanelRef:t}=e,a=(0,et.zq)(),d=(0,et.Zp)(),{startLiveMode:c}=(0,ea.My)(),u=(0,et.xR)(),{isAgentModeDefault:h}=(0,l.v)(),{setSelectedImageUrl:f}=(0,M.mx)(),{hasUnsavedChanges:g}=(0,es.v)(),v=(0,et.pW)(),x=(0,X.v)(),b=(0,T.UC)(e=>e.isVisualEditingActive),{setIsVisualEditorPanelOpen:y,turnOffVisualEditing:w}=(0,T.S9)(),{setChatMode:k}=(0,O.VK)(),{message:S,sendChatMessage:A,isSendingDisabled:I,AuthDialogComponent:L}=(0,e8.i)(),{dropzoneElement:z,openFileUpload:F,getInputProps:K}=(0,$.j)({portalTargetRef:t}),Z=b&&g,G=(0,T.UC)(e=>{var t;return null===(t=e.selectedElements)||void 0===t?void 0:t[0]}),q=Q("alt+s",()=>{Z||y(e=>!e)}),Y=ee(),[J,er]=(0,n.useState)(!1),en=(0,n.useCallback)(async()=>{if((0,el.Go)(S)){r.ZP.capture(j.SL.CHAT.API_KEY_DETECTED,{project_id:x}),er(!0);return}await A()},[x,A,S]),ei=(0,s.jsxs)(U.u,{instant:Z,children:[(0,s.jsx)(U.aJ,{className:"flex py-0",type:"button",asChild:!0,children:(0,s.jsx)("div",{children:(0,s.jsxs)(i.z,{id:"visual-editor-toggle",type:"button",variant:"ghost",size:"sm",onClick:b?()=>{w(),r.ZP.capture(j.SL.VISUAL_EDITS.TOGGLED,{state:!b,project_id:x})}:()=>{y(!0),c(),r.ZP.capture(j.SL.VISUAL_EDITS.TOGGLED,{state:b,project_id:x})},disabled:Z,className:(0,E.cn)("h-fit gap-1 px-1.5 py-0.5 font-normal",{"bg-accent":b}),children:[(0,s.jsx)(o.Z,{name:"my_location",className:"h-4 w-4"}),"Edit"]})})}),(0,s.jsx)(U._v,{children:(0,s.jsx)("p",{children:Z?"Save or discard to exit":"Select to edit (".concat(q,")")})})]});return(0,s.jsxs)("div",{className:"flex max-h-[calc(100%-37px)] shrink-0 flex-col overflow-visible",children:[(0,s.jsx)(e7.s,{isOpen:J,onDismiss:()=>er(!1),onConfirm:()=>{er(!1),A(),r.ZP.capture(j.SL.CHAT.API_KEY_WARNING_DISMISSED,{project_id:x})}}),!u&&(0,s.jsx)(eY,{}),!Y&&(0,s.jsxs)("div",{className:"relative top-4 -space-y-4",children:[x&&(0,s.jsx)(eo,{projectId:x}),(0,s.jsx)(e3,{}),x&&a&&(0,s.jsx)(m,{})]}),(0,s.jsxs)(p.x,{className:"relative mr-2 md:mr-0",onSubmit:en,AuthDialogComponent:L,children:[(0,s.jsx)(C.T,{setSelectedImageUrl:f}),!b&&(0,s.jsx)(R,{}),(0,s.jsxs)(U.u,{children:[(0,s.jsx)(U.aJ,{asChild:!0,children:(0,s.jsx)("div",{children:(0,s.jsx)(D.E,{autoSize:!0,minHeight:40,className:"m-1 rounded-md p-0",disabled:Z,forceShowPlaceholder:!1,placeholder:G?"Ask Lovable to modify ".concat(ta(G.elementType),"..."):"Ask Lovable...",enableSlashCommands:!1,isChatModeActive:!1,onEnableChatMode:()=>k(O.jE.CHAT_ONLY),onDisableChatMode:()=>k(h?O.jE.AGENT:O.jE.DEFAULT)})})}),(0,s.jsx)(U._v,{hidden:!b||!g,children:(0,s.jsx)("p",{children:"Save to continue"})})]}),(0,s.jsx)(P.y,{}),(0,s.jsxs)(_.s,{children:[(0,s.jsx)("input",{id:"file-upload",className:"hidden",...K()}),z,(0,s.jsx)(N,{onFileUpload:F}),Y||v?!Y&&v?(0,s.jsx)(te,{}):null:ei,(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-1",children:[x&&(0,s.jsx)(W,{projectId:x}),(0,s.jsxs)("div",{className:"ml-1 flex items-center gap-2",children:[(0,s.jsx)(H.r,{}),d&&x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(V.O,{projectId:x}),(0,s.jsx)(B,{disabled:Z,isSendingDisabled:I})]}):(0,s.jsx)(B,{disabled:Z,isSendingDisabled:I})]})]})]})]}),(0,s.jsx)("div",{className:"z-10 h-2 w-full bg-background"})]})});ts.displayName="ChatInputV2NormalContent"},66431:function(e,t,a){"use strict";a.d(t,{A:function(){return p}});var s=a(57437),r=a(27648),n=a(2265),l=a(62869),i=a(78276),o=a(26110),d=a(57346),c=a(26237),u=a(79396),m=a(37675);let p=()=>{let e=(0,c.C)(),{mutate:t,isPending:a}=(0,u.I)({skipSafetyCheck:!0}),p=(0,m.bk)(e=>e.editIdToConfirmRestoreFor),{setEditIdToConfirmRestoreFor:h}=(0,m.Xr)(),{disabled:f,disabledReason:g}=(0,n.useMemo)(()=>a?{disabled:!0,disabledReason:"Restore is in progress"}:e?{disabled:!0,disabledReason:(0,s.jsx)("p",{className:"max-w-sm",children:"Cannot transfer project while there is an active operation in progress (e.g. chat or revert). Please wait for the operation to complete.,"})}:{disabled:!1,disabledReason:null},[e,a]);return(0,s.jsx)(o.Vq,{open:!!p,onOpenChange:e=>!e&&h(void 0),children:(0,s.jsxs)(o.cZ,{children:[(0,s.jsx)(o.fK,{children:(0,s.jsx)(o.$N,{children:"Can’t revert database changes"})}),(0,s.jsx)(o.Be,{children:"The database was modified since this version. Lovable can’t revert database changes automatically. You’ll need to update the database manually."}),(0,s.jsxs)(o.cN,{children:[(0,s.jsx)(l.z,{variant:"outline",children:(0,s.jsxs)(r.default,{href:"https://docs.lovable.dev/integrations/supabase",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",children:[(0,s.jsx)("span",{className:"truncate",children:"Learn more"}),(0,s.jsx)(d.Z,{name:"arrow_outward"})]})}),(0,s.jsx)(i.b,{showTooltip:f,tooltipContent:g,children:(0,s.jsx)(o.GG,{asChild:!0,children:(0,s.jsxs)(l.z,{variant:"affirmative",onClick:()=>t({edit:{id:p}}),disabled:f,children:["Proceed Anyway",a&&(0,s.jsx)(d.Z,{className:"ml-1 animate-spin",name:"progress_activity",size:"small"})]})})})]})]})})}},87418:function(e,t,a){"use strict";a.d(t,{W:function(){return r}});var s=a(2265);let r=e=>{let{listRef:t,containerRef:a}=e,[r,n]=(0,s.useState)(!1),[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),c=(0,s.useCallback)(()=>setTimeout(()=>{if(!t.current)return;let e=t.current.scrollSize-t.current.viewportSize-t.current.scrollOffset<84,a=t.current.scrollOffset<84,s=t.current.scrollSize>t.current.viewportSize;i(e),d(a),n(s)},0),[t]),u=(0,s.useCallback)(()=>{t.current&&t.current.scrollTo(t.current.scrollSize)},[t]);return(0,s.useEffect)(()=>{let e=a.current;if(!e)return;let t=new MutationObserver(c);t.observe(e,{childList:!0,subtree:!0});let s=new ResizeObserver(c);return s.observe(e),c(),()=>{t.disconnect(),s.disconnect()}},[a,c]),{isScrollable:r,isScrolledToEnd:l,isScrolledToStart:o,checkScrollPosition:c,scrollToEnd:u}}},21399:function(e,t,a){"use strict";a.d(t,{i:function(){return x}});var s=a(57437),r=a(2265),n=a(26438),l=a(52558),i=a(10867),o=a(90045),d=a(52055),c=a(84350),u=a(61160),m=a(24032),p=a(95033),h=a(29328),f=a(77113),g=a(50273),v=a(47902);let x=()=>{let{closeVisualEditsPanel:e}=(0,g.S9)(),{agentModeEnabled:t}=(0,n.v)(),{sendChatMessage:a,hasActiveLock:x}=(0,c.O)(),{clearEditorState:b,restoreEditorState:y}=(0,m.WR)(),j=(0,f.iZ)(e=>e.project),{authUser:E}=(0,l.Eu)(),[w,N]=(0,r.useState)(!1),[_,C]=(0,r.useState)(!1),[k,S]=(0,r.useState)(()=>(0,v.Y)()),T=(0,m.Eh)(e=>e.images);(0,m.Eh)(e=>e.setImages);let A=(0,m.Eh)(e=>e.message),I=(0,g.UC)(e=>e.selectedElements),{setSelectedElements:L}=(0,g.S9)(),R=(0,o.hT)(e=>e.chatMode),{setChatMode:D}=(0,o.VK)(),{startLiveMode:P}=(0,h.My)();(0,r.useEffect)(()=>{let e=setInterval(()=>{S((0,v.Y)())},1e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{let e=()=>{S((0,v.Y)())};return window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)},[]);let M=(0,r.useMemo)(()=>T.some(e=>e.uploading),[T]),O=(0,r.useMemo)(()=>x||_||!j,[x,_,j]),z=(0,r.useMemo)(()=>O||0===A.length||M||(0,u.L)(A)||k.isRateLimited,[O,A,M,k.isRateLimited]),{isAgentModeDefault:U}=(0,n.v)(),F=(0,r.useCallback)(async()=>{if(z)return;if(k.isRateLimited){console.warn("Cannot send message: rate limited");return}if(R===o.jE.CHAT_ONLY&&A.toLowerCase().includes("lov-action")&&D(U?o.jE.AGENT:o.jE.DEFAULT),!E){N(!0);return}let s={selectedElements:I};C(!0),P();try{e(),await a({body:{id:(0,i.Fd)(),message:A,images:T.map(e=>({image_id:e.id,type:p.V.USER_UPLOAD})),selected_elements:I,optimisticImageUrls:T.map(e=>e.url),chat_only:R===o.jE.CHAT_ONLY,agent_mode:t?"enabled":"disabled"},options:{clear:()=>{b(),L([])},restore:()=>{y(),L(s.selectedElements)}}})}finally{C(!1)}},[z,k.isRateLimited,R,A,E,T,I,P,D,e,a,b,L,y,t]);return{message:A,sendChatMessage:F,isSendingDisabled:z,isLocked:O,isSubmitting:_,isRateLimited:k.isRateLimited,rateLimitSecondsRemaining:k.secondsRemaining,AuthDialogComponent:(0,s.jsx)(d.o,{open:w,onOpenChange:N})}}},96279:function(e,t,a){"use strict";a.d(t,{q:function(){return c}});var s=a(21770),r=a(2265),n=a(14438),l=a(49131),i=a(26237),o=a(3097),d=a(74746);function c(e){let{projectId:t}=e,a=(0,l.SJ)(),c=(0,o.b)(),[u,m]=(0,r.useState)(void 0),{addStoppedMessageId:p,setLatestStreamedMessage:h}=(0,d.mx)(),f=(0,d.aK)(e=>e.sortedMessageIds),g=(0,d.aK)(e=>e.messages),v=(0,r.useMemo)(()=>null==f?void 0:f.findLast(e=>{var t;return(null===(t=g[e])||void 0===t?void 0:t.type)==="userMessage"}),[f,g]),x=(0,i.C)(),b=(0,s.D)({mutationFn:async()=>{if(!t)throw Error("No projectId found");if(c){if(!("content"in c))throw Error("Invalid message type");h({...c,stopped:!0})}return a.post("/projects/".concat(t,"/chat/").concat(v,"/cancel"))},onSuccess:()=>{p(null==c?void 0:c.id),m(v),h(void 0)},onError:()=>{n.Am.error("Failed to stop message",{description:"Please try again"})}});return{showStopAction:v!==u&&x,mutation:b}}},91576:function(e,t,a){"use strict";a.d(t,{Sv:function(){return x},UL:function(){return h},eX:function(){return s},hw:function(){return f},t6:function(){return v},v7:function(){return g}});var s,r=a(57437),n=a(52089),l=a(61062),i=a(72384),o=a(94508),d=a(78079),c=a(10867);(s||(s={})).AI_FIX="AI Fix";let{AI_FIX:u}=s,m={[l.N.NO_CODE_CHANGE]:[u],[l.N.CODE_DIFF]:[],[l.N.FILE_EDITED_WITHOUT_PERMISSION]:[u],[l.N.EXCLUDED_FILE_EDITED]:[u],[l.N.DEPENDENCY_INSTALL]:[u],[l.N.IMMEDIATE_RUNTIME]:[u],[l.N.RUNTIME]:[u],[l.N.BUILD]:[u],[l.N.HTTP_CLIENT_ERROR]:[u],[l.N.HTTP_SERVER_ERROR]:[],[l.N.SUPABASE_EDGE_FUNCTION_ERROR]:[u],[l.N.CORS_ERROR]:[],[l.N.DEPLOY_SUPABASE_FUNCTIONS]:[u],[l.N.SUPABASE_SQL_ERROR]:[u],[l.N.SEARCH_REPLACE_FAILED]:[],[l.N.SEARCH_REPLACE_MISSING_FILE]:[],[l.N.CHANGED_MISSING_FILE]:[],[l.N.RENAME_FAILED]:[],[l.N.DELETION_FAILED]:[]},p=e=>{let t=(0,n.H$)(e),a=t.length>1?e=>"# Error number ".concat(e+1,":\n#################\n\n"):()=>"",s=t.map((e,t)=>"".concat(a(t)).concat(e.error_message,"\n").concat(e.meta_data?"\n"+JSON.stringify(e.meta_data,null,2):"")).join("\n\n").replace(/\x1B\[[0-9;]*[JKmsu]/g,"");return s.length>2e4?s.slice(0,2e4)+"... (truncated)":s},h=e=>{let{errors:t,roundedTop:a=!0}=e;return(0,r.jsx)("div",{className:a?"mt-4":"",children:(0,r.jsx)("pre",{className:(0,o.cn)("w-full rounded-xl border-[3px] border-warning bg-background p-3 text-sm text-foreground",a?"mt-2 rounded-t-md":""),children:(0,r.jsx)("code",{className:"block w-full overflow-x-auto overflow-y-auto whitespace-pre-wrap",children:p(t)})})})},f=e=>{let{projectId:t,errors:a}=e,{mutate:s,isPending:r}=(0,d.m)({projectId:t});return{onClick:()=>{s({body:{id:(0,c.Fd)(),message:"For the code present, I get the error below.\n\nPlease think step-by-step in order to resolve it.\n```\n".concat(p(a),"\n```\n"),mode:i.S.INSTANT,contains_error:!0,error_ids:a.map(e=>e.id)},projectId:t})},isPending:r}},g={[l.N.BUILD]:"Build unsuccessful",[l.N.CODE_DIFF]:"Changes couldn't be applied",[l.N.DEPLOY_SUPABASE_FUNCTIONS]:"Couldn't deploy Supabase functions",[l.N.DEPENDENCY_INSTALL]:"Couldn't install dependency",[l.N.FILE_EDITED_WITHOUT_PERMISSION]:"Tried editing file without permission",[l.N.EXCLUDED_FILE_EDITED]:"Unwanted changes",[l.N.IMMEDIATE_RUNTIME]:"Oops, it looks like our AI had a bit of a hiccup and broke the app",[l.N.NO_CODE_CHANGE]:"Changes already applied",[l.N.RUNTIME]:"The app encountered an error",[l.N.HTTP_CLIENT_ERROR]:"The app encountered an error",[l.N.HTTP_SERVER_ERROR]:"The app encountered an error",[l.N.SUPABASE_EDGE_FUNCTION_ERROR]:"The app encountered an error",[l.N.CORS_ERROR]:"The app encountered an error",[l.N.SUPABASE_SQL_ERROR]:"An error occurred while applying the migration",[l.N.SEARCH_REPLACE_FAILED]:"Failed search-replace",[l.N.SEARCH_REPLACE_MISSING_FILE]:"Search-replace on missing file",[l.N.CHANGED_MISSING_FILE]:"Tried deleting or renaming non-existent file",[l.N.RENAME_FAILED]:"Failed to rename file",[l.N.DELETION_FAILED]:"Failed to delete file"},v={[l.N.BUILD]:!0,[l.N.CODE_DIFF]:!0,[l.N.SUPABASE_EDGE_FUNCTION_ERROR]:!0,[l.N.DEPENDENCY_INSTALL]:!0,[l.N.DEPLOY_SUPABASE_FUNCTIONS]:!0,[l.N.HTTP_CLIENT_ERROR]:!0,[l.N.HTTP_SERVER_ERROR]:!0,[l.N.CORS_ERROR]:!0,[l.N.FILE_EDITED_WITHOUT_PERMISSION]:!0,[l.N.EXCLUDED_FILE_EDITED]:!0,[l.N.IMMEDIATE_RUNTIME]:!0,[l.N.NO_CODE_CHANGE]:!0,[l.N.RUNTIME]:!0,[l.N.SUPABASE_SQL_ERROR]:!0,[l.N.SEARCH_REPLACE_FAILED]:!0,[l.N.SEARCH_REPLACE_MISSING_FILE]:!0,[l.N.CHANGED_MISSING_FILE]:!0,[l.N.RENAME_FAILED]:!0,[l.N.DELETION_FAILED]:!0},x=e=>{let t=Array.from(new Set(e.flatMap(e=>m[e.type])));return t.sort((e,t)=>"AI Fix"===e?-1:"AI Fix"===t?1:0),t}},86843:function(e,t,a){"use strict";a.d(t,{p:function(){return P}});var s=a(57437),r=a(2265),n=a(14438),l=a(85460),i=a(57346),o=a(74746),d=a(77113),c=a(87418),u=a(43681),m=a(50618),p=a(62869),h=a(36461),f=a(76906),g=a(94508),v=a(66491),x=a(67003),b=a(68640),y=a(50126);let j=(0,r.memo)(e=>{var t;let{messageId:a,edit:n,isRevertMessage:l,isUnderDaySection:c}=e,{commit_sha:u}=null!=n?n:{},{setActiveEditId:j}=(0,y.pE)(),E=(0,y.Sl)(e=>e.activeEditId),w=(0,o.aK)(e=>e.edits),N=E?w[E]:null,_=(0,d.iZ)(e=>e.project),{setActiveMessageId:C,setShowConsole:k,setConsolePreviewContent:S,exitConsole:T}=(0,y.pE)(),A=(0,y.Sl)(e=>e.consoleContentType),{toggleBookmark:I}=(0,h.g)((null==_?void 0:_.id)||""),L=(0,r.useMemo)(()=>{if(u&&_)return(0,f.t)({projectId:null==_?void 0:_.id,sha:u})},[u,_]),R=(0,b.Y)({editId:null==n?void 0:n.id,commitSha:null!==(t=null==n?void 0:n.commit_sha)&&void 0!==t?t:void 0}),D=n&&(null==N?void 0:N.id)===(null==n?void 0:n.id)&&"snapshot-preview"===A||R&&!N&&!A,P=(0,r.useMemo)(()=>{if(!(null==n?void 0:n.created_at))return null;let e=new Date(1e3*n.created_at.seconds);return c?{absolute:(0,v.WU)(e,"h:mm a"),relative:(0,v.WU)(e,"h:mm a")}:function(e){let t=!(0,x.X)(e),a="MMM d";return t&&(a+=", yyyy"),a+=", h:mm a",{absolute:(0,v.WU)(e,a),relative:(0,v.WU)(e,a)}}(e)},[n,c]),M=(0,r.useCallback)(e=>{var t;if(e.altKey){window.open(L,"_blank");return}if(D||R){T();return}k("snapshot-preview"),C(a),S(L),j(null!==(t=null==n?void 0:n.id)&&void 0!==t?t:void 0)},[n,T,D,R,a,L,j,C,S,k]),O=(0,r.useCallback)(e=>{e.stopPropagation(),(null==n?void 0:n.id)&&I(n.id,!!n.bookmarked)},[n,I]),{commit_message:z}=null!=n?n:{};return(0,s.jsxs)("div",{className:"flex h-11 min-w-0 items-center gap-1 md:h-10 md:px-3",children:[l?(0,s.jsx)(i.Z,{name:"restart_alt",className:"mb-px text-muted-foreground",size:"small"}):(0,s.jsx)(m.Z,{onClick:O,isBookmarked:!!n.bookmarked&&(null==n?void 0:n.bookmarked),className:(0,g.cn)(!n.bookmarked&&"md:opacity-0 md:group-hover:opacity-100")}),(0,s.jsx)(p.z,{onClick:M,disabled:!n,className:(0,g.cn)("group flex h-10 w-full cursor-pointer items-center gap-2 rounded-lg px-2.5 text-left text-base font-medium transition-colors duration-150 ease-in-out md:h-9 md:text-sm","min-w-0 bg-background text-foreground hover:bg-muted-hover",{"bg-affirmative text-affirmative-foreground hover:bg-affirmative/80":D&&!l}),children:(0,s.jsxs)("div",{className:"flex w-full min-w-0 items-center justify-between gap-2 overflow-hidden",children:[(0,s.jsx)("div",{className:"flex min-w-0 items-center gap-x-2 gap-y-1 font-normal",children:l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-base text-muted-foreground md:text-sm",children:"Restored"}),(0,s.jsx)("div",{className:"min-w-0 gap-1 truncate rounded-sm border border-muted-border bg-background px-2 py-px",children:z})]}):(0,s.jsx)("span",{className:"items-center gap-1 truncate",children:z})}),(0,s.jsx)("span",{className:(0,g.cn)("text-sm font-normal text-muted-foreground md:text-xs",D&&!l&&"text-affirmative-foreground"),children:P&&(0,s.jsx)(s.Fragment,{children:P.absolute})})]})})]})});j.displayName="HistoryCardContent";let E=e=>{let{messageId:t,isUnderDaySection:a=!1}=e,r=(0,o.aK)(e=>e.messages[t]),n=(0,o.tV)((null==r?void 0:r.type)==="aiMessage"||(null==r?void 0:r.type)==="manualEdit"?null==r?void 0:r.editId:void 0),l=(0,o.uO)((null==r?void 0:r.type)==="userCommit"||(null==r?void 0:r.type)==="revertSuccess"?null==r?void 0:r.shortCommitHash:void 0);if(!r||!["aiMessage","manualEdit","userCommit","revertSuccess"].includes(r.type))return null;let i="userCommit"===r.type||"revertSuccess"===r.type?l:n;return i?(0,s.jsx)("div",{className:"group flex flex-col","data-message-id":r.id,"data-message-edit-id":(0,u.YZ)(r),"data-langsmith-url":(0,u.mu)(r),children:(0,s.jsx)(j,{messageId:r.id,edit:i,isRevertMessage:"revertSuccess"===r.type,isUnderDaySection:a})}):null};var w=a(56942),N=a(65696),_=a(70817),C=a(3442),k=a(95775);let S=e=>{let{message:t,edits:a,latestPublishedTimestamp:s}=e,r=a[t.editId];return s&&r?r.created_at.toDate()>s:!s&&!!r},T=e=>{let{message:t,latestPublishedTimestamp:a}=e;return a&&t.createdAt?t.createdAt>a:!a&&!!t.createdAt},A=e=>{let{message:t,edits:a,latestPublishedTimestamp:s}=e;return"revertSuccess"===t.type?S({message:t,edits:a,latestPublishedTimestamp:s}):T({message:t,latestPublishedTimestamp:s})},I=e=>{let{messageIds:t,messages:a}=e,s=new Map;return t.forEach(e=>{let t=a[e];if(!(null==t?void 0:t.createdAt))return;let r=(0,v.WU)(t.createdAt,"yyyy-MM-dd");s.has(r)||s.set(r,[]),s.get(r).push(e)}),s},L=e=>{let{messagesByDate:t}=e,a=(0,w.b)(new Date),s=(0,N.z)(a,{weekStartsOn:1}),r=e=>(0,_.z)(e)?"Today":(0,C.g)(e)?"Yesterday":(0,k._)(e,{start:s,end:a})?(0,v.WU)(e,"EEEE"):(0,v.WU)(e,"MMMM d");return Array.from(t.entries()).sort((e,t)=>{let[a]=e,[s]=t;return s.localeCompare(a)}).map(e=>{let[t,a]=e;return{label:r(new Date(t)),messageIds:a}})},R=e=>{let{messageIds:t,messages:a}=e;return L({messagesByDate:I({messageIds:t,messages:a})})},D=e=>{let{messageIds:t,getEditByShortCommitHash:a,latestPublishedTimestamp:s}=e,r=(0,o.aK)(e=>e.edits),n=(0,o.aK)(e=>e.messages),l=[],i=[],d=[],c=e=>["manualEdit","aiMessage","revertSuccess","userCommit"].includes(e),u=e=>{if("userCommit"===e.type||"revertSuccess"===e.type){let t=a(e.shortCommitHash);return!!(null==t?void 0:t.bookmarked)}if("editId"in e&&e.editId){let t=r[e.editId];return!!(null==t?void 0:t.bookmarked)}return!1};return t.forEach(e=>{let t=n[e];if(c(t.type)&&("manualEdit"!==t.type&&"aiMessage"!==t.type||t.editId)){if(u(t)&&"revertSuccess"!==t.type&&l.push(e),A({message:t,edits:r,latestPublishedTimestamp:s})){i.push(e);return}(null==t?void 0:t.createdAt)&&d.push(e)}}),{unpublishedMessageIds:i,bookmarkedMessageIds:l,groupedDailyMessageIds:R({messageIds:d,messages:n}),hasBookmarkedMessages:l.length>0,hasUnpublishedMessages:i.length>0,hasDailyMessages:d.length>0,splitMessageCount:l.length+i.length+d.length}},P=(0,r.memo)(()=>{var e,t;let a=(0,r.useRef)(null),u=(0,r.useRef)(null),m=(0,d.iZ)(e=>e.project),{snapshot:p,loadEarlierEdits:h}=(0,o.mx)(),f=(0,o.aK)(e=>{let t=e.messages;return Object.keys(t).sort((e,a)=>{var s,r,n,l;return((null===(r=t[e])||void 0===r?void 0:null===(s=r.createdAt)||void 0===s?void 0:s.getTime())||0)-((null===(l=t[a])||void 0===l?void 0:null===(n=l.createdAt)||void 0===n?void 0:n.getTime())||0)})}),g=(0,o.aK)(e=>e.edits),v=(0,o.aK)(e=>"loading"===e.loadingEditsStatus),x=(0,o.aK)(e=>e.hasOlderEdits),b=(0,o.aK)(e=>e.canLoadMoreEdits),y=(0,o.uO)(null!==(t=null==m?void 0:m.latest_commit_sha)&&void 0!==t?t:void 0),{isScrolledToEnd:j,checkScrollPosition:w}=(0,c.W)({listRef:u,containerRef:a}),N=(0,r.useMemo)(()=>[...f].reverse(),[f]);(0,r.useEffect)(()=>{j&&x&&b&&h().catch(()=>{n.Am.error("Failed to load earlier edits")})},[j,x,b,h]);let{unpublishedMessageIds:_,groupedDailyMessageIds:C,bookmarkedMessageIds:k,hasBookmarkedMessages:S,hasUnpublishedMessages:T,hasDailyMessages:A,splitMessageCount:I}=D({messageIds:N,latestPublishedTimestamp:(0,r.useMemo)(()=>{var e;let t=null==m?void 0:null===(e=m.published_deployment)||void 0===e?void 0:e.commit_sha;if(!t)return null;let a=Object.values(g).find(e=>e.commit_sha===t);return a?a.created_at.toDate():null},[null==m?void 0:null===(e=m.published_deployment)||void 0===e?void 0:e.commit_sha,g]),getEditByShortCommitHash:p.getEditByShortCommitHash}),L=(0,r.useRef)(void 0);return((0,r.useEffect)(()=>{if(u.current&&I>0&&void 0!==L.current&&L.current<I){let e=u.current.scrollOffset;u.current.scrollTo(e)}L.current=I},[I]),y&&(S||T||A))?(0,s.jsxs)("div",{ref:a,className:"flex min-h-0 flex-1 overflow-y-scroll",children:[(0,s.jsxs)(l.dM,{overscan:5,ref:u,onScroll:()=>{w()},children:[S&&(0,s.jsx)(M,{title:"Bookmarked",children:k.map(e=>(0,s.jsx)(E,{messageId:e},e))}),T&&(0,s.jsx)(M,{title:"Unpublished",children:_.map(e=>(0,s.jsx)(E,{messageId:e},e))}),A&&C.map(e=>{let{label:t,messageIds:a}=e;return(0,s.jsx)(M,{title:t,children:a.map(e=>(0,s.jsx)(E,{messageId:e,isUnderDaySection:!0},e))},t)})]}),v&&(0,s.jsx)("div",{className:"flex items-center justify-center gap-2 text-sm",children:(0,s.jsx)(i.Z,{className:"animate-spin",name:"progress_activity",size:"small"})})]}):null});P.displayName="HistoryPanel";let M=e=>{let{title:t,subtitle:a,children:r}=e;return(0,s.jsxs)("div",{className:"mb-4 mt-2 flex flex-col",children:[(0,s.jsxs)("p",{className:"mb-1 text-lg font-medium md:pl-3 md:text-base",children:[t,a&&(0,s.jsx)("span",{className:"ml-1 text-sm font-normal text-muted-foreground",children:a})]}),r]})}},74950:function(e,t,a){"use strict";a.d(t,{r:function(){return p}});var s=a(57437),r=a(2265),n=a(85598),l=a(49360),i=a(52558),o=a(62869),d=a(57346),c=a(95186),u=a(94508),m=a(94949);let p=e=>{let{disabled:t,onImagesUploaded:a,onUrlSubmitted:p,maxSize:h=20971520,className:f}=e,{upload:g,download:v}=(0,m.F)(),{authUser:x}=(0,i.Eu)(),b=(0,r.useCallback)(async e=>{let t=e.map(e=>({file:e,url:URL.createObjectURL(e),id:(0,l.Z)(),type:e.type}));return(await Promise.all(t.map(async e=>{try{await g({fileName:e.id,file:e.file,continueOnError:!1});let{url:t}=await v({dir_name:x.uid,file_name:e.id});return{downloadUrl:t,name:"".concat(e.id,".").concat({"image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","image/webp":"webp"}[e.type]||"png"),type:e.type,id:e.id}}catch(t){return console.error("Failed to upload image ".concat(e.id,":"),t),null}}))).filter(e=>null!==e)},[g,v,x]),{getInputProps:y,open:j,getRootProps:E,isDragActive:w}=(0,n.uI)({onDrop:async e=>{a(await b(e))},noClick:!0,noKeyboard:!0,maxSize:h,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]}});(0,r.useEffect)(()=>{let e=async e=>{var t;let s=Array.from((null===(t=e.clipboardData)||void 0===t?void 0:t.items)||[]).filter(e=>e.type.startsWith("image/")).map(e=>e.getAsFile()).filter(e=>null!==e);s.length&&a(await b(s))};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[a,b,x]);let[N,_]=(0,r.useState)("");return(0,s.jsxs)("div",{className:(0,u.cn)("group relative rounded-lg bg-input [&:has(:focus)]:border-accent",{"pointer-events-none":t},f),children:[w&&(0,s.jsx)("div",{className:"absolute inset-0 z-30 flex items-center justify-center rounded-lg bg-background/80",children:(0,s.jsxs)("div",{className:"rounded-lg bg-muted p-4 text-center",children:[(0,s.jsx)("p",{children:"Drop images here"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Accepts PNG, JPG files up to ",h/1048576,"MB"]})]})}),(0,s.jsxs)("div",{...E(),children:[(0,s.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 border-none py-8 pt-10 text-sm disabled:cursor-not-allowed disabled:opacity-50",onClick:j,disabled:t,children:[(0,s.jsx)(d.Z,{name:"add_photo_alternate"}),"Attach image"]}),(0,s.jsx)("input",{...y()})]}),(0,s.jsx)("form",{className:"flex gap-1 p-2",onSubmit:e=>{e.preventDefault(),p(e.target.elements.namedItem("image-url").value)},children:(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(c.I,{name:"image-url",placeholder:"Image URL",className:"w-full bg-muted pr-16",disabled:t,onChange:e=>{_(e.target.value)},value:N}),(0,s.jsx)("div",{className:"absolute right-0 top-0 flex h-full items-center justify-center pr-1",children:(0,s.jsx)(o.z,{variant:"muted",type:"submit",size:"sm",className:(0,u.cn)("opacity-0 transition-opacity",N?"opacity-100":"opacity-0"),disabled:t,children:"Add"})})]})})]})}},63858:function(e,t,a){"use strict";a.d(t,{A:function(){return s},g:function(){return r}});let s={'pre[class*="language-"]':{color:"#c9d1d9",background:"var(--muted)",fontSize:"13px",fontFamily:'var(--font-roboto-mono), "Roboto Mono", Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',lineHeight:"1.5",padding:"1em",overflow:"auto"},'code[class*="language-"]':{color:"#c9d1d9",fontSize:"13px",fontFamily:'var(--font-roboto-mono), "Roboto Mono", Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',lineHeight:"1.5"},comment:{color:"#8b949e"},boolean:{color:"#ff7b72"},number:{color:"#79c0ff"},constant:{color:"#79c0ff"},operator:{color:"#7ee787"},keyword:{color:"oklch(0.833 0.145 321.434)"},function:{color:"#d2a8ff"},variable:{color:"#c9d1d9"},"class-name":{color:"#ffa657"},"type-name":{color:"#ffa657"},"attr-name":{color:"#79c0ff"},string:{color:"#a5d6ff"},tag:{color:"#7ee787"},punctuation:{color:"#7ee787"},selector:{color:"#7ee787"},namespace:{color:"#c9d1d9"},regex:{color:"#ff7b72"},escape:{color:"#a5d6ff"},"::selection":{background:"#2d333b"}},r={'pre[class*="language-"]':{color:"#24292e",background:"var(--background)",fontSize:"13px",fontFamily:'var(--font-roboto-mono), "Roboto Mono", Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',lineHeight:"1.5",padding:"1em",overflow:"auto"},'code[class*="language-"]':{color:"#24292e",fontSize:"13px",fontFamily:'var(--font-roboto-mono), "Roboto Mono", Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',lineHeight:"1.5"},comment:{color:"#6e7781"},boolean:{color:"#cf222e"},number:{color:"#0550ae"},constant:{color:"#0550ae"},operator:{color:"#116329"},keyword:{color:"#3479E5"},function:{color:"#8250df"},"class-name":{color:"#953800"},"attr-name":{color:"#0550ae"},string:{color:"#0a3069"},tag:{color:"#116329"},punctuation:{color:"#116329"},"::selection":{background:"#C7E4FF"}}},7342:function(e,t,a){"use strict";a.d(t,{V:function(){return n}});var s=a(57437),r=a(2265);let n=e=>{let{size:t=.666,lightColor:a="#fff",darkColor:n="#ddd",...l}=e,i=t/2,o=(0,r.useId)();return(0,s.jsxs)("svg",{width:"100%",height:"100%",...l,children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("pattern",{id:"".concat(o,"-transparent-pattern"),width:"".concat(t,"rem"),height:"".concat(t,"rem"),patternUnits:"userSpaceOnUse",children:[(0,s.jsx)("rect",{width:"".concat(t,"rem"),height:"".concat(t,"rem"),fill:a}),(0,s.jsx)("rect",{x:"0",width:"".concat(i,"rem"),height:"".concat(i,"rem"),y:"0",fill:n}),(0,s.jsx)("rect",{x:"".concat(i,"rem"),width:"".concat(i,"rem"),height:"".concat(i,"rem"),y:"".concat(i,"rem"),fill:n})]})}),(0,s.jsx)("rect",{width:"100%",height:"100%",fill:"url(#".concat(o,"-transparent-pattern)")})]})}},82054:function(e,t,a){"use strict";var s,r;a.d(t,{C:function(){return s}}),(r=s||(s={})).TEXT_CHANGE="TEXT_CHANGE",r.IMAGE_CHANGE="IMAGE_CHANGE",r.REMOVE_NODE="REMOVE_NODE",r.CLASS_NAME_UPDATE="CLASS_NAME_UPDATE",r.CLASS_NAME_SET="CLASS_NAME_SET",r.DUPLICATE_NODE="DUPLICATE_NODE"},27899:function(e,t,a){"use strict";a.d(t,{dY:function(){return i},hV:function(){return r},oy:function(){return n},u4:function(){return l},xz:function(){return s},zQ:function(){return o}});let s=240,r=400,n=8,l=300,i=40,o=8},85474:function(e,t,a){"use strict";a.d(t,{D:function(){return f},U:function(){return g}});var s=a(9078),r=a(46214),n=a(2265),l=a(32582),i=a(60034),o=a(19485),d=a(3813),c=a(24853),u=a(26178),m=a(63420),p=a(50273),h=a(82054);function f(e){return String(e).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')}let g=()=>{let e=(0,c.p)(),{selectedElements:t}=(0,u.H)(),{history:a,setHistory:f,currentClassName:g,setCurrentClassName:v}=(0,m.v)(),{setSelectedElements:x}=(0,p.S9)(),b=(0,d.xR)(),y=(0,i.z)(),{updateTwClassname:j,classNameToStyle:E,classname:w}=(0,o.O)(),N=(0,n.useCallback)(e=>{f(t=>[...t,e].slice(-100))},[f]),_=(0,n.useCallback)(e=>{switch(e.type){case h.C.TEXT_CHANGE:y(e.element,t=>(0,l.Rw)(t,e.newText));break;case h.C.IMAGE_CHANGE:y(e.element,t=>(0,l.R5)(t,{src:e.newUrl}));break;case h.C.REMOVE_NODE:y(e.element,(e,t)=>{t.remove()});break;case h.C.CLASS_NAME_UPDATE:case h.C.CLASS_NAME_SET:y(e.element,t=>(0,l.R5)(t,{className:e.newClassName}));break;case h.C.DUPLICATE_NODE:y(e.element,(e,t)=>{t.insertAfter(e)})}N(e)},[y,N]),C=(0,n.useCallback)(a=>{switch(a.type){case h.C.TEXT_CHANGE:y(a.element,e=>(0,l.Rw)(e,a.oldText)),e({type:c.C.SET_ELEMENT_CONTENT,payload:{id:{filePath:a.element.filePath,lineNumber:a.element.lineNumber,col:a.element.col},content:a.oldText}}),x(t.map(e=>e.filePath===a.element.filePath&&e.lineNumber===a.element.lineNumber?{...e,textContent:a.oldText}:e));break;case h.C.IMAGE_CHANGE:y(a.element,e=>(0,l.R5)(e,{src:a.oldUrl})),e({type:c.C.SET_ELEMENT_ATTRS,payload:{id:{filePath:a.element.filePath,lineNumber:a.element.lineNumber,col:a.element.col},attrs:{src:a.oldUrl}}});break;case h.C.REMOVE_NODE:y(a.element,(e,t)=>{try{let e=JSON.parse(a.node);t.insertBefore(e)}catch(e){console.error("Failed to parse node",{item:a},e)}}),e({type:c.C.SET_ELEMENT_ATTRS,payload:{id:{filePath:a.element.filePath,lineNumber:a.element.lineNumber,col:a.element.col},attrs:{style:""}}});break;case h.C.CLASS_NAME_UPDATE:case h.C.CLASS_NAME_SET:y(a.element,e=>(0,l.R5)(e,{className:a.oldClassName})),e({type:c.C.SET_ELEMENT_ATTRS,payload:{id:{filePath:a.element.filePath,lineNumber:a.element.lineNumber,col:a.element.col},attrs:{style:E(a.oldClassName)}}}),t.some(e=>e.filePath===a.element.filePath&&e.lineNumber===a.element.lineNumber)&&v(a.oldClassName);break;case h.C.DUPLICATE_NODE:y(a.element,(e,t)=>{let a=t.getNextSibling();a&&a.remove()})}},[y,e,x,t,E,v]),k=(0,n.useCallback)(()=>{let e=a[a.length-1];e&&(C(e),f(e=>e.slice(0,-1)))},[a,f,C]),S=(0,n.useCallback)((a,s)=>{let r=String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),n="";y(a,e=>{var t;n=(null===(t=e.children[0])||void 0===t?void 0:t.value)||""}),n!==r&&(_({type:h.C.TEXT_CHANGE,element:a,oldText:n,newText:r}),e({type:c.C.SET_ELEMENT_CONTENT,payload:{id:{filePath:a.filePath,lineNumber:a.lineNumber,col:a.col},content:r}}),x(t.map(e=>e.filePath===a.filePath&&e.lineNumber===a.lineNumber?{...e,textContent:r}:e)))},[_,e,t,x,y]),T=(0,n.useCallback)(function(t,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,r="";y(t,e=>{var t,a;r=(null===(a=e.openingElement.attributes.find(e=>"JSXAttribute"===e.type&&"src"===e.name.name))||void 0===a?void 0:null===(t=a.value)||void 0===t?void 0:t.value)||""}),_({type:h.C.IMAGE_CHANGE,element:t,oldUrl:r,newUrl:a}),e({type:c.C.SET_ELEMENT_ATTRS,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col},attrs:{src:s}}})},[_,y,e]),A=(0,n.useCallback)(t=>{r.ZP.capture("visual_edits:element_deleted"),b&&e({type:c.C.GET_PARENT_ELEMENT,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col}}});let a="";y(t,e=>{a=(0,s.default)(e).code}),_({type:h.C.REMOVE_NODE,element:t,node:a}),e({type:c.C.SET_ELEMENT_ATTRS,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col},attrs:{style:"display: none;"}}})},[b,y,_,e]),I=(0,n.useCallback)(t=>{let{element:a,className:s,reset:r=!1}=t,n=null;y(a,e=>{n=(0,l.Xu)(e)}),_({type:h.C.CLASS_NAME_SET,element:a,oldClassName:n||"",newClassName:s}),e({type:c.C.SET_ELEMENT_ATTRS,payload:{id:{filePath:a.filePath,lineNumber:a.lineNumber,col:a.col},attrs:{style:E(s),...r?{class:s}:{}}}})},[E,_,y,e]),L=(0,n.useCallback)(t=>{let{element:a,newClassNames:s,preview:r=!1}=t,n=null,i=null;return(y(a,e=>{null!==(n=(0,l.Xu)(e))&&(i=j(n,s))}),null===n||null===i)?g:(r||_({type:h.C.CLASS_NAME_UPDATE,element:a,oldClassName:n,newClassName:i}),e({type:c.C.SET_ELEMENT_ATTRS,payload:{id:{filePath:a.filePath,lineNumber:a.lineNumber,col:a.col},attrs:{"data-lov-dirty":"true",style:E(i)+";"+E(s)}}}),i)},[E,g,_,y,e,j]),R=(0,n.useCallback)(e=>{_({type:h.C.DUPLICATE_NODE,element:e})},[_]),D=(0,n.useCallback)((e,t)=>{v((0,l.EE)(e,t))},[v]),P=(0,n.useCallback)(e=>{let{element:t,classObj:a,preview:s=!1}=e;try{let e=Array.isArray(a)?a.map(e=>w(e)):[w(a)],r=L({element:t,newClassNames:e,preview:s});return s||v(r),r}catch(e){return g}},[w,L,v,g]),M=(0,n.useCallback)(e=>{let{element:t,className:a,reset:s=!1}=e;I({element:t,className:a,reset:s}),v(a)},[I,v]);return{handleTextChange:S,handleImageChange:T,handleRemoveNode:A,updateElementClassName:L,setElementClassName:I,handleDuplicateNode:R,undoLastOperation:k,initializeClassName:D,handleUpdateClassName:P,handleUpdateClassNameAdvanced:M}}},62809:function(e,t,a){"use strict";a.d(t,{C:function(){return n}});var s=a(69367),r=a(2265);function n(e){let[t,a]=(0,r.useState)(0),[n,l]=(0,r.useState)(0),[i,o]=(0,r.useState)(e);return(0,r.useLayoutEffect)(()=>{i!==e&&(o(e),l(t))},[e,i,t]),(0,r.useEffect)(()=>{let t=e.split("").length-n,r=(0,s.j)(n,e.split("").length,{duration:Math.max(.1,Math.min(5,t/140)),bounce:0,onUpdate(e){a(Math.floor(e))}});return()=>r.stop()},[n,e]),e.split("").slice(0,t).join("")}},6809:function(e,t,a){"use strict";a.d(t,{N:function(){return l}});var s=a(75403),r=a(72253),n=a(77113);function l(){var e,t;let a=(0,n.iZ)(e=>e.project),l=null==a?void 0:a.supabase_project_config,i=(0,r.S)({workspaceId:null!==(t=null==a?void 0:a.workspace_id)&&void 0!==t?t:""}),o=(0,s.Z)(i,l),d=null===(e=i.supabaseOrganizations)||void 0===e?void 0:e.flatMap(e=>e.projects||[]);return!o&&d&&(null==l?void 0:l.supabase_project_id)&&d.find(e=>e.id===l.supabase_project_id)||null}},24853:function(e,t,a){"use strict";a.d(t,{C:function(){return r},p:function(){return i}});var s,r,n=a(2265),l=a(29328);function i(){let e=(0,l.f6)(e=>e.activeMode);return(0,n.useCallback)(t=>{let a=(0,l.XE)(e);document.querySelectorAll("iframe#".concat(a)).forEach(e=>{e.contentWindow&&e.contentWindow.postMessage(t,"*")})},[e])}(s=r||(r={})).ELEMENT_CLICKED="ELEMENT_CLICKED",s.TOGGLE_SELECTOR="TOGGLE_SELECTOR",s.UPDATE_SELECTED_ELEMENTS="UPDATE_SELECTED_ELEMENTS",s.SELECTOR_STATE_RESPONSE="SELECTOR_STATE_RESPONSE",s.TOGGLE_PICK_AND_EDIT_REQUESTED="TOGGLE_PICK_AND_EDIT_REQUESTED",s.REQUEST_PICKER_STATE="REQUEST_PICKER_STATE",s.SELECTOR_SCRIPT_LOADED="SELECTOR_SCRIPT_LOADED",s.GET_SELECTOR_STATE="GET_SELECTOR_STATE",s.REQUEST_SELECTED_ELEMENTS="REQUEST_SELECTED_ELEMENTS",s.SET_ELEMENT_CONTENT="SET_ELEMENT_CONTENT",s.SET_ELEMENT_ATTRS="SET_ELEMENT_ATTRS",s.SET_STYLESHEET="SET_STYLESHEET",s.EDIT_TEXT_REQUESTED="EDIT_TEXT_REQUESTED",s.ELEMENT_DOUBLE_CLICKED="ELEMENT_DOUBLE_CLICKED",s.ELEMENT_TEXT_UPDATED="ELEMENT_TEXT_UPDATED",s.COMPONENT_TREE="COMPONENT_TREE",s.REQUEST_COMPONENT_TREE="REQUEST_COMPONENT_TREE",s.HOVER_ELEMENT_REQUESTED="HOVER_ELEMENT_REQUESTED",s.UNHOVER_ELEMENT_REQUESTED="UNHOVER_ELEMENT_REQUESTED",s.KEYBIND="KEYBIND",s.DUPLICATE_ELEMENT_REQUESTED="DUPLICATE_ELEMENT_REQUESTED",s.GET_PARENT_ELEMENT="GET_PARENT_ELEMENT",s.PARENT_ELEMENT="PARENT_ELEMENT",s.SCROLL_HAPPENED="SCROLL_HAPPENED"},3097:function(e,t,a){"use strict";a.d(t,{U:function(){return d},b:function(){return o}});var s=a(5978),r=a(2265),n=a(78099),l=a(74746);let i=e=>{if(e.created_at&&!(e.created_at instanceof s.EK)){let{seconds:t,nanoseconds:a}=e.created_at;return{...e,created_at:new s.EK(t,a)}}return e},o=()=>{let e=(0,l.aK)(e=>e.latestStreamedMessage);return e?i(e):null},d=e=>{let{projectId:t,messageId:a}=e,[l,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!t||!a)return;let e=(0,s.JU)(n.db,"projects",t,"trajectory",a);return(0,s.cf)(e,e=>{e.exists()?i(e.data()):i(null)})},[t,a]),l}},79396:function(e,t,a){"use strict";a.d(t,{I:function(){return p}});var s=a(21770),r=a(14438),n=a(65666),l=a(49131),i=a(21288),o=a(50126),d=a(37675),c=a(5978),u=a(2265),m=a(78099);let p=e=>{let{setIsSomeRevertMutationPending:t}=(0,d.Xr)(),a=(0,l.SJ)(),p=(0,n.D)(),{setActiveEditId:h}=(0,o.pE)(),{isRevertSafe:f}=function(e){let{projectId:t}=e,a=(0,u.useCallback)(async e=>{let{targetEditId:a}=e,s=await (0,c.QT)((0,c.JU)(m.db,"projects",t,"edits",a));if(!s.exists())return i.logging.warn("invalid_edit_id_for_supabase_revert_check",{editId:a}),!0;let r=s.data();return(await (0,c.PL)((0,c.IO)((0,c.hJ)(m.db,"projects",t,"trajectory"),(0,c.ar)("created_at",">",r.created_at),(0,c.ar)("sql_run_state","in",["running","succeeded"]),(0,c.Xo)("created_at","desc"),(0,c.b9)(1)))).empty},[t]);return{isRevertSafe:(0,u.useCallback)(e=>{let{targetEditId:t}=e;return a({targetEditId:t})},[a])}}({projectId:p}),{setEditIdToConfirmRestoreFor:g}=(0,d.Xr)(),v=async t=>{let{edit:s,dry_run:r,via_undo:n}=t,l=s.id;if(s.revert_target_edit_id&&(l=s.revert_target_edit_id),!(null==e?void 0:e.skipSafetyCheck)&&!await f({targetEditId:l}))return null;let i={edit_id:l,dry_run:r,via_undo:n};return a.post("/projects/".concat(p,"/revert-to-edit"),i)};return(0,s.D)({mutationFn:v,onMutate:()=>{t(!0)},onSuccess:(t,a)=>{var s;if(!t){g(a.edit.revert_target_edit_id||a.edit.id);return}if(!a.via_undo){let e=t.commit_message;void 0===e&&t.tags&&(e=t.tags.summary);let a=e?"Restored to earlier version: ".concat(e):"Restored to earlier version";r.Am.success("Success",{description:a})}null==e||null===(s=e.onSuccess)||void 0===s||s.call(e),h(t.id)},onError:e=>{var t;i.logging.error("could_not_revert_to_earlier_version",{error:e}),r.Am.error("Could not revert to earlier version",{description:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.detail})},onSettled:()=>{t(!1)}})}},72380:function(e,t,a){"use strict";a.d(t,{v:function(){return i}});var s=a(21770),r=a(60256),n=a(64040),l=a(49131);let i=()=>{let{userData:e}=(0,r.SE)();return(0,s.D)({mutationFn:async t=>(0,l.SJ)().put("/user/".concat(e.id),{tips:t}),onError:e=>{(0,n.Eo)(e)}})}},26178:function(e,t,a){"use strict";a.d(t,{H:function(){return k}});var s=a(46214),r=a(2265),n=a(44481),l=a(14438),i=a(32582),o=a(60034),d=a(21288),c=a(3813),u=a(21399),m=a(82054),p=a(29328),h=a(27899);let f=e=>{let{visibleMode:t}=e,a=(0,p.XE)(t);return document.querySelector("iframe#".concat(a))},g=e=>{let{elementBounds:t,iframe:a,elementSpacing:s,elementHeight:r}=e,n=t.y+t.height+s;if(n+r+16<=a.offsetHeight)return n;let l=t.y-r-s;return l>=16?l:t.y+8},v=e=>{let{elementBounds:t,iframe:a,elementWidth:s}=e,r=t.x+t.width/2-s/2;return r+s>a.offsetWidth-16?a.offsetWidth-s-16:r<16?16:r},x=e=>{let{iframeRect:t,x:a,y:s}=e;return{x:t.x+a,y:t.y+s}},b=e=>{let{elementBounds:t,visibleMode:a,showFloatingInput:s}=e,r=f({visibleMode:a});if(!r)return;let n=r.getBoundingClientRect(),l=g({elementBounds:t,iframe:r,elementHeight:h.dY,elementSpacing:h.zQ});s(x({iframeRect:n,x:v({elementBounds:t,iframe:r,elementWidth:h.u4}),y:l}))},y=e=>{let{elementBounds:t,visibleMode:a,showVisualEditsPanel:s}=e,r=f({visibleMode:a});if(!r)return;let n=r.getBoundingClientRect(),l=g({elementBounds:t,iframe:r,elementHeight:h.xz,elementSpacing:h.oy});s(x({iframeRect:n,x:v({elementBounds:t,iframe:r,elementWidth:h.hV}),y:l}))};var j=a(63420),E=a(50273),w=a(24853);let N={current:!1},_=e=>{let{isLocked:t,elementType:a,payload:s,ast:r}=e;return!t&&"button"!==a&&(0,i.H2)({...s,content:null},r)},C=e=>{let{payload:t,sendIframeMessage:a}=e;a({type:w.C.EDIT_TEXT_REQUESTED,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col}}})};function k(){let{isLocked:e}=(0,u.i)(),t=(0,c.xR)(),{ast:a,setHistory:h}=(0,j.v)(),f=(0,E.UC)(e=>e.isPickAndEditActive),{setIsPickAndEditActive:g,showFloatingInput:v,showVisualEditsPanel:x}=(0,E.S9)(),{store:k}=(0,p.My)(),S=(0,E.UC)(e=>e.selectedElements),{setSelectedElements:T,setSearchQuery:A,closeVisualEditsPanel:I}=(0,E.S9)(),L=(0,w.p)(),R=(0,r.useCallback)(e=>{let{isPickAndEditActive:t,selectedElements:a}=e;L({type:w.C.TOGGLE_SELECTOR,payload:{isActive:t}}),L({type:w.C.UPDATE_SELECTED_ELEMENTS,payload:a})},[L]),D=(0,r.useCallback)(()=>{R({isPickAndEditActive:f,selectedElements:S})},[f,S,R]),P=(0,r.useCallback)(()=>{g(!0),R({isPickAndEditActive:!0,selectedElements:S})},[g,R,S]),M=(0,r.useCallback)(()=>{g(!1),R({isPickAndEditActive:!1,selectedElements:S})},[g,R,S]),O=(0,r.useCallback)(()=>{f?M():P()},[f,P,M]),z=(0,o.z)();(0,r.useEffect)(()=>{L({type:w.C.TOGGLE_SELECTOR,payload:{isActive:f}})},[L,f]);let U=(0,r.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,a=e.data.lineNumber,s=e.data.col;t&&a&&s&&L({type:w.C.HOVER_ELEMENT_REQUESTED,payload:{id:{filePath:t,lineNumber:a,col:s}}})},[L]),F=(0,r.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,a=e.data.lineNumber,s=e.data.col;t&&a&&s&&L({type:w.C.UNHOVER_ELEMENT_REQUESTED,payload:{id:{filePath:t,lineNumber:a,col:s}}})},[L]),K=(0,r.useCallback)(e=>{if(!e){l.Am.error("Failed to select element");return}s.ZP.capture("visual_edits:element_selected",{type:e.elementType});try{var t;let a=e=>e?JSON.parse(decodeURIComponent(e.toString())):null,s={...e,content:a(e.content),children:null===(t=e.children)||void 0===t?void 0:t.map(e=>({...e,content:a(e.content)}))};T([s]),L({type:w.C.UPDATE_SELECTED_ELEMENTS,payload:[s]})}catch(t){l.Am.error("Error processing element data",{description:t instanceof Error?t.message:"Unknown error"}),d.logging.error("Error in handleElementClick",{error:t,elementData:e})}},[T,L]),Z=(0,r.useRef)();return(0,r.useEffect)(()=>{Z.current=r=>{switch(r.data.type){case"ELEMENT_CLICKED":{let s=r.data.payload,n=r.data.rect,l=k.getState().visibleMode;n&&(t?(A(""),y({elementBounds:n,visibleMode:l,showVisualEditsPanel:x})):b({elementBounds:n,visibleMode:l,showFloatingInput:v})),_({isLocked:e,elementType:s.elementType,payload:s,ast:a})&&C({payload:s,sendIframeMessage:L}),K(r.data.payload)}break;case"TOGGLE_PICK_AND_EDIT_REQUESTED":case"ELEMENT_DOUBLE_CLICKED":break;case"REQUEST_PICKER_STATE":case"REQUEST_SELECTED_ELEMENTS":L({type:w.C.UPDATE_SELECTED_ELEMENTS,payload:S});break;case"SELECTOR_SCRIPT_LOADED":D();break;case"GET_SELECTOR_STATE":L({type:w.C.SELECTOR_STATE_RESPONSE,payload:{isActive:f}});break;case"ELEMENT_TEXT_UPDATED":{s.ZP.capture("visual_edits:element_text_updated");let e=r.data.payload,t=S.find(t=>t.filePath===e.id.filePath&&t.lineNumber===e.id.lineNumber);if(!t)return;let a={...t,textContent:e.content};T([a,...S.filter(e=>e.filePath!==t.filePath||e.lineNumber!==t.lineNumber)]),z(a,t=>(0,i.Rw)(t,e.content)),h(s=>[...s,{type:m.C.TEXT_CHANGE,element:a,oldText:t.textContent||"",newText:e.content}]);break}case"SELECTOR_SCRIPT_LOADED":L({type:w.C.TOGGLE_SELECTOR,payload:{isActive:!0}}),g(!0);break;case"PARENT_ELEMENT":{s.ZP.capture("visual_edits:get_parent_element");let e=r.data.payload;e&&K(e);break}case w.C.SCROLL_HAPPENED:I()}}},[a,P,M,K,D,e,f,z,S,L,h,g,T,v,k,t,A,x,I]),(0,r.useEffect)(()=>{if(!N.current){let e=e=>{var t;null===(t=Z.current)||void 0===t||t.call(Z,e)};return window.addEventListener("message",e),N.current=!0,()=>{window.removeEventListener("message",e),N.current=!1}}},[]),(0,n.y1)("esc",e=>{e.preventDefault(),e.stopPropagation()},{enableOnFormTags:!0},[]),(0,r.useEffect)(()=>(L({type:w.C.UPDATE_SELECTED_ELEMENTS,payload:S}),D(),()=>{R({isPickAndEditActive:!1,selectedElements:[]}),L({type:w.C.TOGGLE_SELECTOR,payload:{isActive:!1}})}),[D,S,L,R]),{isPickAndEditActive:f,togglePickAndEdit:O,handleDeactivatePickAndEdit:M,selectedElements:S,hoverElement:U,unhoverElement:F,canEdit:!e}}},68640:function(e,t,a){"use strict";a.d(t,{Y:function(){return n}});var s=a(74746),r=a(77113);let n=e=>{var t;let a=(0,r.iZ)(e=>e.project),n=(0,s.uO)(null!==(t=null==a?void 0:a.latest_commit_sha)&&void 0!==t?t:void 0);return e.commitSha===(null==a?void 0:a.latest_commit_sha)||(null==n?void 0:n.type)=="revert"&&n.revert_target_edit_id==e.editId}},60254:function(e,t,a){"use strict";a.d(t,{A7:function(){return m},TO:function(){return c},ag:function(){return u}});var s=a(57437),r=a(2265),n=a(59625),l=a(14884);let i=e=>({files:{},pendingChanges:{},isLoading:!1,isSyncing:!1,lastSyncTimestamp:void 0,syncError:void 0,uploads:[],projectId:e}),o=e=>(0,n.Ue)()((0,l.n)((t,a)=>({...i(e),setFile:(e,a)=>t(t=>({files:{...t.files,[e]:a}})),removeFile:e=>t(t=>{let{[e]:a,...s}=t.files;return{files:s}}),updateFileContent:(e,a)=>t(t=>({files:{...t.files,[e]:a}})),setSyncing:e=>t({isSyncing:e,lastSyncTimestamp:e?void 0:Date.now()}),setSyncError:e=>t({syncError:e,isSyncing:!1}),setLoading:e=>t({isLoading:e}),addPendingChange:(e,a)=>t(t=>({pendingChanges:{...t.pendingChanges,[e]:a}})),removePendingChange:e=>t(t=>{let{[e]:a,...s}=t.pendingChanges;return{pendingChanges:s}}),clearPendingChanges:()=>t({pendingChanges:{}}),hasUnsavedChanges:()=>{let{pendingChanges:e}=a();return Object.keys(e).length>0},reset:()=>t({...i(a().projectId)}),addUpload:e=>t(t=>({uploads:[...t.uploads,e]})),clearUploads:()=>t({uploads:[]})}))),d=(0,r.createContext)(null),c=e=>{let{children:t,projectId:a}=e,n=(0,r.useRef)(o(a)),l=(0,r.useCallback)(()=>n.current.getState().pendingChanges,[]),i=(0,r.useCallback)(()=>n.current.getState().files,[]),c={store:n.current,snapshot:{getPendingChanges:l,getFiles:i}};return(0,s.jsx)(d.Provider,{value:c,children:t})};function u(){let e=(0,r.useContext)(d);if(!e)throw Error("useCodeEditorContext must be used within a CodeEditorProvider");return e}function m(e){let{store:t}=u();return t(e)}},25658:function(e,t,a){"use strict";a.d(t,{VF:function(){return d},f6:function(){return o},z:function(){return c}});var s=a(57437),r=a(2265),n=a(59625);let l=()=>(0,n.Ue)(()=>({showHistory:!1})),i=(0,r.createContext)(null),o=e=>{let{children:t}=e,a=(0,r.useRef)(l()),n={store:a.current,setShowHistory:e=>{let t=a.current,s=t.getState(),r="function"==typeof e?e(s.showHistory):e;t.setState({showHistory:r})}};return(0,s.jsx)(i.Provider,{value:n,children:t})};function d(){let e=(0,r.useContext)(i);if(!e)throw Error("useHistoryContext must be used within a HistoryProvider");return e}function c(e){let{store:t}=d();return t(e)}},63420:function(e,t,a){"use strict";a.d(t,{P:function(){return f},v:function(){return g}});var s=a(57437),r=a(46214),n=a(2265),l=a(64040),i=a(49131),o=a(32582),d=a(26034),c=a(21288),u=a(60254),m=a(29328),p=a(77113);let h=(0,n.createContext)(null);function f(e){let{children:t}=e,{refreshPreview:a,startLiveMode:f}=(0,m.My)(),g=(0,u.A7)(e=>e.setFile),v=(0,u.A7)(e=>e.pendingChanges),x=(0,u.A7)(e=>e.reset),b=(0,u.A7)(e=>e.clearPendingChanges),y=(0,u.A7)(e=>e.addPendingChange),j=(0,n.useRef)(null),E=(0,p.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.id}),w=(0,u.A7)(e=>e.files),N=(0,n.useMemo)(()=>Object.entries(w),[w]),_=(0,u.A7)(e=>e.uploads),[C,k]=(0,n.useState)(!1),[S,T]=(0,n.useState)(null),[A,I]=(0,n.useState)([]),[L,R]=(0,n.useState)([]),{snapshot:D}=(0,u.ag)(),P=(0,n.useCallback)(()=>{N&&I((0,o.x2)(N))},[N]);(0,n.useEffect)(()=>{P()},[P]);let[M,O]=(0,n.useState)(!1),z=(0,n.useCallback)(()=>{O(!0),f()},[f,O]),U=(0,m.vE)();(0,n.useEffect)(()=>{if(!M||!U)return;let e=new URL("/_sandbox/code/ws",U);return j.current=new WebSocket(e),j.current.onmessage=e=>{try{let{type:t,data:a}=JSON.parse(e.data);if("init_code"===t)x(),k(!0),a.forEach(e=>{let[t,a]=e;g(t,a)});else if("file_update"===t){let e=D.getFiles();a.forEach(t=>{let[a,s]=t;e[a]!==s&&g(a,s)})}}catch(e){c.logging.error("Error processing WebSocket message",{project_id:E,error:e})}},j.current.onclose=e=>{e.wasClean||c.logging.error("Code WebSocket closed prematurely",{project_id:E,event:e})},j.current.onerror=e=>{c.logging.error("Code WebSocket error",{project_id:E,error:e})},()=>{var e;null===(e=j.current)||void 0===e||e.close(),j.current=null}},[U,E,x,g,M,D]);let F=(0,n.useCallback)(async function(e){let{commitMessage:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.ZP.capture("visual_edits:sync_started");let a=Object.entries(e);if(!E)throw Error("No project id");if(0===a.length)throw Error("No changes to sync");try{let e=(0,i.SJ)(),s=await Promise.all(_.map(e=>(0,d.Sv)({dir_name:e.dir_name,file_name:e.id}).then(t=>({download_url:t.url,file_id:e.file_name})))),r=await e.post("/projects/".concat(E,"/edit-code"),{changes:a.map(e=>{let[t,a]=e;return{path:t,content:a}}),uploads:s,commit_message:t||null});if("error"in r&&r.error)throw Error("Failed to sync code");b()}catch(e){(0,l.Eo)(e),r.ZP.capture("visual_edits:sync_failed",{error:e instanceof Error?e.message:"Unknown error",changes:null==a?void 0:a.map(e=>{let[t,a]=e;return[t,a.length]}),project_id:E})}},[E,_,b]),K=Object.keys(v).length>0;return(0,s.jsx)(h.Provider,{value:{syncCode:F,ast:A,code:N,generateAst:P,refreshPreview:a,startLiveMode:z,history:L,setHistory:R,currentClassName:S,setCurrentClassName:T,addPendingChange:y,hasUnsavedChanges:K,hasInitialCode:C},children:t})}function g(){let e=(0,n.useContext)(h);if(!e)throw Error("useSandboxCode must be used within a SandboxCodeProvider");return{code:e.code,syncCode:e.syncCode,ast:e.ast,generateAst:e.generateAst,refreshPreview:e.refreshPreview,enableServer:e.startLiveMode,history:e.history,setHistory:e.setHistory,currentClassName:e.currentClassName,setCurrentClassName:e.setCurrentClassName,addPendingChange:e.addPendingChange,hasUnsavedChanges:e.hasUnsavedChanges,hasInitialCode:e.hasInitialCode}}},50273:function(e,t,a){"use strict";a.d(t,{NE:function(){return d},S9:function(){return c},UC:function(){return u}});var s=a(57437),r=a(2265),n=a(59625),l=a(14884);let i=()=>(0,n.Ue)()((0,l.n)(()=>({selectedElements:[],isVisualEditingActive:!1,isPickAndEditActive:!1,searchQuery:"",isSaving:!1,floatingInputState:{isVisible:!1,position:null},visualEditsPanelState:{isOpen:!1,position:null}}))),o=(0,r.createContext)(null),d=e=>{let{children:t}=e,a=(0,r.useRef)(i()),n={store:a.current,setSelectedElements:e=>{a.current.setState(t=>{t.selectedElements=e})},removeSelectedElement:e=>{a.current.setState(t=>{t.selectedElements=t.selectedElements.filter(t=>t.filePath!==e.filePath||t.lineNumber!==e.lineNumber)})},turnOffVisualEditing:()=>{a.current.setState(e=>{e.isVisualEditingActive=!1,e.isPickAndEditActive=!1,e.selectedElements=[],e.isSaving=!1,e.visualEditsPanelState={isOpen:!1,position:null},e.floatingInputState={isVisible:!1,position:null}})},setIsVisualEditorPanelOpen:e=>{let t=a.current;"function"==typeof e?t.setState(t=>{t.isVisualEditingActive=e(t.isVisualEditingActive)}):t.setState(t=>{t.isVisualEditingActive=e})},setIsPickAndEditActive:e=>{let t=a.current;"function"==typeof e?t.setState(t=>{t.isPickAndEditActive=e(t.isPickAndEditActive)}):t.setState(t=>{t.isPickAndEditActive=e})},showFloatingInput:e=>{a.current.setState(t=>{t.floatingInputState={isVisible:!0,position:e}})},showVisualEditsPanel:e=>{a.current.setState(t=>{t.visualEditsPanelState={isOpen:!0,position:e}})},closeVisualEditsPanel:()=>{a.current.setState(e=>{e.visualEditsPanelState={isOpen:!1,position:null},e.searchQuery="",e.selectedElements=[]})},setSearchQuery:e=>{a.current.setState(t=>{t.searchQuery=e})},setIsSaving:e=>{a.current.setState(t=>{t.isSaving=e})}};return(0,s.jsx)(o.Provider,{value:n,children:t})};function c(){let e=(0,r.useContext)(o);if(!e)throw Error("useVisualEditorContext must be used within a VisualEditorProvider");return e}function u(e){let{store:t}=c();return t(e)}},49968:function(e,t,a){"use strict";a.d(t,{Ny:function(){return d},U1:function(){return n},fA:function(){return l},oo:function(){return o},pr:function(){return i}});var s=a(54257);let r=()=>"https://console.firebase.google.com/u/0/project/".concat(s.q.projectId,"/firestore/databases/-default-/data"),n=e=>"".concat(r(),"/~2Fprojects~2F").concat(e),l=e=>e?"".concat(r(),"/~2Fusers~2F").concat(e):"",i=(e,t)=>"".concat(n(e),"~2Ftrajectory~2F").concat(t),o=(e,t)=>"".concat(n(e),"~2Fedits~2F").concat(t),d=e=>"".concat(r(),"/~2Fworkspaces~2F").concat(e)},884:function(e,t,a){"use strict";a.d(t,{z:function(){return x}});var s=a(57437),r=a(38846),n=a(2265),l=a(7342),i=a(95186),o=a(26815),d=a(57054),c=a(12339),u=a(94508),m=a(62869),p=a(48541);let h=n.createContext(null);function f(e){let{children:t}=e,[a,r]=n.useState(null),l=n.useRef(null),i=n.useCallback(e=>{r(e),l.current=e},[]),o=n.useRef(null),d=n.useCallback(()=>{r(null)},[]);return(0,s.jsxs)(h.Provider,{value:{showTooltip:i,hideTooltip:d},children:[t,(0,s.jsx)("div",{ref:o,className:(0,u.cn)("pointer-events-none fixed h-fit w-fit rounded-md border bg-muted px-2 py-1 text-sm text-foreground shadow-sm transition-opacity duration-100 ease-out","bottom-4 right-4 whitespace-nowrap capitalize",a?"opacity-100":"opacity-0"),children:l.current})]})}let g=e=>{let{color:t,onClick:a,name:r}=e,i=n.useContext(h),o="transparent"===t?(0,s.jsx)(l.V,{size:.666,lightColor:"#fff",darkColor:"#ddd"}):(0,s.jsx)("div",{className:"h-full w-full rounded-sm",style:{backgroundColor:t,boxShadow:"0px 0px 0px 1px hsl(0deg 0% 98% / 10%) inset"}});return(0,s.jsx)(m.z,{className:"h-8 w-8 overflow-hidden rounded-sm border-none bg-transparent p-0 ring-white hover:ring-1",onClick:a,onMouseOver:e=>{e.currentTarget.getBoundingClientRect(),null==i||i.showTooltip(r)},onMouseLeave:()=>null==i?void 0:i.hideTooltip(),children:o})},v=e=>{let{colors:t,onChange:a}=e,r=n.useMemo(()=>(0,p.yG)(t),[t]);return(0,s.jsx)(f,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[r.groups.map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)(o.Label,{className:"block pb-2 text-sm capitalize",children:t}),(0,s.jsx)("div",{className:"flex flex-row flex-wrap gap-1.5",children:r.map(e=>{let[t,r]=e;return(0,s.jsx)(g,{color:r,onClick:()=>a(t),name:t},t)})})]},t)}),(0,s.jsxs)("div",{children:[(0,s.jsx)(o.Label,{className:"block pb-4 text-sm capitalize",children:"Other Colors"}),(0,s.jsxs)("div",{className:"flex flex-row flex-wrap gap-1.5",children:[r.singles.map(e=>{let[t,r]=e;return(0,s.jsx)(g,{color:r,onClick:()=>a(t),name:t},t)}),(0,s.jsx)(g,{color:"transparent",onClick:()=>a("transparent"),name:"transparent"}),(0,s.jsx)(g,{color:"black",onClick:()=>a("inherit"),name:"inherit"})]})]})]})})};function x(e){let{color:t,onChange:a,presetColors:u,children:m,disabled:h=!1}=e,[g,x]=n.useState(()=>(0,p.oo)(t)||{r:0,g:0,b:0,a:1}),[b,y]=n.useState(()=>(0,p.py)(g.r,g.g,g.b,g.a,0)),[j,E]=n.useState(t),[w,N]=n.useState(!1);n.useEffect(()=>{if(t===j)return;let e=(0,p.oo)(t)||{r:0,g:0,b:0,a:1},a=(0,p.py)(e.r,e.g,e.b,e.a,b.h);x(e),y(a),E(t)},[t,j,b.h]);let _=n.useRef(null),[C,k]=n.useState(!1),S=n.useCallback(e=>{var t;let s=null===(t=_.current)||void 0===t?void 0:t.getBoundingClientRect();if(!s)return;let r=Math.min(Math.max(0,e.clientX-s.left),s.width),n=Math.min(Math.max(0,e.clientY-s.top),s.height),l=r/s.width*100,i=100-n/s.height*100,o=(0,p.WE)(b.h,l,i,b.a);x(o),y({...b,s:l,v:i,a:b.a}),a((0,p.vq)(o.r,o.g,o.b,o.a))},[b,a]);n.useEffect(()=>{let e=e=>{C&&S(e)},t=()=>{k(!1),document.body.classList.remove("select-none")};return C&&(document.body.classList.add("select-none"),window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{document.body.classList.remove("select-none"),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[C,S]);let T=n.useCallback(e=>{let[t]=e;y({...b,h:t});let s=(0,p.WE)(t,b.s,b.v,b.a);x(s),a((0,p.vq)(s.r,s.g,s.b,s.a))},[b,a]),A=n.useCallback(e=>{let[t]=e;y({...b,a:t});let s=(0,p.WE)(b.h,b.s,b.v,t);x(s),a((0,p.vq)(s.r,s.g,s.b,s.a))},[b,a]);return(0,s.jsxs)(d.J2,{open:w,onOpenChange:h?void 0:N,children:[(0,s.jsx)(d.xo,{disabled:h,asChild:!0,children:m}),(0,s.jsx)(d.yk,{className:"mb-0 flex w-[285px] flex-col overflow-y-hidden rounded-lg border border-muted-border bg-popover px-0 pb-0 pt-0 shadow-lg",style:{maxHeight:"var(--radix-popover-content-available-height)"},collisionPadding:5,onKeyDown:e=>{"Escape"===e.key&&(N(!1),e.preventDefault(),e.stopPropagation())},children:(0,s.jsxs)(c.mQ,{defaultValue:"styles",className:"flex min-h-0 flex-1 flex-col",children:[(0,s.jsxs)(c.dr,{className:"my-1 w-full px-4",children:[(0,s.jsx)(c.SP,{disabled:h,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"styles",children:"Styles"}),(0,s.jsx)(c.SP,{disabled:h,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"custom",children:"Custom"})]}),(0,s.jsx)(c.nU,{value:"styles",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,s.jsx)(f,{children:!!u&&(0,s.jsx)(v,{colors:u,onChange:a})})}),(0,s.jsx)(c.nU,{value:"custom",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{ref:_,className:"relative h-56 w-full rounded-md ".concat(h?"cursor-not-allowed opacity-50":"cursor-default"),style:{backgroundColor:"hsl(".concat(b.h,", 100%, 50%)"),backgroundImage:"linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)"},onMouseDown:e=>{h||(k(!0),S(e))},children:(0,s.jsx)("div",{className:"absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white shadow-md shadow-muted/50",style:{left:"".concat(b.s,"%"),top:"".concat(100-b.v,"%"),backgroundColor:"rgb(".concat(g.r,", ").concat(g.g,", ").concat(g.b)}})}),(0,s.jsxs)(r.fC,{disabled:h,min:0,max:360,step:1,value:[b.h],onValueChange:T,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",children:[(0,s.jsx)(r.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full bg-primary/20",style:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},children:(0,s.jsx)(r.e6,{className:"absolute h-full bg-primary opacity-0"})}),(0,s.jsx)(r.bU,{className:"block h-4 w-4 rounded-full border-2 border-primary bg-background shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",style:{backgroundColor:"hsl(".concat(b.h,", 100%, 50%)")}})]}),(0,s.jsxs)(r.fC,{disabled:h,min:0,max:1,step:.01,value:[b.a],onValueChange:A,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",style:{"--value":(0,p.vq)(g.r,g.g,g.b,1)},children:[(0,s.jsxs)(r.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full",children:[(0,s.jsx)("div",{className:"absolute inset-0",children:(0,s.jsx)(l.V,{size:.666,lightColor:"#fff",darkColor:"#ddd"})}),(0,s.jsx)("div",{className:"absolute inset-0",children:(0,s.jsx)("div",{className:"h-full w-full",style:{background:"linear-gradient(to right, transparent 0%, ".concat((0,p.vq)(g.r,g.g,g.b,1)," 100%)")}})})]}),(0,s.jsx)(r.bU,{className:"relative block h-4 w-4 rounded-full border-2 border-primary bg-white shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",children:(0,s.jsx)("span",{className:"absolute inset-0 rounded-full",style:{backgroundColor:(0,p.vq)(g.r,g.g,g.b,b.a)}})})]})]}),(0,s.jsx)("div",{className:"grid gap-2",children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(o.Label,{className:"text-xs",htmlFor:"hex",children:"Hex"}),(0,s.jsx)(i.I,{id:"hex",disabled:h,value:j,onChange:e=>{if(h)return;let t=e.target.value;E(t);let s=(0,p.oo)(t);s&&(x(s),y((0,p.py)(s.r,s.g,s.b,s.a,0)),a(t))},className:"h-8 bg-input"})]})})})]})})]})})]})}},48541:function(e,t,a){"use strict";function s(e){if(!e)return null;try{e=e.replace("#",""),(3===e.length||4===e.length)&&(e=e.split("").map(e=>e+e).join(""));let t=8===e.length,a=parseInt(e.slice(0,2),16),s=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16),n=t?parseInt(e.slice(6,8),16)/255:1;return{r:isNaN(a)?0:a,g:isNaN(s)?0:s,b:isNaN(r)?0:r,a:isNaN(n)?1:n}}catch(e){return null}}function r(e,t,a,s){let r=e=>Math.round(e).toString(16).padStart(2,"0"),n=Math.round(255*s);return"#".concat(r(e)).concat(r(t)).concat(r(a)).concat(n<255?r(n):"")}function n(e,t,a,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=Math.max(e/=255,t/=255,a/=255),l=Math.min(e,t,a),i=n-l,o=0,d=0===n?0:i/n;if(n===l)return{h:r,s:100*d,v:100*n,a:s};switch(n){case e:o=(t-a)/i+(t<a?6:0);break;case t:o=(a-e)/i+2;break;case a:o=(e-t)/i+4}return{h:360*(o/=6),s:100*d,v:100*n,a:s}}function l(e,t,a,s){let r=0,n=0,l=0,i=Math.floor(6*(e/=360)),o=6*e-i,d=(a/=100)*(1-(t/=100)),c=a*(1-o*t),u=a*(1-(1-o)*t);switch(i%6){case 0:r=a,n=u,l=d;break;case 1:r=c,n=a,l=d;break;case 2:r=d,n=a,l=u;break;case 3:r=d,n=c,l=a;break;case 4:r=u,n=d,l=a;break;case 5:r=a,n=d,l=c}return{r:Math.round(255*r),g:Math.round(255*n),b:Math.round(255*l),a:s}}a.d(t,{WE:function(){return l},oo:function(){return s},py:function(){return n},vq:function(){return r},yG:function(){return i}});let i=e=>{if(!e)return{singles:[],groups:[]};let t=[],a=[];for(let[s,r]of Object.entries(e))if("string"!=typeof r){let e=[];for(let[t,a]of Object.entries(r))"string"!=typeof a||a.includes("--")||e.push(["".concat(s,"-").concat(t),a]);e.length>0&&a.push([s,e])}else{if(r.includes("--"))continue;t.push([s,r])}return{singles:t.filter(e=>{let[t]=e;return["black","white"].includes(t)}),groups:a}}},23590:function(e,t,a){"use strict";a.d(t,{G:function(){return n}});var s=a(67817),r=a(2043);let n=()=>{let{canEdit:e,isWorkspaceMember:t}=(0,r.t)(),a=(0,s.v)();return t&&e||a}},27410:function(e,t,a){"use strict";var s=a(57437);a(2265);var r=a(81103);t.Z=e=>{let{children:t,label:a,side:n="bottom"}=e;return(0,s.jsxs)(r.u,{children:[(0,s.jsx)(r.aJ,{asChild:!0,children:t}),(0,s.jsx)(r._v,{className:"z-[2001]",side:n,children:a})]})}},74928:function(e,t,a){"use strict";a.d(t,{wy:function(){return n},zF:function(){return r}});var s=a(962);let r=s.fC,n=s.wy;s.Fw},9259:function(e,t,a){"use strict";a.d(t,{R:function(){return i}});var s=a(57437),r=a(2265),n=a(95186),l=a(94508);let i=r.forwardRef((e,t)=>{let{value:a,onChange:i,min:o=0,max:d=100,step:c=1,className:u,scrubSensitivity:m=.5,direction:p="horizontal",icon:h,leftIcon:f,disabled:g=!1,...v}=e,[x,b]=r.useState(a.toString()),[y,j]=r.useState(!1),E=r.useRef(!1),w=r.useRef(0),N=r.useRef(0),_=r.useRef(parseFloat(x)||o),C=r.useMemo(()=>{if(!Number.isFinite(c))return 0;let e=c.toString().split(".")[1];return e?e.length:0},[c]);function k(e){g||0!==e.button||(j(!0),E.current=!0,w.current=e.clientX,N.current=e.clientY,_.current=parseFloat(x)||o,document.addEventListener("pointermove",S),document.addEventListener("pointerup",T))}function S(e){if(!E.current)return;let t=e.clientX-w.current,a=-e.clientY+N.current,s=_.current+("horizontal"===p?t:a)*c*m;b((s=parseFloat(Math.max(o,Math.min(Math.round(s/c)*c,d)).toFixed(C))).toString()),i(s)}function T(){j(!1),E.current=!1,document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",T)}let A=()=>{b(o.toString()),i(o)},I=e=>{let t=parseFloat(e);return isNaN(t)?null:t};return r.useEffect(()=>{b(a.toString())},[a]),(0,s.jsxs)("div",{className:(0,l.cn)("group relative w-fit",u,{"opacity-50":g}),children:[f&&(0,s.jsx)("div",{className:(0,l.cn)("absolute inset-y-0 left-0 flex select-none items-center px-2 text-muted-foreground","horizontal"===p?"cursor-ew-resize":"cursor-ns-resize"),onPointerDown:k,children:f}),(0,s.jsx)(n.I,{ref:t,type:"text",className:(0,l.cn)("pr-0 [appearance:textfield] active:cursor-none disabled:opacity-100 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none","horizontal"===p?"hover:cursor-ew-resize":"hover:cursor-ns-resize",f?"pl-8":""),disabled:g,step:c,value:x,onChange:function(e){let t=e.target.value;if(""===t){b("");return}if(isNaN(Number(t)))return;b(t);let a=I(t);null!==a&&i(a)},onBlur:function(){(null===I(x)||""===x)&&A()},onPointerDown:k,...v}),!!y&&(0,s.jsx)("div",{className:(0,l.cn)("fixed inset-0","horizontal"===p?"cursor-ew-resize":"cursor-ns-resize")})]})});i.displayName="NumericScrubber"},35354:function(e,t,a){"use strict";var s=a(2265);t.Z=()=>{let[e,t]=(0,s.useState)("");return(0,s.useEffect)(()=>{t(r())},[]),{isMac:"mac"===e,isWindows:"windows"===e,isLinux:"linux"===e}};let r=()=>{let e=window.navigator.userAgentData,t=window.navigator.userAgent,a={iphone:/iphone/,ipad:/ipad|macintosh/,android:/android/},s={windows:/win/,mac:/macintosh/,linux:/linux/};if(t){let e=t.toLowerCase().replace(/^mozilla\/\d\.\d\W/,""),r=Object.keys(a).find(t=>a[t].test(e)&&window.navigator.maxTouchPoints>=1),n=Object.keys(s).find(t=>s[t].test(e));return r||n}return e?e.platform.toLowerCase():""}},52089:function(e,t,a){"use strict";a.d(t,{H$:function(){return f},hT:function(){return x},qV:function(){return g}});var s=a(21770),r=a(5978),n=a(2265),l=a(2208),i=a(29328),o=a(49131),d=a(78099),c=a(21288),u=a(61062),m=a(7163),p=a(98015);function h(e){var t,a,s;let r=e.meta_data?"|".concat(null===(t=e.meta_data)||void 0===t?void 0:t.colno,"|").concat(null===(a=e.meta_data)||void 0===a?void 0:a.lineno,"|").concat(null===(s=e.meta_data)||void 0===s?void 0:s.filename):"";return"".concat(e.error_message,"|").concat(e.type).concat(r)}function f(e){return e.filter((e,t,a)=>t===a.findIndex(t=>h(t)===h(e)))}function g(e){let{projectId:t,errorIds:a,setErrors:r}=e;return(0,s.D)({mutationFn:async()=>(r([]),(0,o.SJ)().patch("/projects/".concat(t,"/handle-errors"),{error_ids:a})),onError:e=>{c.logging.error("failed_to_submit_handled_errors",{error:e})}})}let v=e=>{e.sort((e,t)=>e.type===u.N.RUNTIME&&t.type!==u.N.RUNTIME?-1:t.created_at.seconds-e.created_at.seconds);let t={uniqueErrors:[],runtimeErrorMessages:new Set};return e.reduce((e,t)=>{if(t.type===u.N.IMMEDIATE_RUNTIME||t.type===u.N.RUNTIME){let a=t.error_message.replace(/\?v=[a-z0-9]{8}/,"?'");e.runtimeErrorMessages.has(a)||(e.runtimeErrorMessages.add(a),e.uniqueErrors.push(t))}else e.uniqueErrors.push(t);return e},t).uniqueErrors},x=e=>{let{projectId:t}=e,[a,s]=(0,n.useState)([]),u=(0,o.SJ)(),h=(0,i.vE)();(0,l.ZP)(h,{protocols:"vite-hmr",share:!0,onMessage:e=>{try{let s=JSON.parse(e.data);if((null==s?void 0:s.type)==="error"){var a;c.logging.info("build_error_from_devserver",{message:null==s?void 0:null===(a=s.err)||void 0===a?void 0:a.message});let e=m.p.safeParse(null==s?void 0:s.err);e.success?(0,p.e)(e.data,t,u):(c.logging.error("error_parsing_devserver_error",{error:e}),(0,p.e)(null==s?void 0:s.err,t,u))}}catch(e){c.logging.error("error_parsing_devserver_error",{error:e})}},onOpen:e=>{c.logging.debug("devserver_websocket_open")},onClose:e=>{c.logging.debug("devserver_websocket_close")},onError:e=>{c.logging.error("devserver_websocket_error",{event:e})},shouldReconnect:()=>!0,reconnectInterval:1e3});let f=g({projectId:t,errorIds:a.map(e=>e.id),setErrors:s});return(0,n.useEffect)(()=>{let e=function(e,t){let a=(0,r.hJ)(d.db,"projects/".concat(e,"/errors")),s=(0,r.IO)(a,(0,r.ar)("handled_at","==",null));return(0,r.cf)(s,e=>{e.empty?t([]):t(e.docs.map(e=>({...e.data(),id:e.id})))})}(t,s);return()=>e()},[t]),{errors:(0,n.useMemo)(()=>0===a.length?null:v(a),[a]),setErrors:s,handleErrorMutation:a.length>0?f:null}}},36461:function(e,t,a){"use strict";a.d(t,{g:function(){return u}});var s=a(21770),r=a(2265),n=a(14438),l=a(74746),i=a(25658),o=a(85472),d=a(64040),c=a(49131);let u=e=>{let{updateEdit:t}=(0,l.mx)(),{setShowHistory:a}=(0,i.VF)(),u=(0,s.D)({mutationFn:async t=>{let{editId:a,bookmarked:s,previousValue:r}=t;try{let t=(0,c.SJ)();return await t.put("/projects/".concat(e,"/bookmark/").concat(a),{bookmarked:s}),{editId:a,bookmarked:s}}catch(e){throw e}},onError:(e,a)=>{if(t(a.editId,{bookmarked:a.previousValue}),e instanceof o.H){let t=a.bookmarked?"bookmark":"unbookmark";n.Am.error("Failed to ".concat(t," edit"),{description:e.message||"Please try again"});return}(0,d.Eo)(e)},onSuccess:e=>{n.Am.success(e.bookmarked?"Bookmarked to history":"Bookmark removed from history",{action:{label:"View history",onClick:()=>a(!0)}})}});return{toggleBookmark:(0,r.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!a;t(e,{bookmarked:s}),u.mutate({editId:e,bookmarked:s,previousValue:a})},[u,t]),isToggling:u.isPending}}},60034:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var s=a(9078),r=a(76624),n=a(2265),l=a(14438),i=a(60254),o=a(21288),d=a(63420);let c=()=>{let{ast:e}=(0,d.v)(),t=(0,i.A7)(e=>e.addPendingChange);return(0,n.useCallback)((a,n)=>{var i,d;let c=e.find(e=>e.filePath===a.filePath);if(!c){o.logging.error("Node not found",{element:a}),l.Am.error("Node not found",{description:"Node not found"});return}let u=!1;if((0,r.default)(c.ast,{JSXElement(e){var t;(null===(t=e.node.loc)||void 0===t?void 0:t.start.line)===a.lineNumber&&(n(e.node,e),u=!0,e.stop())}}),!u)return;let m=(i=c.ast,d={sourceMaps:!0,sourceFileName:c.filePath},(0,s.default)(i,d,void 0).code);t(c.filePath,m)},[t,e,l.Am])}},32582:function(e,t,a){"use strict";a.d(t,{EE:function(){return h},H2:function(){return u},R5:function(){return o},Rw:function(){return i},Xu:function(){return c},cB:function(){return m},x2:function(){return l}});var s=a(97569),r=a(76624),n=a(98891);function l(e){let t=[];return e.map(e=>{let a,[r,n]=e;if(r.endsWith(".tsx")||r.endsWith(".ts")||r.endsWith(".jsx")||r.endsWith(".js")){try{a=(0,s.parse)(n,{sourceFilename:r,sourceType:"module",plugins:["jsx","typescript"],allowImportExportEverywhere:!0})}catch(e){return}t.push({filePath:r,ast:a})}}),t}function i(e,t){let a=e.children.find(e=>n.isJSXText(e));a?a.value=t:e.children.unshift(n.jsxText(t))}function o(e,t){Object.keys(t).forEach(a=>{e.openingElement.attributes=e.openingElement.attributes.filter(e=>{var t;return n.isJSXAttribute(e)&&(null===(t=e.name)||void 0===t?void 0:t.name)!==a}),e.openingElement.attributes.push(n.jsxAttribute(n.jsxIdentifier(a),n.stringLiteral(t[a])))})}let d=e=>n.isStringLiteral(e)?e.value:null;function c(e){let t=e.openingElement.attributes.find(e=>n.isJSXAttribute(e)&&"className"===e.name.name);return void 0===t?"":(null==t?void 0:t.value)?d(t.value):null}let u=(e,t)=>{let a=t.find(t=>t.filePath===e.filePath);if(!a)return!1;let s=!1;return(0,r.default)(a.ast,{JSXElement(t){var a;if((null===(a=t.node.loc)||void 0===a?void 0:a.start.line)===e.lineNumber&&n.isJSXElement(t.node)){let e=t.node.children;s=1===e.length&&n.isJSXText(e[0]),t.stop()}}}),s},m=(e,t,a)=>{let s=t.find(t=>t.filePath===e.filePath);if(!s)return!1;let l=!1;return(0,r.default)(s.ast,{JSXElement(t){var s;(null===(s=t.node.loc)||void 0===s?void 0:s.start.line)===e.lineNumber&&n.isJSXElement(t.node)&&(l=t.node.openingElement.attributes.some(e=>{var t;return n.isJSXAttribute(e)&&n.isStringLiteral(e.value)&&(null===(t=e.name)||void 0===t?void 0:t.name)===a}),t.stop())}}),l},p=(e,t,a)=>{let s=a.find(e=>e.filePath===t);if(!s)return null;let n=null;return(0,r.default)(s.ast,{JSXElement(t){var a;(null===(a=t.node.loc)||void 0===a?void 0:a.start.line)===e&&(n=t.node,t.stop())}}),n},h=(e,t)=>{let a=p(e.lineNumber,e.filePath,t);return a?c(a):null}},19485:function(e,t,a){"use strict";a.d(t,{C:function(){return el},O:function(){return en}});var s=a(4478),r=a.n(s),n=a(2265),l=a(88108),i=a.n(l),o=a(50676),d=a(29328),c=a(63420),u=a(13735),m=a.n(u);class p extends Error{constructor(e){super("Unable to identify the plugin based on ".concat(e,". This could be due to a misspelling, an invalid plugin, or the plugin is not yet included in the supported plugins list.")),this.name="PluginNotFoundException"}}let h=new Map([["w",[{scaleKey:"width",ns:"width",class:["width"],type:"length"}]],["min-w",[{scaleKey:"minWidth",ns:"minWidth",class:["min-width"],type:"length"}]],["max-w",[{scaleKey:"maxWidth",ns:"maxWidth",class:["max-width"],type:"length"}]],["h",[{scaleKey:"height",ns:"height",class:["height"],type:"length"}]],["min-h",[{scaleKey:"minHeight",ns:"minHeight",class:["min-height"],type:"length"}]],["max-h",[{scaleKey:"maxHeight",ns:"maxHeight",class:["max-height"],type:"length"}]],["size",[{scaleKey:"size",ns:"size",class:["width","height"],type:"length"}]],["m",[{scaleKey:"margin",ns:"margin",class:["margin"],type:"length",supportNegative:!0}]],["mx",[{scaleKey:"margin",ns:"marginX",class:["margin-left","margin-right"],type:"length",supportNegative:!0}]],["my",[{scaleKey:"margin",ns:"marginY",class:["margin-top","margin-bottom"],type:"length",supportNegative:!0}]],["mt",[{scaleKey:"margin",ns:"marginTop",class:["margin-top"],type:"length",supportNegative:!0}]],["mr",[{scaleKey:"margin",ns:"marginRight",class:["margin-right"],type:"length",supportNegative:!0}]],["mb",[{scaleKey:"margin",ns:"marginBottom",class:["margin-bottom"],type:"length",supportNegative:!0}]],["ml",[{scaleKey:"margin",ns:"marginLeft",class:["margin-left"],type:"length",supportNegative:!0}]],["p",[{scaleKey:"padding",ns:"padding",class:["padding"],type:"length"}]],["px",[{scaleKey:"padding",ns:"paddingX",class:["padding-left","padding-right"],type:"length"}]],["py",[{scaleKey:"padding",ns:"paddingY",class:["padding-top","padding-bottom"],type:"length"}]],["pt",[{scaleKey:"padding",ns:"paddingTop",class:["padding-top"],type:"length"}]],["pr",[{scaleKey:"padding",ns:"paddingRight",class:["padding-right"],type:"length"}]],["pb",[{scaleKey:"padding",ns:"paddingBottom",class:["padding-bottom"],type:"length"}]],["pl",[{scaleKey:"padding",ns:"paddingLeft",class:["padding-left"],type:"length"}]],["text",[{scaleKey:"fontSize",ns:"fontSize",class:["font-size"],type:"length"},{scaleKey:"textColor",ns:"textColor",class:["color"],type:"color"}]],["indent",[{scaleKey:"textIndent",ns:"textIndent",class:["text-indent"],type:"length",supportNegative:!0}]],["underline-offset",[{scaleKey:"textUnderlineOffset",ns:"textUnderlineOffset",class:["text-underline-offset"],type:"number"}]],["decoration",[{scaleKey:"textDecorationThickness",ns:"textDecorationThickness",class:["text-decoration-thickness"],type:"number"},{scaleKey:"textDecorationColor",ns:"textDecorationColor",class:["text-decoration-color"],type:"color"}]],["font",[{scaleKey:"fontWeight",ns:"fontWeight",class:["font-weight"],type:"number"},{scaleKey:"fontFamily",ns:"fontFamily",class:["font-family"],type:"family-name"}]],["leading",[{scaleKey:"lineHeight",ns:"lineHeight",class:["line-height"],type:"number"}]],["tracking",[{scaleKey:"letterSpacing",ns:"letterSpacing",class:["letter-spacing"],type:"length",supportNegative:!0}]],["bg",[{scaleKey:"backgroundImage",ns:"backgroundImage",class:["background-image"],type:"image"},{scaleKey:"backgroundPosition",ns:"backgroundPosition",class:["background-position"],type:"position"},{scaleKey:"backgroundSize",ns:"backgroundSize",class:["background-size"],type:"bg-size"},{scaleKey:"backgroundColor",ns:"backgroundColor",class:["background-color"],type:"color"}]],["from",[{scaleKey:"gradientColorStops",ns:"gradientStopsFrom",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsFromPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["to",[{scaleKey:"gradientColorStops",ns:"gradientStopsTo",class:["--tw-gradient-to","--tw-gradient-to-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsToPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["via",[{scaleKey:"gradientColorStops",ns:"gradientStopsVia",class:["--tw-gradient-from"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsViaPositions",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["fill",[{scaleKey:"fill",ns:"fillColor",class:["fill"],type:"color"}]],["stroke",[{scaleKey:"strokeWidth",ns:"strokeWidth",class:["stroke-width"],type:"line-width"},{scaleKey:"stroke",ns:"strokeColor",class:["border-color"],type:"color"}]],["border",[{scaleKey:"borderWidth",ns:"borderWidth",class:["border-width"],type:"line-width"},{scaleKey:"borderColor",ns:"borderColor",class:["border-color"],type:"color"}]],["ring",[{scaleKey:"ringWidth",ns:"ringWidth",class:["box-shadow"],type:"line-width"},{scaleKey:"ringColor",ns:"ringColor",class:["--tw-ring-color"],type:"color"}]],["ring-offset",[{scaleKey:"ringOffsetWidth",ns:"ringOffsetWidth",class:["--tw-ring-offset-width"],type:"line-width"},{scaleKey:"ringOffsetColor",ns:"ringOffsetColor",class:["--tw-ring-offset-color"],type:"color"}]],["rounded",[{scaleKey:"borderRadius",ns:"borderRadius",class:["border-radius"],type:"length"}]],["rounded-tl",[{scaleKey:"borderRadius",ns:"borderTopLeftRadius",class:["border-top-left-radius"],type:"length"}]],["rounded-tr",[{scaleKey:"borderRadius",ns:"borderTopRightRadius",class:["border-top-right-radius"],type:"length"}]],["rounded-br",[{scaleKey:"borderRadius",ns:"borderBottomRightRadius",class:["border-bottom-right-radius"],type:"length"}]],["rounded-bl",[{scaleKey:"borderRadius",ns:"borderBottomLeftRadius",class:["border-bottom-left-radius"],type:"length"}]],["flex",[{scaleKey:"flex",ns:"flex",class:["flex"],type:"number"}]],["basis",[{scaleKey:"flexBasis",ns:"flexBasis",class:["flex-basis"],type:"length"}]],["grid-cols",[{scaleKey:"gridTemplateColumns",ns:"gridTemplateColumns",class:["grid-template-columns"],type:"number"}]],["grid-rows",[{scaleKey:"gridTemplateRows",ns:"gridTemplateRows",class:["grid-template-rows"],type:"number"}]],["gap",[{scaleKey:"gap",ns:"gap",class:["gap"],type:"length"}]],["gap-x",[{scaleKey:"gap",ns:"gapX",class:["gap"],type:"length"}]],["gap-y",[{scaleKey:"gap",ns:"gapY",class:["gap"],type:"length"}]],["divide-x",[{scaleKey:"divideWidth",ns:"divideX",class:["border-left-width","border-right-width"],type:"length"}]],["divide-y",[{scaleKey:"divideWidth",ns:"divideY",class:["border-top-width","border-bottom-width"],type:"length"}]],["divide",[{scaleKey:"divideColor",ns:"divideColor",class:["--tw-divide-color"],type:"color"}]],["divide-opacity",[{scaleKey:"divideOpacity",ns:"divideOpacity",class:["--tw-divide-opacity"],type:"number"}]],["col",[{scaleKey:"gridColumn",ns:"gridColumn",class:["grid-column"],type:"number"}]],["row",[{scaleKey:"gridRow",ns:"gridRow",class:["grid-row"],type:"number"}]],["space-x",[{scaleKey:"spacing",ns:"spaceX",class:["margin-left"],type:"number",supportNegative:!0}]],["space-y",[{scaleKey:"spacing",ns:"spaceY",class:["margin-top"],type:"number",supportNegative:!0}]],["opacity",[{scaleKey:"opacity",ns:"opacity",class:["opacity"],type:"number"}]],["shadow",[{scaleKey:"boxShadow",ns:"boxShadow",class:["box-shadow"],type:"length"},{scaleKey:"boxShadowColor",ns:"boxShadowColor",class:["box-shadow"],type:"color"}]],["transition",[{scaleKey:"transitionProperty",ns:"transitionProperty",class:["transition-property"],type:"named"}]],["duration",[{scaleKey:"transitionDuration",ns:"transitionDuration",class:["transition-duration"],type:"number"}]],["delay",[{scaleKey:"transitionDelay",ns:"transitionDelay",class:["transition-delay"],type:"number"}]],["scale",[{scaleKey:"scale",ns:"scale",class:["scale"],type:"number",supportNegative:!0}]],["rotate",[{scaleKey:"rotate",ns:"rotate",class:["rotate"],type:"angle",supportNegative:!0}]],["translate",[{scaleKey:"translate",ns:"translate",class:["transform"],type:"length",supportNegative:!0}]],["translate-y",[{scaleKey:"translate",ns:"translateY",class:["transform"],type:"length",supportNegative:!0}]],["translate-x",[{scaleKey:"translate",ns:"translateX",class:["transform"],type:"length",supportNegative:!0}]],["skew",[{scaleKey:"skew",ns:"skew",class:["skew"],type:"angle",supportNegative:!0}]],["z",[{scaleKey:"zIndex",ns:"zIndex",class:["z-index"],type:"number",supportNegative:!0}]],["inset",[{scaleKey:"inset",ns:"inset",class:["inset"],type:"length",supportNegative:!0}]],["inset-x",[{scaleKey:"inset",ns:"insetX",class:["left","right"],type:"length",supportNegative:!0}]],["inset-y",[{scaleKey:"inset",ns:"insetY",class:["top","bottom"],type:"length",supportNegative:!0}]],["top",[{scaleKey:"inset",ns:"positionTop",class:["top"],type:"length",supportNegative:!0}]],["right",[{scaleKey:"inset",ns:"positionRight",class:["right"],type:"length",supportNegative:!0}]],["bottom",[{scaleKey:"inset",ns:"positionBottom",class:["bottom"],type:"length",supportNegative:!0}]],["left",[{scaleKey:"inset",ns:"positionLeft",class:["left"],type:"length",supportNegative:!0}]],["start",[{scaleKey:"inset",ns:"insetInlineStart",class:["inset-inline-start"],type:"length",supportNegative:!0}]],["end",[{scaleKey:"inset",ns:"insetInlineEnd",class:["inset-inline-end"],type:"length",supportNegative:!0}]],["order",[{scaleKey:"order",ns:"order",class:["order"],type:"length",supportNegative:!0}]],["blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["brightness",[{scaleKey:"brightness",ns:"brightness",class:["filter"],type:"number"}]],["contrast",[{scaleKey:"contrast",ns:"contrast",class:["filter"],type:"number"}]],["drop-shadow",[{scaleKey:"dropShadow",ns:"dropShadow",class:["filter"],type:"number"}]],["hue-rotate",[{scaleKey:"hueRotate",ns:"hueRotate",class:["filter"],type:"number"}]],["saturate",[{scaleKey:"saturate",ns:"saturate",class:["filter"],type:"number"}]],["backdrop-blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["backdrop-brightness",[{scaleKey:"backdropBrightness",ns:"backdropBrightness",class:["backdrop-filter"],type:"number"}]],["backdrop-contrast",[{scaleKey:"backdropContrast",ns:"backdropContrast",class:["backdrop-filter"],type:"number"}]],["backdrop-drop-shadow",[{scaleKey:"backdropDropShadow",ns:"backdropDropShadow",class:["backdrop-filter"],type:"number"}]],["backdrop-hue-rotate",[{scaleKey:"backdropHueRotate",ns:"backdropHueRotate",class:["backdrop-filter"],type:"number"}]],["backdrop-saturate",[{scaleKey:"backdropSaturate",ns:"backdropSaturate",class:["backdrop-filter"],type:"number"}]]]),f=new Map([["border-solid",{class:["border-style"],value:"solid",ns:"borderStyle"}],["border-dashed",{class:["border-style"],value:"dashed",ns:"borderStyle"}],["border-dotted",{class:["border-style"],value:"dotted",ns:"borderStyle"}],["border-double",{class:["border-style"],value:"double",ns:"borderStyle"}],["border-none",{class:["border-style"],value:"none",ns:"borderStyle"}],["ring-inset",{class:["--tw-ring-inset"],value:"inset",ns:"ring"}],["divide-solid",{class:["divide-style"],value:"solid",ns:"divideStyle"}],["divide-dashed",{class:["divide-style"],value:"dashed",ns:"divideStyle"}],["divide-dotted",{class:["divide-style"],value:"dotted",ns:"divideStyle"}],["divide-double",{class:["divide-style"],value:"double",ns:"divideStyle"}],["divide-none",{class:["divide-style"],value:"none",ns:"divideStyle"}],["block",{class:["display"],value:"block",ns:"display"}],["inline-block",{class:["display"],value:"inline-block",ns:"display"}],["inline",{class:["display"],value:"inline",ns:"display"}],["flex",{class:["display"],value:"flex",ns:"display"}],["grid",{class:["display"],value:"grid",ns:"display"}],["hidden",{class:["display"],value:"none",ns:"display"}],["table",{class:["display"],value:"table",ns:"display"}],["table-row",{class:["display"],value:"table-row",ns:"display"}],["table-cell",{class:["display"],value:"table-cell",ns:"display"}],["contents",{class:["display"],value:"contents",ns:"display"}],["list-item",{class:["display"],value:"list-item",ns:"display"}],["flow-root",{class:["display"],value:"flow-root",ns:"display"}],["visible",{class:["visibility"],value:"visible",ns:"visibility"}],["invisible",{class:["visibility"],value:"hidden",ns:"visibility"}],["hyphens-none",{class:["hyphens"],value:"none",ns:"hyphens"}],["hyphens-manual",{class:["hyphens"],value:"manual",ns:"hyphens"}],["hyphens-auto",{class:["hyphens"],value:"auto",ns:"hyphens"}],["break-normal",{class:["word-break","overflow-wrap"],value:"normal",ns:"wordBreak"}],["break-words",{class:["overflow-wrap"],value:"break-word",ns:"wordBreak"}],["break-all",{class:["word-break"],value:"break-all",ns:"wordBreak"}],["break-keep",{class:["word-break"],value:"keep-all",ns:"wordBreak"}],["whitespace-normal",{class:["white-space"],value:"normal",ns:"whitespace"}],["whitespace-nowrap",{class:["white-space"],value:"nowrap",ns:"whitespace"}],["whitespace-pre",{class:["white-space"],value:"pre",ns:"whitespace"}],["whitespace-pre-line",{class:["white-space"],value:"pre-line",ns:"whitespace"}],["whitespace-pre-wrap",{class:["white-space"],value:"pre-wrap",ns:"whitespace"}],["whitespace-break-spaces",{class:["white-space"],value:"break-spaces",ns:"whitespace"}],["static",{class:["position"],value:"static",ns:"position"}],["fixed",{class:["position"],value:"fixed",ns:"position"}],["absolute",{class:["position"],value:"absolute",ns:"position"}],["relative",{class:["position"],value:"relative",ns:"position"}],["sticky",{class:["position"],value:"sticky",ns:"position"}],["overflow-auto",{class:["overflow"],value:"auto",ns:"overflow"}],["overflow-hidden",{class:["overflow"],value:"hidden",ns:"overflow"}],["overflow-visible",{class:["overflow"],value:"visible",ns:"overflow"}],["overflow-scroll",{class:["overflow"],value:"scroll",ns:"overflow"}],["overflow-x-auto",{class:["overflow-x"],value:"auto",ns:"overflowX"}],["overflow-x-hidden",{class:["overflow-x"],value:"hidden",ns:"overflowX"}],["overflow-x-visible",{class:["overflow-x"],value:"visible",ns:"overflowX"}],["overflow-x-scroll",{class:["overflow-x"],value:"scroll",ns:"overflowX"}],["overflow-y-auto",{class:["overflow-y"],value:"auto",ns:"overflowY"}],["overflow-y-hidden",{class:["overflow-y"],value:"hidden",ns:"overflowY"}],["overflow-y-visible",{class:["overflow-y"],value:"visible",ns:"overflowY"}],["overflow-y-scroll",{class:["overflow-y"],value:"scroll",ns:"overflowY"}],["text-left",{class:["text-align"],value:"left",ns:"textAlign"}],["text-center",{class:["text-align"],value:"center",ns:"textAlign"}],["text-right",{class:["text-align"],value:"right",ns:"textAlign"}],["text-justify",{class:["text-align"],value:"justify",ns:"textAlign"}],["text-start",{class:["text-align"],value:"start",ns:"textAlign"}],["text-end",{class:["text-align"],value:"end",ns:"textAlign"}],["underline",{class:["text-decoration-line"],value:"underline",ns:"textDecoration"}],["line-through",{class:["text-decoration-line"],value:"line-through",ns:"textDecoration"}],["overline",{class:["text-decoration-line"],value:"overline",ns:"textDecoration"}],["no-underline",{class:["text-decoration-line"],value:"none",ns:"textDecoration"}],["text-wrap",{class:["text-wrap"],value:"wrap",ns:"textWrap"}],["text-nowrap",{class:["text-wrap"],value:"nowrap",ns:"textWrap"}],["text-balance",{class:["text-wrap"],value:"balance",ns:"textWrap"}],["text-pretty",{class:["text-wrap"],value:"pretty",ns:"textWrap"}],["truncate",{class:["overflow","text-overflow","white-space"],value:"",ns:"TextOverflow"}],["text-ellipsis",{class:["text-overflow"],value:"ellipsis",ns:"textWrap"}],["text-clip",{class:["text-overflow"],value:"clip",ns:"textWrap"}],["uppercase",{class:["text-transform"],value:"uppercase",ns:"textTransform"}],["lowercase",{class:["text-transform"],value:"lowercase",ns:"textTransform"}],["capitalize",{class:["text-transform"],value:"capitalize",ns:"textTransform"}],["normal-case",{class:["text-transform"],value:"none",ns:"textTransform"}],["italic",{class:["font-style"],value:"italic",ns:"fontStyle"}],["not-italic",{class:["font-style"],value:"normal",ns:"fontStyle"}],["bg-fixed",{class:["background-attachment"],value:"fixed",ns:"backgroundAttachment"}],["bg-local",{class:["background-attachment"],value:"local",ns:"backgroundAttachment"}],["bg-scroll",{class:["background-attachment"],value:"scroll",ns:"backgroundAttachment"}],["bg-repeat",{class:["background-repeat"],value:"repeat",ns:"backgroundRepeat"}],["bg-no-repeat",{class:["background-repeat"],value:"no-repeat",ns:"backgroundRepeat"}],["bg-repeat-x",{class:["background-repeat"],value:"repeat-x",ns:"backgroundRepeat"}],["bg-repeat-y",{class:["background-repeat"],value:"repeat-y",ns:"backgroundRepeat"}],["bg-repeat-round",{class:["background-repeat"],value:"round",ns:"backgroundRepeat"}],["bg-repeat-space",{class:["background-repeat"],value:"space",ns:"backgroundRepeat"}],["bg-origin-border",{class:["background-origin"],value:"border",ns:"backgroundOrigin"}],["bg-origin-padding",{class:["background-origin"],value:"padding",ns:"backgroundOrigin"}],["bg-origin-content",{class:["background-origin"],value:"content",ns:"backgroundOrigin"}],["flex-row",{class:["flex-direction"],value:"row",ns:"flexDirection"}],["flex-row-reverse",{class:["flex-direction"],value:"row-reverse",ns:"flexDirection"}],["flex-col",{class:["flex-direction"],value:"column",ns:"flexDirection"}],["flex-col-reverse",{class:["flex-direction"],value:"column-reverse",ns:"flexDirection"}],["flex-wrap",{class:["flex-wrap"],value:"wrap",ns:"flexWrap"}],["flex-wrap-reverse",{class:["flex-wrap"],value:"wrap-reverse",ns:"flexWrap"}],["flex-nowrap",{class:["flex-wrap"],value:"nowrap",ns:"flexWrap"}],["items-start",{class:["align-items"],value:"flex-start",ns:"alignItems"}],["items-end",{class:["align-items"],value:"flex-end",ns:"alignItems"}],["items-center",{class:["align-items"],value:"center",ns:"alignItems"}],["items-baseline",{class:["align-items"],value:"baseline",ns:"alignItems"}],["items-stretch",{class:["align-items"],value:"stretch",ns:"alignItems"}],["justify-start",{class:["justify-content"],value:"flex-start",ns:"justifyContent"}],["justify-end",{class:["justify-content"],value:"flex-end",ns:"justifyContent"}],["justify-center",{class:["justify-content"],value:"center",ns:"justifyContent"}],["justify-between",{class:["justify-content"],value:"space-between",ns:"justifyContent"}],["justify-around",{class:["justify-content"],value:"space-around",ns:"justifyContent"}],["justify-evenly",{class:["justify-content"],value:"space-evenly",ns:"justifyContent"}],["grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["flex-grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["flex-grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["flex-shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["flex-shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["basis-auto",{class:["flex-basis"],value:"auto",ns:"flexBasis"}],["basis-full",{class:["flex-basis"],value:"100%",ns:"flexBasis"}],["grayscale",{class:["filter"],value:"grayscale(100%)",ns:"grayScale"}],["grayscale-0",{class:["filter"],value:"grayscale(0)",ns:"grayScale"}],["invert",{class:["filter"],value:"invert(100%)",ns:"invert"}],["invert-0",{class:["filter"],value:"invert(0)",ns:"invert"}],["sepia",{class:["filter"],value:"sepia(100%)",ns:"sepia"}],["sepia-0",{class:["filter"],value:"sepia(0)",ns:"sepia"}],["backdrop-grayscale",{class:["backdrop-filter"],value:"backdrop-grayscale(100%)",ns:"backdropGrayScale"}],["backdrop-grayscale-0",{class:["backdrop-filter"],value:"backdrop-grayscale(0)",ns:"backdropGrayScale"}],["backdrop-invert",{class:["backdrop-filter"],value:"backdrop-invert(100%)",ns:"backdrop-invert"}],["backdrop-invert-0",{class:["backdrop-filter"],value:"backdrop-invert(0)",ns:"backdrop-invert"}],["backdrop-sepia",{class:["backdrop-filter"],value:"backdrop-sepia(100%)",ns:"backdrop-sepia"}],["backdrop-sepia-0",{class:["backdrop-filter"],value:"backdrop-sepia(0)",ns:"backdrop-sepia"}],["ease-linear",{class:["transition-timing-function"],value:"linear",ns:"transitionTiming"}],["ease-in",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 1, 1)",ns:"transitionTiming"}],["ease-out",{class:["transition-timing-function"],value:"cubic-bezier(0, 0, 0.2, 1)",ns:"transitionTiming"}],["ease-in-out",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 0.2, 1)",ns:"transitionTiming"}],["object-contain",{class:["object"],value:"contain",ns:"objectFit"}],["object-cover",{class:["object"],value:"cover",ns:"objectFit"}],["object-fill",{class:["object"],value:"fill",ns:"objectFit"}],["object-none",{class:["object"],value:"none",ns:"objectFit"}],["object-scale-down",{class:["object"],value:"scale-down",ns:"objectFit"}]]),g=new Map([["first","pseudo"],["last","pseudo"],["only","pseudo"],["odd","pseudo"],["even","pseudo"],["first-of-type","pseudo"],["last-of-type","pseudo"],["only-of-type","pseudo"],["visited","state"],["target","state"],["open","state"],["default","form"],["checked","form"],["indeterminate","form"],["placeholder-shown","form"],["autofill","form"],["optional","form"],["required","form"],["valid","form"],["invalid","form"],["in-range","form"],["out-of-range","form"],["read-only","form"],["empty","content"],["focus-within","interaction"],["hover","interaction"],["group-hover","interaction"],["focus","interaction"],["focus-visible","interaction"],["active","interaction"],["enabled","interaction"],["disabled","interaction"],["dark","system"]]);var v=a(50967);let x=a.n(v)()(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(e||{}).theme});class b{addRoot(e){return this._classRoot=e,this}addValue(e){return this._classValue=e,this}appendModifier(e){return e&&(this._modifier="/"+e),this}appendVariants(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];for(let e of t)this._variants.push(e);return this}makeImportant(){return this.important=!0,this}makeNegative(){return this.negative=!0,this}toString(){let e=["media","system","interaction","pseudo","content","form","state","misc"],t=this._variants.sort((t,a)=>e.indexOf(t.type)-e.indexOf(a.type));return(t.length>0?t.map(e=>e.value).join(":")+":":"")+(this.important?"!":"")+(this.negative?"-":"")+this._classRoot+(this._classValue?"-"+this._classValue:"")+this._modifier}static makeInputArbitraryFormat(e){return e.replace(/\s/g,"_")}static makeArbitrary(e){return"["+b.makeInputArbitraryFormat(e)+"]"}constructor(){this._classRoot="",this._classValue="",this._modifier="",this._variants=[],this.important=!1,this.negative=!1}}let y=(e,t)=>{if(!e)return"";if("["===e[0]&&"]"===e[e.length-1]&&(e=e.slice(1,-1)),"%"===e[e.length-1])return b.makeArbitrary(e);for(let[a,s]of Object.entries(t))if(a==e||s==e)return a;return(0===Number(e)||Number(e)>=1)&&100>=Number(e)?b.makeArbitrary(e+"%"):Number(e)>=0&&1>=Number(e)?b.makeArbitrary(e):""};var j=a(88430);let E=e=>{let t=(0,j.Vi)(e),a=t.alpha();if(t.isValid())return{hex:t.alpha(1).toHex(),alpha:1!==a?a.toString():void 0}},w=(e,t)=>{if(!e)return!1;for(let[a,s]of Object.entries(t)){if(("#fff"===s||"#000"===s)&&(0,j.Vi)(e).isEqual(s))return a;for(let[t,r]of Object.entries(s))if(r===e)return"".concat(a,"-").concat(t)}return!1},N=new Uint8Array(256);function _(e,t){let a=0,s=[],r=0,n=e.length,l=t.charCodeAt(0);for(let t=0;t<n;t++){let i=e.charCodeAt(t);if(0===a&&i===l){s.push(e.slice(r,t)),r=t+1;continue}switch(i){case 92:t+=1;break;case 39:case 34:for(;++t<n;){let a=e.charCodeAt(t);if(92===a){t+=1;continue}if(a===i)break}break;case 40:N[a]=41,a++;break;case 91:N[a]=93,a++;break;case 123:N[a]=125,a++;break;case 93:case 125:case 41:a>0&&i===N[a-1]&&a--}}return s.push(e.slice(r)),s}let C=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent","currentcolor","canvas","canvastext","linktext","visitedtext","activetext","buttonface","buttontext","buttonborder","field","fieldtext","highlight","highlighttext","selecteditem","selecteditemtext","mark","marktext","graytext","accentcolor","accentcolortext"]),k=/^(rgba?|hsla?|hwb|color|(ok)?(lab|lch)|light-dark|color-mix)\(/i;function S(e,t){if(!e)return!1;let a=!1;if(t){let[s]=_(e,"/");a=!!m()(t.colors,s.split("-").join("."))}return 35===e.charCodeAt(0)||k.test(e)||C.has(e.toLowerCase())||a}let T=(e,t)=>{let a=x(t),s=new b,r=e.negative||!1;s.appendVariants(...e.variants||[]),e.important&&s.makeImportant(),"-"===e.value[0]&&(e.value=e.value.slice(1),r=!0);let[n]=Array.from(f.entries()).filter(t=>{let[,a]=t;return a.ns===e.property}).find(t=>{let[,a]=t;return a.value===e.value})||[];if(n)return s.addRoot(n).toString();let[l,i=[]]=Array.from(h.entries()).find(t=>{let[,a]=t;return a.some(t=>t.ns===e.property)})||[];if(!l)throw new p(e.property);if(s.addRoot(l),S(e.value,a)){let t=i.find(e=>"color"===e.type);if(!t)throw new p(e.property);let r=m()(a[t.scaleKey||"colors"],e.value.split("-").join("."));if(r&&"object"!=typeof r)return s.appendModifier(y(e.modifier,a.opacity)).addValue(e.value).toString();let n=E(e.value);return n?s.appendModifier(y(n.alpha||e.modifier,a.opacity)).addValue(w(n.hex,a[t.scaleKey||"colors"])||b.makeArbitrary(n.hex)).toString():""}let o=i.find(t=>t.ns===e.property);if(!o)throw new p(e.property);let d=A(e.value,a[o.scaleKey]);return d&&(s.addValue(d),o.supportNegative&&r&&s.makeNegative()),s.toString()},A=(e,t)=>{if(e){for(let[a,s]of Object.entries(t))if(Array.isArray(s)&&(a===e||s.includes(e))||a===e||s===e)return"DEFAULT"!==a?a:void 0;return b.makeArbitrary(e)}},I=["calc","min","max","clamp","mod","rem","sin","cos","tan","asin","acos","atan","atan2","pow","sqrt","hypot","log","exp","round"];function L(e){return -1!==e.indexOf("(")&&I.some(t=>e.includes("".concat(t,"(")))}function R(e){return e.startsWith("url(")?e:e=function(e){if(-1===e.indexOf("(")||!I.some(t=>e.includes(t)))return e;let t="",a=[];for(let s=0;s<e.length;s++){let r=e[s];if("("===r){t+=r;let n=s;for(let t=s-1;t>=0;t--){let a=e.charCodeAt(t);if(a>=48&&a<=57)n=t;else if(a>=97&&a<=122)n=t;else break}let l=e.slice(n,s);if(I.includes(l)||a[0]&&""===l){a.unshift(!0);continue}a.unshift(!1);continue}if(")"===r)t+=r,a.shift();else if(","===r&&a[0]){t+=", ";continue}else if(" "===r&&a[0]&&" "===t[t.length-1])continue;else if(("+"===r||"*"===r||"/"===r||"-"===r)&&a[0]){let a=t.trimEnd(),n=a[a.length-1];if("+"===n||"*"===n||"/"===n||"-"===n||"("===n||","===n){t+=r;continue}" "===e[s-1]?t+="".concat(r," "):t+=" ".concat(r," ")}else if(a[0]&&e.startsWith("to-zero",s)){let a=s;s+=7,t+=e.slice(a,s+1)}else t+=r}return t}(e=function(e){let t="";for(let a=0;a<e.length;a++){let s=e[a];"\\"===s&&"_"===e[a+1]?(t+="_",a+=1):"_"===s?t+=" ":t+=s}return t}(e))}let D={color:S,length:H,percentage:Z,number:function(e){return F.test(e)||L(e)},url:M,position:function(e){let t=0;for(let a of _(e," ")){if("center"===a||"top"===a||"right"===a||"bottom"===a||"left"===a){t+=1;continue}if(!a.startsWith("var(")){if(H(a)||Z(a)){t+=1;continue}return!1}}return t>0},"bg-size":function(e){let t=0;for(let a of _(e,",")){if("cover"===a||"contain"===a){t+=1;continue}let e=_(a," ");if(1!==e.length&&2!==e.length)return!1;e.every(e=>"auto"===e||H(e)||Z(e))&&(t+=1)}return t>0},"line-width":function(e){return"thin"===e||"medium"===e||"thick"===e},image:function(e){let t=0;for(let a of _(e,","))if(!a.startsWith("var(")){if(M(a)||z.test(a)||O.test(a)){t+=1;continue}return!1}return t>0},"family-name":function(e){let t=0;for(let a of _(e,",")){let e=a.charCodeAt(0);if(e>=48&&e<=57)return!1;a.startsWith("var(")||(t+=1)}return t>0},"generic-name":function(e){return"serif"===e||"sans-serif"===e||"monospace"===e||"cursive"===e||"fantasy"===e||"system-ui"===e||"ui-serif"===e||"ui-sans-serif"===e||"ui-monospace"===e||"ui-rounded"===e||"math"===e||"emoji"===e||"fangsong"===e},"absolute-size":function(e){return"xx-small"===e||"x-small"===e||"small"===e||"medium"===e||"large"===e||"x-large"===e||"xx-large"===e||"xxx-large"===e},"relative-size":function(e){return"larger"===e||"smaller"===e},angle:function(e){return V.test(e)},vector:function(e){return G.test(e)},named:()=>!0},P=/^url\(.*\)$/;function M(e){return P.test(e)}let O=/^(?:element|image|cross-fade|image-set)\(/,z=/^(repeating-)?(conic|linear|radial)-gradient\(/,U=/[+-]?\d*\.?\d+(?:[eE][+-]?\d+)?/,F=new RegExp("^".concat(U.source,"$")),K=new RegExp("^".concat(U.source,"%$"));function Z(e){return K.test(e)||L(e)}let W=new RegExp("^".concat(U.source,"(").concat("cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cqw|cqh|cqi|cqb|cqmin|cqmax",")$"));function H(e){return W.test(e)||L(e)}let V=new RegExp("^".concat(U.source,"(").concat("deg|rad|grad|turn",")$")),G=new RegExp("^".concat(U.source," +").concat(U.source," +").concat(U.source,"$"));class X extends Error{constructor(e,t){super("Found a matched plugin `".concat(e,"`, but the value `").concat(t,"` could not matched. This could be due to a misspelling or the given value is not covered by tailwind.config file.")),this.name="PluginNotFoundException"}}let B=(e,t,a)=>{if("color"===t.type){let s=m()(a,e.split("-").join("."));if(!s)throw new X(t.ns,e);return"object"==typeof s&&s.DEFAULT&&(s=s.DEFAULT),{value:s,kind:t.type,class:t.class,raw:e}}let s=a[e];if(!s)throw new X(t.ns,e);return{value:s,class:t.class,raw:e,kind:t.type}},q=(e,t)=>{if(!e)return{root:"",kind:"error",message:"Empty input"};let a=x(t),s={important:!1,negative:!1},r=_(e,":"),n=r.pop(),l=[];for(let e=r.length-1;e>=0;--e){let t=function(e,t){if("["===e[0]&&"]"===e[e.length-1]){let t=e.slice(1,-1);return{kind:"arbitrary",type:"misc",value:t="-"===t[0]&&"-"===t[1]?"var(".concat(t,")"):R(t)}}return Object.keys(t).includes(e)?{kind:"named",type:"media",value:e}:{kind:"named",type:g.get(e)||"misc",value:e}}(r[e],a.screens);null!==t&&l.push(t)}"!"===n[0]&&(s.important=!0,n=n.slice(1)),"-"===n[0]&&(s.negative=!0,n=n.slice(1));let i=f.get(n);if(i)return{root:n,kind:"named",property:i.ns,value:i.value,valueDef:{class:i.class,raw:n,kind:"named",value:i.value},variants:l,modifier:null,important:s.important,negative:s.negative,arbitrary:!1};let[o,d]=function(e,t){if(t.has(e))return[e,null];let a=e.lastIndexOf("-");if(-1===a)return"@"===e[0]&&t.has("@")?["@",e.slice(1)]:[null,null];do{let s=e.slice(0,a);if(t.has(s))return[s,e.slice(a+1)];a=e.lastIndexOf("-",a-1)}while(a>0);return[null,null]}(n,h);if(!o)return{root:n,kind:"error",message:"Tailwindcss core plugin not found"};let c=h.get(o),u=null,[m,p=null]=_(d||"","/");if(p&&S(m.replace(/[\[\]]/g,""),a)&&(u=y(p,a.opacity)),m&&"["===m[0]&&"]"===m[m.length-1]){let e=m.slice(1,-1),t=function(e,t){if(e.startsWith("var("))return null;for(let s of t){var a;if(null===(a=D[s])||void 0===a?void 0:a.call(D,e))return s}return null}(e,Array.from(c.values()).map(e=>{let{type:t}=e;return t})),r=c.find(e=>e.type===t);if("color"===t){let t=E(e);if(!t)return{root:n,kind:"error",message:"Color is not correct"};m=w(t.hex,a[(null==r?void 0:r.scaleKey)||"colors"])||t.hex}else c.length>0&&(r=c.find(e=>e.type===t)||c.find(e=>"color"!==e.type));return e=R(e),{root:o,kind:"functional",property:r.ns,value:e,valueDef:{value:e,class:r.class,raw:m,kind:t||"named"},variants:l,modifier:u,arbitrary:!0,important:s.important,negative:s.negative}}d||(d="DEFAULT");let v=c.find(e=>{let{scaleKey:t}=e;return d.split("-")[0]in a[t]||m in a[t]});if(!v)return{root:n,kind:"error",message:'found "'.concat(c.map(e=>e.ns).join(", "),'" plugins but unable to determine which one is matched to given value "').concat(d,'".')};let b=B("color"===v.type?m:d,v,a[v.scaleKey]);return{root:o,kind:"functional",property:v.ns,value:b.value,valueDef:b,variants:l,modifier:u,important:s.important,negative:s.negative,arbitrary:!1}},Y=e=>{var t;return Object.entries((null==e?void 0:null===(t=e.theme)||void 0===t?void 0:t.screens)||{}).sort((e,t)=>parseInt(t[1])-parseInt(e[1])).concat([["default","0px"]])},J=(e,t)=>e.findIndex(e=>{let[a]=e;return a===t}),Q=(e,t)=>e>=t,$=(e,t,a,s)=>{var r,n;let l=Array.isArray(t)?t:[t],i=Y(a),o=l.map(e=>q(e,a));if(o.some(e=>"error"===e.kind))return e;let d=e.split(/\s+/).filter(Boolean),c=d.filter(e=>{try{var t,r;let n=q(e.trim(),a);if("error"===n.kind)return!0;return o.some(e=>"error"!==e.kind&&e.property===n.property)&&Q(J(i,(null===(r=n.variants)||void 0===r?void 0:null===(t=r.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default"),J(i,s||"default"))}catch(e){return!1}}),u=c.reduce((e,t)=>{var s,r,n,l;let o=q(t.trim(),a),d=q(e.trim(),a);return"error"===o.kind||"error"===d.kind?e:J(i,(null===(r=o.variants)||void 0===r?void 0:null===(s=r.find(e=>"media"===e.type))||void 0===s?void 0:s.value)||"default")<J(i,(null===(l=d.variants)||void 0===l?void 0:null===(n=l.find(e=>"media"===e.type))||void 0===n?void 0:n.value)||"default")?t:e},c[0])||"default",m=q(u.trim(),a),p="error"!==m.kind&&(null===(n=m.variants)||void 0===n?void 0:null===(r=n.find(e=>"media"===e.type))||void 0===r?void 0:r.value)||"default";return[...d.filter(e=>{try{var t,s;let r=q(e.trim(),a);if("error"===r.kind||!o.some(e=>"error"!==e.kind&&e.property===r.property))return!0;return((null===(s=r.variants)||void 0===s?void 0:null===(t=s.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default")!==(p||"default")}catch(e){return!0}}),p&&"default"!==p?l.map(e=>"".concat(p,":").concat(e)).join(" "):l.join(" ")].join(" ")},ee=(e,t,a,s)=>{let r=Y(a),n=e.split(/\s+/g).map(e=>{try{var n;let l=q(e.trim(),a);if("error"===l.kind||l.property!==t)return null;let i=null===(n=l.variants)||void 0===n?void 0:n.find(e=>"media"===e.type);if(i&&s){let e=J(r,i.value),t=J(r,s);if(-1===t&&(t=r.length),e<t)return null}return{parsed:l,breakpoint:(null==i?void 0:i.value)||"default"}}catch(e){return null}}).filter(e=>null!==e);if(0===n.length)return null;if(!s)return n.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:J(r,t.breakpoint)<J(r,e.breakpoint)?t:e,n[0]).parsed;let l=J(r,s),i=n.filter(e=>"default"===e.breakpoint||Q(J(r,e.breakpoint),l));return 0===i.length?null:i.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:J(r,t.breakpoint)<J(r,e.breakpoint)?t:e,i[0]).parsed},et=(e,t)=>{let a=Y(e);if(!a)return"default";let s=t.getBoundingClientRect().width;for(let[e,t]of a){let a="string"==typeof t?parseInt(t):"number"==typeof t?t:null;if(null!==a&&s>=a)return e}return"default"},ea=e=>{if(void 0!==e)try{return JSON.parse(e)}catch(e){return}},es=()=>{let{code:e}=(0,c.v)(),t=(0,n.useMemo)(()=>{var t;return null===(t=e.find(e=>{let[t,a]=e;return(null==t?void 0:t.split("/").pop())==="tailwind.config.lov.json"}))||void 0===t?void 0:t[1]},[e]);return(0,n.useMemo)(()=>ea(t)||i()({content:[]}),[t])},er=e=>{let t=new Set,a=e.theme||{};for(let[e]of f)t.add(e);for(let[e,s]of h)for(let r of s){let s=a[r.scaleKey];if(s){for(let a of Object.keys(s))if("DEFAULT"===a)t.add(e);else{let s="".concat(e,"-").concat(a);t.add(s),r.supportNegative&&t.add("-".concat(s))}if("color"===r.type&&s){for(let[a,r]of Object.entries(s))if("object"==typeof r&&null!==r)for(let s of Object.keys(r))"DEFAULT"===s?t.add("".concat(e,"-").concat(a)):t.add("".concat(e,"-").concat(a,"-").concat(s))}}}return Array.from(t).sort()},en=()=>{let e=es(),t=(0,d.f6)(e=>e.visibleMode),{twi:a}=(0,o.XM)({config:e,options:{merge:!0}}),s=(0,n.useCallback)((a,s)=>{let r=(0,d.XE)(t),n=document.querySelector("iframe#".concat(r));if(!n)return a;let l=et(e,n);return $(a,s,e,l)},[e,t]),r=(0,n.useCallback)((a,s)=>{if(!a)return null;let r=(0,d.XE)(t),n=document.querySelector("iframe#".concat(r));if(!n)return null;let l=et(e,n);return ee(a,s,e,l)},[e,t]);return{theme:null==e?void 0:e.theme,parse:t=>q(t,e),classname:t=>T(t,e),updateTwClassname:s,classNameToStyle:a,getRelevantTwClass:r}},el=()=>{let e=es(),t=(0,n.useMemo)(()=>er(e),[e]);return{getAutocomplete:(0,n.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if(!e.trim())return[];let s=e.toLowerCase();return t.sort((e,t)=>r()(t,s)-r()(e,s)).slice(0,a)},[t]),classNames:t}}},5635:function(e,t,a){"use strict";a.d(t,{B:function(){return l},a:function(){return r}});let s={text:"format_size",img:"image",button:"crop_16_9",link:"link",div:"select"},r=e=>s[n(e)],n=e=>["p","span","h1","h2","h3","h4","h5","h6"].includes(e)?"text":"img"===e?"img":"button"===e?"button":"a"===e?"link":"div",l=e=>n(e.elementType)},55214:function(e){e.exports={cursor:"PromptBox_cursor__MuO9l",blink:"PromptBox_blink__F53p4",customProse:"PromptBox_customProse__C94Rw"}},1691:function(e){e.exports={shimmerText:"ShimmeringText_shimmerText__SMwG_",shimmer:"ShimmeringText_shimmer__1AZHS"}}}]);