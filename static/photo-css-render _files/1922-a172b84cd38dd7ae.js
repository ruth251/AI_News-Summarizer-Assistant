try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="f76edfc6-ebcf-47c8-8b3f-c16fb2d11390",e._sentryDebugIdIdentifier="sentry-dbid-f76edfc6-ebcf-47c8-8b3f-c16fb2d11390")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1922],{52558:function(e,r,t){t.d(r,{Eu:function(){return c},Ho:function(){return d},eA:function(){return p}});var n=t(57437),o=t(99376),a=t(2265),i=t(80733),l=t(78099),s=t(21288);let u=(0,a.createContext)(void 0),c=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e},d=e=>{let{user:r,children:t}=e,[c,d]=(0,a.useState)(r?"authenticated":"idle"),[p,_]=(0,a.useState)(r),[f,S]=(0,a.useState)(void 0),h=(0,o.useRouter)();return(0,a.useEffect)(()=>{r&&r.idToken&&i.g.setServerIdToken(r.idToken)},[r]),(0,a.useEffect)(()=>{let e=!1,t=null;return(async function(){if(!e){if(!r){d("idle"),_(null),S(void 0);return}d("loading");try{let{auth:e}=await (0,l.j2)(r.customToken,!0);t=e.onAuthStateChanged(e=>{e||(d("idle"),_(null),S(void 0))}),d("authenticated"),_(r),S(void 0)}catch(e){d("error"),S(e instanceof Error?e:Error(String(e))),s.logging.error("AuthProvider: Failed to initialize Firebase",{error:e,userId:null==r?void 0:r.uid})}}})().catch(e=>{s.logging.error("AuthProvider: Failed to initialize Firebase",{error:e,userId:null==r?void 0:r.uid})}),()=>{e=!0,t&&t()}},[r,h]),(0,n.jsx)(u.Provider,{value:{authState:c,authUser:p,authError:f,isAuthenticated:"authenticated"===c},children:t})},p=()=>{let{authUser:e}=c();return null==e?void 0:e.email}},61922:function(e,r,t){t.d(r,{Lq:function(){return y},J1:function(){return k},aS:function(){return U},i7:function(){return D}});var n=t(57437),o=t(92850),a=t(5978),i=t(99376),l=t(2265),s=t(59625),u=t(52558),c=t(60256),d=t(43930),p=t(78099),_=t(21288),f=t(89668),S=t(6812),h=t(29827),b=t(21770),m=t(14438),P=t(64040),O=t(49131),w=t(97318),C=t(48581),v=t(108),g=t(7309),E=t(33370);let R=e=>"".concat("lovable-current-workspace-id","-").concat(e),I=()=>(0,s.Ue)(()=>({currentWorkspace:null,hasFetchedCurrentWorkspace:!1,memberships:[]})),L=(0,l.createContext)(null);function y(e){var r,t;let{children:s}=e,y=(0,l.useRef)(I()),{authUser:k}=(0,u.Eu)(),{userData:U}=(0,c.SE)(),D=R(null!==(r=null==k?void 0:k.uid)&&void 0!==r?r:""),T=(0,i.useSearchParams)().get("workspaceId"),{allWorkspaces:A,isLoading:N}=(0,S.Q)(e=>({allWorkspaces:e.workspaces,isLoading:e.isLoading})),z=null!==(t=null==A?void 0:A[0])&&void 0!==t?t:null,[K,Y]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(window)try{let e=window.localStorage.getItem(D);e&&Y(e)}catch(e){_.logging.debug("Error getting current workspace id from localstorage",{error:e})}},[D]);let M=(0,l.useCallback)(e=>{Y(e);try{e?window.localStorage.setItem(D,e):window.localStorage.removeItem(D)}catch(r){_.logging.debug("Error setting current workspace id to localstorage",{error:r,newId:e})}},[D]);(0,l.useEffect)(()=>{!K&&(null==z?void 0:z.id)&&M(z.id)},[K,null==z?void 0:z.id,M]);let[x,W]=(0,l.useState)(null),[q,H]=(0,l.useState)("idle");(0,l.useEffect)(()=>{if(!K){W(null),H("success");return}H("loading");let e=(0,a.JU)(p.db,"workspaces",K);return(0,a.cf)(e,e=>{e.exists()?W(e.data()):W(null),H("success")},e=>{_.logging.error("Error fetching workspace",{error:e,workspaceId:K}),H("error")})},[K]);let{data:j}=(0,o.a)(f.t.detail({workspaceId:null!=T?T:""}));!function(e){let{authUser:r,currentWorkspaceId:t,userData:n,isLoadingAllWorkspaces:o,currentWorkspace:a}=e,[i,s]=(0,l.useState)(!1),{toCheckout:u}=(0,v.m)(),c=(0,l.useCallback)(async()=>{if((null==r?void 0:r.uid)&&t&&!i)try{let e;let n=localStorage.getItem(C.h9);if(!n)return;let o=JSON.parse(n),a=Date.now()-o.timestamp;if(localStorage.removeItem(C.h9),a>36e5)return;if("pro"===o.planType&&(e=g.qI.planOptions.find(e=>e.id===o.planId)),!e){_.logging.error("Could not find matching plan for pending selection",{pendingPlan:o,userId:r.uid});return}s(!0),await u({plan:e,workspaceId:t})}catch(e){_.logging.error("Error processing pending plan selection",{error:e,userId:null==r?void 0:r.uid,workspaceId:t}),localStorage.removeItem(C.h9)}},[null==r?void 0:r.uid,t,i,u]);(0,l.useEffect)(()=>{r&&t&&!o&&!i&&(null==n?void 0:n.segmentation_form_status)===E.O.SUBMITTED&&(null==a?void 0:a.plan)==="free"&&c()},[r,null==a?void 0:a.plan,t,o,i,c,null==n?void 0:n.segmentation_form_status])}({authUser:k,currentWorkspaceId:K,userData:null!=U?U:null,isLoadingAllWorkspaces:N,currentWorkspace:x}),function(e){let{allWorkspaces:r,isLoadingAllWorkspaces:t,workspaceDataForUnacceptedInvites:n,setCurrentWorkspaceId:o,authUser:a}=e,s=(0,i.useRouter)(),u=(0,i.usePathname)(),c=(0,i.useSearchParams)(),d=(0,l.useRef)(new Set),p=c.get("workspaceId"),{store:_}=(0,S.bm)(),f=(0,h.NL)(),C=(0,l.useCallback)(()=>{let e=new URLSearchParams(c);e.delete("workspaceId"),s.replace("".concat(u,"?").concat(e.toString()),{scroll:!1})},[s,u,c]),{mutate:v}=(0,b.D)({mutationFn:async e=>{let r=(0,O.SJ)();return await r.put("/user/workspaces/".concat(e.id,"/accept-invite")),e},onSuccess:e=>{o(e.id),C(),d.current.has(e.id)||(m.Am.success(e.name?'Switched to "'.concat(e.name,'" workspace'):"Switched to workspace"),null==_||_.setState({workspaces:[...r,e]})),d.current.add(e.id)},onError:(e,r)=>{d.current.has(r.id)||(C(),d.current.add(r.id),(0,P.Eo)(e))},onSettled:()=>{f.invalidateQueries({queryKey:w.E.all})},retry:!1});(0,l.useEffect)(()=>{if(p&&!a&&!t){s.replace("/login");return}p&&!t&&(null==n?void 0:n.workspace)&&!d.current.has(n.workspace.id)&&v(n.workspace)},[v,t,null==n?void 0:n.workspace,p,a,s,u,c])}({allWorkspaces:A,isLoadingAllWorkspaces:N,authUser:k,workspaceDataForUnacceptedInvites:null!=j?j:{workspace:null,projects:[]},setCurrentWorkspaceId:M}),(0,l.useEffect)(()=>{if(!N&&K&&!A.some(e=>e.id===K)){var e;_.logging.info("User ".concat(null==k?void 0:k.uid," does not have access to workspace ").concat(K,", switching to ").concat(null==z?void 0:z.id)),M(null!==(e=null==z?void 0:z.id)&&void 0!==e?e:null)}},[A,null==k?void 0:k.uid,K,null==z?void 0:z.id,N,M]);let{data:F}=(0,o.a)(f.t.workspaceMemberships({workspaceId:null!=K?K:"",userId:null==k?void 0:k.uid}));(0,l.useEffect)(()=>{K?y.current.setState({currentWorkspace:x,memberships:(null==F?void 0:F.memberships)||[]}):y.current.setState({currentWorkspace:null,memberships:[]})},[K,x,null==F?void 0:F.memberships]),(0,l.useEffect)(()=>{("success"===q||"error"===q)&&y.current.setState({hasFetchedCurrentWorkspace:!0})},[q]);let Z=(0,d.i)();(0,l.useEffect)(()=>(null==Z||Z.setCurrentWorkspaceId(null!=K?K:null),()=>{null==Z||Z.setCurrentWorkspaceId(null)}),[K,Z]);let B={store:y.current,setCurrentWorkspaceId:M,currentWorkspaceId:K};return(0,n.jsx)(L.Provider,{value:B,children:s})}function k(){let e=(0,l.useContext)(L);if(!e)throw Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}function U(e){let{store:r}=k();if(!r)throw Error("useWorkspaceStore must be used within a WorkspaceProvider");return r(e)}function D(e){let r=(0,l.useContext)(L),t=null==r?void 0:r.store;return t?t(e):null}},60256:function(e,r,t){t.d(r,{SE:function(){return c},dF:function(){return d},dr:function(){return u}});var n=t(57437),o=t(5978),a=t(2265),i=t(52558),l=t(78099);let s=(0,a.createContext)(void 0),u=e=>{let{children:r}=e,[t,u]=(0,a.useState)(void 0),[c,d]=(0,a.useState)(!1),{authUser:p,authState:_}=(0,i.Eu)();return(0,a.useEffect)(()=>{var e,r;if("authenticated"!==_)return;let t=null!==(r=null==p?void 0:p.uid)&&void 0!==r?r:null===(e=l.I8.currentUser)||void 0===e?void 0:e.uid;if(!t)return;let n=(0,o.JU)(l.db,"users",t);return(0,o.cf)(n,e=>{u(e.data())})},[p,_]),(0,n.jsx)(s.Provider,{value:{userData:t,isOutOfCreditsDialogOpen:c,setIsOutOfCreditsDialogOpen:d},children:r})},c=()=>{let e=(0,a.useContext)(s);if(void 0===e)throw Error("useUserContext must be used within a UserProvider");return e},d=e=>{var r;let{workspacePlan:t}=e,{userData:n}=c();return null!==t?!["free","inactive"].includes(t):null!==(r=null==n?void 0:n.is_admin)&&void 0!==r&&r}},6812:function(e,r,t){t.d(r,{Q:function(){return _},W5:function(){return d},bm:function(){return p}});var n=t(57437),o=t(92850),a=t(2265),i=t(59625),l=t(52558),s=t(89668);let u=()=>(0,i.Ue)(e=>({workspaces:[],error:null,isLoading:!0,showCreateWorkspaceDialog:!1,setShowCreateWorkspaceDialog:r=>{e({showCreateWorkspaceDialog:r})}})),c=(0,a.createContext)(null);function d(e){let{children:r}=e,t=(0,a.useRef)(u()),{authUser:i}=(0,l.Eu)(),{data:d,error:p,isFetching:_}=(0,o.a)(s.t.workspaces({userId:null==i?void 0:i.uid}));return(0,a.useEffect)(()=>{(null==d?void 0:d.workspaces)&&t.current.setState({workspaces:d.workspaces}),t.current.setState({isLoading:_})},[d,_]),(0,a.useEffect)(()=>{p&&t.current.setState({error:p})},[p]),(0,n.jsx)(c.Provider,{value:{store:t.current},children:r})}function p(){let e=(0,a.useContext)(c);if(!e)throw Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}function _(e){let{store:r}=p();if(!r)throw Error("useWorkspaceStore must be used within a WorkspaceProvider");return r(e)}},43930:function(e,r,t){t.d(r,{g:function(){return u},i:function(){return c}});var n=t(57437),o=t(46214),a=t(2265),i=t(59625);let l=()=>(0,i.Ue)(()=>({projectWorkspaceId:null,currentWorkspaceId:null})),s=(0,a.createContext)(null),u=e=>{let{children:r}=e,t=(0,a.useRef)(l()),i=(0,a.useCallback)(()=>{let{projectWorkspaceId:e,currentWorkspaceId:r}=t.current.getState();o.ZP.group("workspace",e||r||"none")},[]),u=(0,a.useCallback)(e=>{t.current.setState({projectWorkspaceId:e}),i()},[i]),c=(0,a.useCallback)(e=>{t.current.setState({currentWorkspaceId:e}),i()},[i]),d={store:t.current,setProjectWorkspaceId:u,setCurrentWorkspaceId:c};return(0,n.jsx)(s.Provider,{value:d,children:r})};function c(){let e=(0,a.useContext)(s);if(!e)throw Error("usePostHogGroupContext must be used within a PostHogGroupProvider");return e}},48581:function(e,r,t){t.d(r,{h9:function(){return S},om:function(){return b},tS:function(){return m}});var n=t(57437),o=t(2265),a=t(14438),i=t(52558),l=t(108),s=t(7309),u=t(27132),c=t(46170);let d=e=>{let{currentPlan:r,isProPlan:t}=e;return t?s.qI.planOptions.find(e=>e.id===r.id)||s.qI.planOptions[0]:null},p=e=>{let{currentPlan:r,isProPlan:t}=e,n=d({currentPlan:r,isProPlan:t});if(t&&n){let e=s.qI.planOptions.findIndex(e=>e.id===n.id);return e<s.qI.planOptions.length-1?s.qI.planOptions[e+1]:n}return null},_=e=>{let{planOptions:r,targetLimit:t}=e;return r.find(e=>e.limit>t)||r[r.length-1]},f=["launch","scale_1","scale","scale_3","scale_4","scale_5","scale_6","scale_7","pro","starter"],S="pendingPlanSelection",h=(0,o.createContext)(void 0),b=e=>{let{children:r,currentPlan:t,context:b,workspace:m,myWorkspaceRole:P,onDowngradeClick:O}=e,{toCheckout:w,createPortalSession:C,isCreatePortalSessionLoading:v}=(0,l.m)(),{authUser:g}=(0,i.Eu)(),E=(0,o.useCallback)(async()=>{(null==m?void 0:m.id)?await C({workspaceId:m.id}):a.Am.error("Something went wrong.",{description:"Please, refresh the page and try again."})},[C,null==m?void 0:m.id]),R="loggedOut"===b,I="free"===t.id,L=(0,c.B9)(t.id),y="enterprise"===t.id,k="inactive"===t.id,U=f.includes(t.id),D=!!(!R&&g&&m&&g.uid===m.owner_id),T=!R&&"member"===P,A=!R&&(!!P||D),N=!R&&!A&&!D,z=U?.2:0,[K,Y]=(0,o.useState)("monthly"),M=(0,o.useCallback)(e=>e.monthlyPrice,[]),x=(0,o.useCallback)(()=>"per month",[]),W="outOfCredits"!==b||!L&&!U,q="outOfCredits"!==b&&"ktlo"===t.id,{defaultProPlan:H}=(0,o.useMemo)(()=>{let e=d({currentPlan:t,isProPlan:L}),r=s.qI.planOptions[0];if(L)r=e||p({currentPlan:t,isProPlan:L});else if(U){let e=(0,s.z_)(t.id)||0;r=_({planOptions:s.qI.planOptions,targetLimit:e})}return{defaultProPlan:r}},[t,L,U]),j=(0,o.useCallback)(e=>{let{selectedPlanId:r,planOptions:n}=e;if(r===t.id)return"current";if(I)return"upgrade";let o=n.find(e=>e.id===r),a=(0,s.oW)(t);return void 0===a||void 0===o||a===M(o)?"upgrade":"enterprise"===t.id?"downgrade":M(o)>a?"upgrade":"downgrade"},[t,I,M]),F=(0,o.useCallback)(e=>{let{selectedPlanId:r,planOptions:t,currentPlan:n}=e,o=j({selectedPlanId:r,planOptions:t});return"current"===o?"Your current plan":"upgrade"===o?"Upgrade":"enterprise"===n.id?"Downgrade (Contact us)":"Downgrade"},[j]),[Z,B]=(0,o.useState)(H);(0,o.useEffect)(()=>{B(H)},[H]);let J=(0,o.useMemo)(()=>[...s.qI.planOptions],[]),X=(0,o.useMemo)(()=>{var e,r,t;return(null==g?void 0:g.email)||(null==g?void 0:null===(t=g.firebase)||void 0===t?void 0:null===(r=t.identities)||void 0===r?void 0:null===(e=r.email)||void 0===e?void 0:e[0])||"xxxxx"},[g]),Q=(0,u.Z)("sm"),G=(0,o.useMemo)(()=>Q?1:[W,q,!0,!0].filter(Boolean).length,[Q,W,q,!0,!0]),V=(0,o.useCallback)(e=>{let{selectedPlanId:r,planOptions:t}=e;return"upgrade"===j({selectedPlanId:r,planOptions:t})?"twilight":"link"},[j]),$=V({selectedPlanId:Z.id,planOptions:J}),ee=(0,o.useCallback)(e=>{if("free"===e.id){window.location.href="/signup";return}let r={planId:e.id,planType:"pro",timestamp:Date.now(),price:M(e),limit:e.limit};localStorage.setItem(S,JSON.stringify(r)),window.location.href="/signup"},[M]),er=(0,o.useCallback)(async e=>{(null==m?void 0:m.id)&&await w({plan:e,workspaceId:m.id,grandfatheredDiscount:U,planType:K})},[m,w,U,K]),et=(0,o.useCallback)(e=>{var r,n;let o=null!==(r=(0,s.oW)(t))&&void 0!==r?r:0;return(null!==(n=(0,s.oW)({id:e,type:K}))&&void 0!==n?n:0)<o},[t,K]),[en,eo]=(0,o.useState)(null),ea=(0,o.useCallback)(()=>{eo({id:c.tJ.FREE,monthlyPrice:0,annualPrice:0,monthlyLookupKey:"free_plan",quantity:1,limit:c.dv,name:"Free",canManagePlan:!0})},[]);return(0,n.jsx)(h.Provider,{value:{currentPlan:t,selectedProPlan:Z,setSelectedProPlan:B,planType:K,setPlanType:Y,getDisplayPrice:M,getPriceSuffix:x,showFreePlan:W,showKtloPlan:q,showProPlan:!0,showEnterprisePlan:!0,showProDropdown:!R,isFreePlan:I,isProPlan:L,isEnterprisePlan:y,isInactivePlan:k,isLoggedOut:R,isOwner:D,isEditor:T,isMemberOfWorkspace:A,shouldDisableWorkspaceAdminActions:!R&&(T||N),userEmail:X,discountPercent:z,handleUpgrade:er,handleLoggedOutUpgrade:ee,getButtonVariant:V,getButtonText:F,getPlanComparisonStatus:j,createPortalSession:E,isCreatePortalSessionLoading:v,numberOfPlansShown:G,allPlanOptions:J,freePlanButtonVariant:R?"twilight":"link",proPlanButtonVariant:$,onDowngradeClick:O,isPlanDowngrade:et,targetDowngradePlan:en,setTargetDowngradePlan:eo,setFreePlanAsTarget:ea},children:r})},m=()=>{let e=(0,o.useContext)(h);if(!e)throw Error("usePricing must be used within a PricingProvider");return e}},108:function(e,r,t){t.d(r,{m:function(){return O},q:function(){return v}});var n=t(57437),o=t(21770),a=t(83464),i=t(46214),l=t(2265),s=t(14438),u=t(49360),c=t(52558),d=t(64040),p=t(49131),_=t(21288),f=t(49284);let S="settings",h="billing",b="plan_id",m="redirect",P=(0,l.createContext)(void 0),O=()=>{let e=(0,l.useContext)(P);if(!e)throw Error("useSubscription must be used within a SubscriptionProvider");return e},w=e=>{let{currentUrl:r,planId:t}=e,n=new URL(r);return n.searchParams.set("payment_status","failed"),n.searchParams.set(b,t),n.toString()},C=e=>{let{currentUrl:r,planId:t,orderId:n,planType:o}=e,a=new URL("".concat(window.location.origin).concat("/purchase-success"));if("/profile/plans"===window.location.pathname)a.searchParams.set(m,window.location.origin);else{let e=new URL(r);r.searchParams.has(S)&&r.searchParams.get(S)===h&&e.searchParams.set(S,h),a.searchParams.set(m,e.toString())}return a.searchParams.set(b,t),a.searchParams.set("order_id",n),a.searchParams.set("plan_type",o),a.toString()},v=e=>{let{children:r}=e,{authUser:t}=(0,c.Eu)(),[S,h]=(0,l.useState)(!1),[b,m]=(0,l.useState)(!1),O=(0,o.D)({mutationFn:async e=>{var r,n;let{plan:o,workspaceId:a,grandfatheredDiscount:i=!1,planType:l="monthly"}=e;h(o.id);let s=new URL(window.location.href),c="ORDER_".concat(null==t?void 0:t.uid,"_").concat((0,u.Z)()),d=w({currentUrl:s,planId:o.id}),_=C({currentUrl:s,planId:o.id,orderId:c,planType:l}),f={price_lookup_key:"monthly"===l?o.monthlyLookupKey:null!==(n=o.annualLookupKey)&&void 0!==n?n:o.monthlyLookupKey,quantity:o.quantity,cancel_url:d,success_url:_,client_reference_id:null===(r=window.Rewardful)||void 0===r?void 0:r.referral,workspace_id:a,with_discount:i};return(0,p.SJ)().post("/workspaces/".concat(a,"/stripe/checkout"),f)},onSuccess:e=>{window.location.assign(e.url)},onMutate:e=>{let{plan:r}=e;h(r.id),i.ZP.capture(f.TQ.CREDIT_PLAN_CHECKOUT_CLICKED)},onError:e=>{_.logging.error("error_creating_checkout_session",{error:e}),(0,d.Eo)(e)},onSettled:()=>{h(!1)}}),v=async e=>{let{plan:r,workspaceId:t,grandfatheredDiscount:n=!1,planType:o="monthly"}=e;try{await O.mutateAsync({plan:r,workspaceId:t,grandfatheredDiscount:n,planType:o})}catch(e){}},g=async e=>{let{workspaceId:r}=e;try{m(!0);let e=(0,p.SJ)(),t=await e.post("/workspaces/".concat(r,"/stripe/portal-session"),{return_url:window.location.href});window.location.assign(t.url)}catch(e){a.default.isAxiosError(e)&&!e.response&&"Network Error"===e.message&&s.Am.error("Network error: Please check your internet connection and try again."),_.logging.error("error_creating_portal_session",{error:e})}finally{m(!1)}};return(0,n.jsx)(P.Provider,{value:{checkoutLoading:S,isCreatePortalSessionLoading:b,toCheckout:v,createPortalSession:g},children:r})}},7309:function(e,r,t){t.d(r,{Iw:function(){return u},oW:function(){return c},qI:function(){return s},z_:function(){return d}});var n=t(48351),o=t(73400),a=t(46170);let i=[{id:n.It.PRO_1,monthlyPrice:25,limit:100,dropdownLabel:"100 credits / month"},{id:n.It.PRO_2,monthlyPrice:50,limit:200,dropdownLabel:"200 credits / month"},{id:n.It.PRO_3,monthlyPrice:100,limit:400,dropdownLabel:"400 credits / month"},{id:n.It.PRO_4,monthlyPrice:200,limit:800,dropdownLabel:"800 credits / month"},{id:n.It.PRO_5,monthlyPrice:294,limit:1200,dropdownLabel:"1200 credits / month"},{id:n.It.PRO_6,monthlyPrice:480,limit:2e3,dropdownLabel:"2000 credits / month"},{id:n.It.PRO_7,monthlyPrice:705,limit:3e3,dropdownLabel:"3000 credits / month"},{id:n.It.PRO_8,monthlyPrice:920,limit:4e3,dropdownLabel:"4000 credits / month"},{id:n.It.PRO_9,monthlyPrice:1125,limit:5e3,dropdownLabel:"5000 credits / month"},{id:n.It.PRO_10,monthlyPrice:1688,limit:7500,dropdownLabel:"7500 credits / month"},{id:n.It.PRO_11,monthlyPrice:2250,limit:1e4,dropdownLabel:"10000 credits / month"}],l=i.map(e=>{let r=n._I[e.id].LOOKUP_KEYS;if(!r)throw Error("Could not find stripe product for plan id ".concat(e.id));return{id:e.id,monthlyPrice:e.monthlyPrice,limit:e.limit,canManagePlan:!0,name:(0,a.ZN)(e.id),monthlyLookupKey:r.MONTHLY,annualLookupKey:r.ANNUAL,quantity:1,dropdownLabel:e.dropdownLabel}}),s={id:n.It.PRO_9,title:"Pro",priceSuffix:"/ month",description:"For individuals working on larger projects:",featuresHeader:"Everything in Launch, plus:",features:["Everything in Launch, plus:"],icon:"bolt_fill",planOptions:l},u=e=>{if(!e)return"";if("ktlo"===e)return"Lite";if(e.startsWith(a.$k)){let r=e.split("_")[1];return"Pro ".concat(r)}return e},c=e=>{let r=i.find(r=>r.id===e.id);return r?r.monthlyPrice:(0,a.B9)(e.id)||(0,a.Qx)(e.id)?void 0:p[e.id]},d=e=>{let r=i.find(r=>r.id===e);return r?r.limit:(0,a.B9)(e)?void 0:_[e]},p={[o.n.plan.FREE]:0,[o.n.plan.STARTER]:20,[o.n.plan.LAUNCH]:50,[o.n.plan.SCALE_1]:100,[o.n.plan.SCALE]:200,[o.n.plan.SCALE_3]:294,[o.n.plan.SCALE_4]:384,[o.n.plan.SCALE_5]:564,[o.n.plan.SCALE_6]:736,[o.n.plan.SCALE_7]:900,[o.n.plan.ENTERPRISE]:0,bonus:19,pro:19,partner:0,[n.It.AMBASSADOR]:10,[n.It.KTLO]:15,inactive:0},_={[o.n.plan.FREE]:0,[o.n.plan.STARTER]:100,[o.n.plan.LAUNCH]:250,[o.n.plan.SCALE_1]:500,[o.n.plan.SCALE]:1e3,[o.n.plan.SCALE_3]:1500,[o.n.plan.SCALE_4]:2e3,[o.n.plan.SCALE_5]:3e3,[o.n.plan.SCALE_6]:4e3,[o.n.plan.SCALE_7]:5e3,[o.n.plan.ENTERPRISE]:0,bonus:100,pro:100,partner:0,[n.It.KTLO]:30,inactive:0}},27132:function(e,r,t){var n=t(37545),o=t(2265);let a={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};r.Z=e=>{if("number"==typeof e&&e<0)throw Error("Breakpoint value must be positive");let r=(0,n.Z)(),t=(0,o.useMemo)(()=>"number"==typeof e?e:a[e],[e]);return(0,o.useMemo)(()=>void 0!==r.width&&r.width<t,[r.width,t])}},37545:function(e,r,t){var n=t(2265);r.Z=()=>{let[e,r]=(0,n.useState)({width:void 0,height:void 0});return(0,n.useEffect)(()=>{{let e=()=>{r({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}},[]),e}},97318:function(e,r,t){t.d(r,{E:function(){return o},TZ:function(){return i},iZ:function(){return n},pL:function(){return a}});let n={all:["projects"],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e],sharedWithMe:()=>[...n.all,"shared"],branches:e=>[...n.detail(e),"branches"],secretLinkId:e=>[...n.detail(e),"secret-link-id"],domains:e=>[...n.detail(e),"domains"],sourceCode:e=>[...n.detail(e),"source-code"],feedbackStatus:e=>[...n.detail(e),"feedback-status"],presence:e=>[...n.detail(e),"presence"],communityProjects:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"recent",t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return[...n.all,"community",e,r,t,o]},collaborators:e=>[...n.detail(e),"collaborators"],securityWarnings:e=>[...n.detail(e),"security-warnings"],analytics:(e,r)=>[...n.detail(e),"analytics",r],initialPrompt:e=>[...n.detail(e),"initial-prompt"]},o={all:["workspaces"],totalProjects:e=>[...o.all,e,"total-projects"],projects:e=>{let{workspaceId:r,userId:t,limit:n,isDraft:a=!1}=e;return[...o.detail(r),"projects",t,n,a?"draft":"published"]},membership:(e,r)=>[...o.all,e,"membership",r],memberships:e=>{let{workspaceId:r,userId:t}=e;return[...o.detail(r),t,"memberships"]},detail:e=>[...o.all,e],supabaseOrganizations:e=>[...o.all,e,"supabase-organizations"],ssoInvites:()=>[...o.all,"sso-invites"],unacceptedInvites:()=>[...o.all,"unaccepted-invites"],inviteUser:(e,r)=>[...o.all,e,"invite-user",r],workspaceRole:(e,r)=>[...o.all,e,"workspace-role",r],workspaceUsage:(e,r,t)=>[...o.all,e,"workspace-usage",r,t],workspaceUserTotalUsage:e=>[...o.all,e,"workspace-user-total-usage"],workspaceGithubInstallations:e=>[...o.all,e,"workspace-github-installations"],referralCode:(e,r)=>[...o.all,e,"referral-code",r],workspaces:e=>{let{userId:r}=e;return[...o.all,r,"workspaces"]},libraries:e=>[...o.detail(e),"libraries"]},a={all:["github"],installations:()=>[...a.all,"installations"],repoAccessibility:e=>[...a.all,"repo-accessibility",e],repos:e=>[...a.all,"repos",null==e?void 0:e.account.login,null==e?void 0:e.target_type]},i={all:["users"],experimentalFeatures:()=>[...i.all,"experimental-features"],workspaces:()=>[...i.all,"workspaces"],workspace:e=>[...i.workspaces(),e],profile:e=>[...i.all,e],contributions:e=>[...i.all,"contributions",e]}},89668:function(e,r,t){t.d(r,{t:function(){return s}});var n=t(52274),o=t(5978),a=t(49131),i=t(97318),l=t(78099);let s={detail:e=>{let{workspaceId:r}=e;return(0,n.C)({queryKey:i.E.detail(null!=r?r:""),queryFn:async()=>r?(0,a.SJ)().get("/workspaces/".concat(r)):{workspace:null,projects:[]}})},totalProjects:e=>{let{workspaceId:r}=e;return(0,n.C)({queryKey:i.E.totalProjects(r),queryFn:async()=>{let e=(0,o.IO)((0,o.hJ)(l.db,"projects"),(0,o.ar)("workspace_id","==",r));return(await (0,o.Yp)(e)).data().count},enabled:!!r})},projects:e=>{let{workspaceId:r,userId:t,limit:o,isDraft:l=!1}=e;return(0,n.C)({queryKey:i.E.projects({workspaceId:null!=r?r:"",userId:t,limit:o,isDraft:l}),queryFn:async()=>{let e=(0,a.SJ)(),n=new URLSearchParams;t&&"all"!==t&&n.set("user_id",t),o&&n.set("limit",o.toString());let i=l?"/workspaces/".concat(r,"/projects/draft"):"/workspaces/".concat(r,"/projects"),s=n.toString()?"".concat(i,"?").concat(n.toString()):i;return await e.get(s)},staleTime:3e5,enabled:!!r})},workspaceMembership:e=>{let{workspaceId:r,userId:t}=e;return(0,n.C)({queryKey:i.E.workspaceRole(r,t),queryFn:async()=>{let e=(0,o.IO)((0,o.hJ)(l.db,"workspace_memberships"),(0,o.ar)("workspace_id","==",r),(0,o.ar)("user_id","==",t),(0,o.b9)(1));return(await (0,o.PL)(e)).docs.map(e=>e.data())[0]}})},workspaceMemberships:e=>{let{userId:r,workspaceId:t}=e;return(0,n.C)({queryKey:i.E.memberships({workspaceId:null!=t?t:"",userId:null!=r?r:""}),refetchInterval:15e3,queryFn:async()=>{let e=(0,a.SJ)();return await e.get("/workspaces/".concat(t,"/memberships"))},enabled:!!t&&!!r})},workspaces:e=>{let{userId:r}=e;return(0,n.C)({queryKey:i.E.workspaces({userId:null!=r?r:""}),queryFn:async()=>{let e=(0,a.SJ)();return await e.get("/user/workspaces")},enabled:!!r})},workspaceUsage:e=>{let{workspaceId:r,month:t,year:o}=e;return(0,n.C)({queryKey:i.E.workspaceUsage(r,t,o),queryFn:async()=>{let e=(0,a.SJ)();return await e.post("/workspaces/".concat(r,"/usage"),{month:t,year:o})}})},workspaceUserTotalUsage:e=>{let{workspaceId:r}=e;return(0,n.C)({queryKey:i.E.workspaceUserTotalUsage(r),queryFn:async()=>{let e=(0,a.SJ)();return(await e.get("/workspaces/".concat(r,"/user-total-usage"))).user_usages},enabled:!!r})},workspaceGithubInstallations:e=>{let{workspaceId:r}=e;return(0,n.C)({queryKey:i.E.workspaceGithubInstallations(r),queryFn:async()=>{let e=(0,a.SJ)();return await e.get("/workspaces/".concat(r,"/github-installations"))},enabled:!!r})},ssoInvites:e=>{let{isSsoInvitesEnabled:r}=e;return(0,n.C)({queryKey:i.E.ssoInvites(),staleTime:36e5,queryFn:()=>r?(0,a.SJ)().get("/user/sso/invites"):Promise.resolve([]),enabled:r})},unacceptedInvites:()=>(0,n.C)({queryKey:i.E.unacceptedInvites(),queryFn:async()=>{let e=(0,a.SJ)();return(await e.get("/user/workspace-invitations")).invitations}}),referralCode:e=>{let{referralCode:r,workspaceId:t}=e;return(0,n.C)({queryKey:i.E.referralCode(t,r),queryFn:async()=>{if(r)return{referral_code:r};let e=(0,a.SJ)();return await e.post("/workspaces/".concat(t,"/referral-code"))}})},libraries:e=>{let{workspaceId:r}=e;return(0,n.C)({queryKey:i.E.libraries(r),queryFn:async()=>{let e=(0,a.SJ)();return await e.get("/workspaces/".concat(r,"/projects/templates"))},enabled:!!r})}}},48351:function(e,r,t){var n,o;t.d(r,{It:function(){return n},_I:function(){return u}}),(o=n||(n={})).PRO_1="pro_1",o.PRO_2="pro_2",o.PRO_3="pro_3",o.PRO_4="pro_4",o.PRO_5="pro_5",o.PRO_6="pro_6",o.PRO_7="pro_7",o.PRO_8="pro_8",o.PRO_9="pro_9",o.PRO_10="pro_10",o.PRO_11="pro_11",o.BIZ_1="biz_1",o.BIZ_2="biz_2",o.BIZ_3="biz_3",o.BIZ_4="biz_4",o.BIZ_5="biz_5",o.BIZ_6="biz_6",o.BIZ_7="biz_7",o.BIZ_8="biz_8",o.BIZ_9="biz_9",o.BIZ_10="biz_10",o.BIZ_11="biz_11",o.AMBASSADOR="ambassador",o.KTLO="ktlo";let a={pro_1:{LOOKUP_KEYS:{MONTHLY:"monthly_pro_100",ANNUAL:"annual_pro_100"}},pro_2:{LOOKUP_KEYS:{MONTHLY:"monthly_pro_200",ANNUAL:"annual_pro_200"}},pro_3:{LOOKUP_KEYS:{MONTHLY:"monthly_pro_400",ANNUAL:"annual_pro_400"}},pro_4:{LOOKUP_KEYS:{MONTHLY:"monthly_pro_800",ANNUAL:"annual_pro_800"}},pro_5:{LOOKUP_KEYS:{MONTHLY:"monthly_pro_1200",ANNUAL:"annual_pro_1200"}},pro_6:{LOOKUP_KEYS:{MONTHLY:"monthly_pro_2000",ANNUAL:"annual_pro_2000"}},pro_7:{LOOKUP_KEYS:{MONTHLY:"monthly_pro_3000",ANNUAL:"annual_pro_3000"}},pro_8:{LOOKUP_KEYS:{MONTHLY:"monthly_pro_4000",ANNUAL:"annual_pro_4000"}},pro_9:{LOOKUP_KEYS:{MONTHLY:"monthly_pro_5000",ANNUAL:"annual_pro_5000"}},pro_10:{LOOKUP_KEYS:{MONTHLY:"monthly_pro_7500",ANNUAL:"annual_pro_7500"}},pro_11:{LOOKUP_KEYS:{MONTHLY:"monthly_pro_10000",ANNUAL:"annual_pro_10000"}},biz_1:{LOOKUP_KEYS:{MONTHLY:"monthly_biz_100",ANNUAL:"annual_biz_100"}},biz_2:{LOOKUP_KEYS:{MONTHLY:"monthly_biz_200",ANNUAL:"annual_biz_200"}},biz_3:{LOOKUP_KEYS:{MONTHLY:"monthly_biz_400",ANNUAL:"annual_biz_400"}},biz_4:{LOOKUP_KEYS:{MONTHLY:"monthly_biz_800",ANNUAL:"annual_biz_800"}},biz_5:{LOOKUP_KEYS:{MONTHLY:"monthly_biz_1200",ANNUAL:"annual_biz_1200"}},biz_6:{LOOKUP_KEYS:{MONTHLY:"monthly_biz_2000",ANNUAL:"annual_biz_2000"}},biz_7:{LOOKUP_KEYS:{MONTHLY:"monthly_biz_3000",ANNUAL:"annual_biz_3000"}},biz_8:{LOOKUP_KEYS:{MONTHLY:"monthly_biz_4000",ANNUAL:"annual_biz_4000"}},biz_9:{LOOKUP_KEYS:{MONTHLY:"monthly_biz_5000",ANNUAL:"annual_biz_5000"}},biz_10:{LOOKUP_KEYS:{MONTHLY:"monthly_biz_7500",ANNUAL:"annual_biz_7500"}},biz_11:{LOOKUP_KEYS:{MONTHLY:"monthly_biz_10000",ANNUAL:"annual_biz_10000"}},ambassador:{LOOKUP_KEYS:{MONTHLY:"ambassador"}},ktlo:{LOOKUP_KEYS:{MONTHLY:"ktlo"}}},i={pro_1:{PRODUCT_ID:"prod_S5oQjcilSS4ESn"},pro_2:{PRODUCT_ID:"prod_S5oRPy0Y0nPqxh"},pro_3:{PRODUCT_ID:"prod_S5oSF3553G847f"},pro_4:{PRODUCT_ID:"prod_S5oSgRrV0vy7YI"},pro_5:{PRODUCT_ID:"prod_S5oSLOyTLvcqrO"},pro_6:{PRODUCT_ID:"prod_S5oSMXlFglFbU2"},pro_7:{PRODUCT_ID:"prod_S5oTauRvBgrspu"},pro_8:{PRODUCT_ID:"prod_S5oTiUv0zSPGmh"},pro_9:{PRODUCT_ID:"prod_S5oTiU22SV6og9"},pro_10:{PRODUCT_ID:"prod_SWTJnANFP2q5KQ"},pro_11:{PRODUCT_ID:"prod_SWTNJqORiQTX4R"},biz_1:{PRODUCT_ID:"prod_SbZXo59CXtE0wj"},biz_2:{PRODUCT_ID:"prod_SbZXneRP8c7KJm"},biz_3:{PRODUCT_ID:"prod_SbZXkGmJviKiX6"},biz_4:{PRODUCT_ID:"prod_SbZXH2K8Bz0PKC"},biz_5:{PRODUCT_ID:"prod_SbZXRjVRV7ne8t"},biz_6:{PRODUCT_ID:"prod_SbZXtUa38rzcQf"},biz_7:{PRODUCT_ID:"prod_SbZXfehYoiksvC"},biz_8:{PRODUCT_ID:"prod_SbZXSi2XWA4AP7"},biz_9:{PRODUCT_ID:"prod_SbZWN7CW4SAhtL"},biz_10:{PRODUCT_ID:"prod_SbZWXRhxsy9Wvb"},biz_11:{PRODUCT_ID:"prod_SbZWJrTBQHucUS"},ambassador:{PRODUCT_ID:"prod_SDynEklxf0t3WB"},ktlo:{PRODUCT_ID:"prod_SZolUf5wC0d4sK"}},l={pro_1:{PRODUCT_ID:"prod_S5oQjcilSS4ESn"},pro_2:{PRODUCT_ID:"prod_S5oRPy0Y0nPqxh"},pro_3:{PRODUCT_ID:"prod_S5oSF3553G847f"},pro_4:{PRODUCT_ID:"prod_S5oSgRrV0vy7YI"},pro_5:{PRODUCT_ID:"prod_S5oSLOyTLvcqrO"},pro_6:{PRODUCT_ID:"prod_S5oSMXlFglFbU2"},pro_7:{PRODUCT_ID:"prod_S5oTauRvBgrspu"},pro_8:{PRODUCT_ID:"prod_S5oTiUv0zSPGmh"},pro_9:{PRODUCT_ID:"prod_S5oTiU22SV6og9"},pro_10:{PRODUCT_ID:"prod_SWRQ0hD2isNpp1"},pro_11:{PRODUCT_ID:"prod_SWRStvzbeYDmJD"},biz_1:{PRODUCT_ID:"prod_SbYXFAxIyB09mp"},biz_2:{PRODUCT_ID:"prod_SbYXjGWVPvAXCS"},biz_3:{PRODUCT_ID:"prod_SbYXolxrsvk3Xk"},biz_4:{PRODUCT_ID:"prod_SbYXmUIRvHBJ40"},biz_5:{PRODUCT_ID:"prod_SbYXUmPWMWi4U0"},biz_6:{PRODUCT_ID:"prod_SbYYu2eGuAyvKz"},biz_7:{PRODUCT_ID:"prod_SbYY3GfS4YOTO4"},biz_8:{PRODUCT_ID:"prod_SbYYf36dVe115Z"},biz_9:{PRODUCT_ID:"prod_SbYYUH7btROvOb"},biz_10:{PRODUCT_ID:"prod_SbYYrUOzaH282X"},biz_11:{PRODUCT_ID:"prod_SbYYQQu2QPCMR1"},ambassador:{PRODUCT_ID:"prod_SDhydCOswIvi9R"},ktlo:{PRODUCT_ID:"prod_SZokJcnfvdeV6Y"}},s=Object.fromEntries(Object.values(n).map(e=>[e,{...i[e],...a[e]}]));Object.fromEntries(Object.values(n).map(e=>[e,{...l[e],...a[e]}]));let u=s;if(!(Object.values({CREDITS:{PRODUCT_ID:"prod_PBz7dgcoojSzVk"},OLD_PRO:{PRODUCT_ID:"prod_OtayqnnNbMxjpg"},STARTER:{PRODUCT_ID:"prod_RATAhoODy1Kbsn"},LAUNCH:{PRODUCT_ID:"prod_RAT9OebuvgB9ur"},SCALE_1:{PRODUCT_ID:"prod_RM6vrOL5DeHYgr"},SCALE:{PRODUCT_ID:"prod_RATAg5DUEdbkr4"},SCALE_3:{PRODUCT_ID:"prod_RM6wsb37tx0R2i"},SCALE_4:{PRODUCT_ID:"prod_RM6wsXmA4a0acz"},SCALE_5:{PRODUCT_ID:"prod_RM6wwDaeC6NikJ"},SCALE_6:{PRODUCT_ID:"prod_RM6xlLog0ySaSu"},SCALE_7:{PRODUCT_ID:"prod_RM6x95NN4Uw4Ne"},...u}).every(e=>e.PRODUCT_ID)&&Object.values(u).every(e=>e.PRODUCT_ID)))throw Error("All stripe products must have a product id")},73400:function(e,r,t){var n,o,a;t.d(r,{n:function(){return n}}),(a=(o=n||(n={})).plan||(o.plan={})).FREE="free",a.PRO="pro",a.PARTNER="partner",a.STARTER="starter",a.LAUNCH="launch",a.SCALE_1="scale_1",a.SCALE="scale",a.SCALE_3="scale_3",a.SCALE_4="scale_4",a.SCALE_5="scale_5",a.SCALE_6="scale_6",a.SCALE_7="scale_7",a.ENTERPRISE="enterprise",a.PRO_1="pro_1",a.PRO_2="pro_2",a.PRO_3="pro_3",a.PRO_4="pro_4",a.PRO_5="pro_5",a.PRO_6="pro_6",a.PRO_7="pro_7",a.PRO_8="pro_8",a.PRO_9="pro_9",a.PRO_10="pro_10",a.PRO_11="pro_11",a.AMBASSADOR="ambassador",a.BONUS="bonus"},33370:function(e,r,t){var n,o;t.d(r,{O:function(){return n}}),(o=n||(n={})).SUBMITTED="submitted",o.SKIPPED="skipped",o.NOT_SHOWN="not_shown"},46170:function(e,r,t){t.d(r,{$k:function(){return i},B9:function(){return l},Ll:function(){return c},Qx:function(){return s},XB:function(){return u},ZN:function(){return p},dv:function(){return d},fA:function(){return _},tJ:function(){return a},z6:function(){return f}});var n=t(48351),o=t(73400);let a={...n.It,...o.n.plan,INACTIVE:"inactive"},i="pro_",l=e=>!!e&&e.startsWith(i),s=e=>!!e&&e.startsWith("biz_"),u=e=>!!e&&"free"!==e&&"inactive"!==e,c=e=>e&&"free"!==e?"ktlo"===e?"ktlo":e.startsWith(i)?"pro":"enterprise"===e?"enterprise":"free":"free",d=30,p=e=>{if(e.startsWith(i))return"Pro";switch(e){case o.n.plan.FREE:return"Free";case o.n.plan.PRO:return"Pro";case o.n.plan.STARTER:return"Starter";case o.n.plan.LAUNCH:return"Launch";case"bonus":return"Bonus";case o.n.plan.ENTERPRISE:return"Enterprise";case o.n.plan.PARTNER:return"Partner";case o.n.plan.SCALE:return"Scale 2";case o.n.plan.SCALE_1:case o.n.plan.SCALE_3:case o.n.plan.SCALE_4:case o.n.plan.SCALE_5:case o.n.plan.SCALE_6:case o.n.plan.SCALE_7:return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");case n.It.KTLO:return"Lite";default:return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}},_=e=>[o.n.plan.PRO,o.n.plan.PARTNER,o.n.plan.STARTER,o.n.plan.LAUNCH,o.n.plan.SCALE_1,o.n.plan.SCALE,o.n.plan.SCALE_3,o.n.plan.SCALE_4,o.n.plan.SCALE_5,o.n.plan.SCALE_6,o.n.plan.SCALE_7].includes(e),f=e=>["free","inactive"].includes(e)}}]);